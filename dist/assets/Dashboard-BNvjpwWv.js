import{j as e,u as x,a as g,r as d,b as p,N as h,c as b,O as j}from"./index-QMmcz0e6.js";import{L as v}from"./logo-CBswLJiA.js";import{c as f,U as y,D as N,B as w}from"./AttachMoney-Bw4RhyDO.js";const k=({onConfirm:t,onCancel:n,message:s,subMessage:o})=>e.jsxs("div",{className:"fixed inset-0 z-1000 flex items-center justify-center px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative z-10 bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 border-2 border-pink-500",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 leading-tight",children:s}),e.jsx("p",{className:"text-gray-400 text-lg",children:o})]}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsx("button",{onClick:n,className:"flex-1 px-8 py-3.5 rounded-xl text-lg font-semibold text-gray-400 bg-gray-200 hover:bg-gray-300 focus:outline-none transition duration-150 ease-in-out",children:"Cancel"}),e.jsx("button",{onClick:t,className:"flex-1 px-8 py-3.5 rounded-xl text-lg font-semibold text-white bg-pink-500 hover:bg-pink-600 focus:outline-none transition duration-150 ease-in-out",children:"Yes"})]})]})]});function I(){const{logout:t}=x(),n=g(),[s,o]=d.useState(!1),[l,i]=d.useState(!1),m=()=>{i(!0)},r=async()=>{if(i(!1),!s){o(!0);try{await t(),n("/home",{replace:!0})}catch(c){console.error("Logout failed:",c),n("/home",{replace:!0})}finally{o(!1)}}},a=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:m,disabled:s,className:`w-full flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors duration-200
          ${s?"text-gray-400 cursor-not-allowed bg-gray-50":"hover:bg-gray-100"}`,children:s?"Logging out...":"Logout"}),l&&e.jsx(k,{message:"Logout?",subMessage:"Are you sure you want to log out?",onConfirm:r,onCancel:a})]})}function C(){const[t,n]=d.useState(new Date);d.useEffect(()=>{const l=setInterval(()=>n(new Date),1e3);return()=>clearInterval(l)},[]);const s=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(t),o=new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric"}).format(t);return e.jsxs("div",{className:"text-white rounded-lg px-4 py-4 text-center",style:{backgroundColor:"#ED277C"},children:[e.jsx("div",{className:"text-2xl font-extrabold leading-tight",children:s}),e.jsx("div",{className:"text-sm opacity-90",children:o})]})}const L=f(e.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),S=f(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),D=[{name:"Dashboard",to:"/dashboard",Icon:L,roles:["cashier","manager"]},{name:"Accounts",to:"/dashboard/accounts",Icon:y,roles:["manager"]},{name:"Sells",to:"/dashboard/sell",Icon:N,roles:["cashier"]},{name:"Inventory",to:"/dashboard/inventory",Icon:w,roles:["manager"]},{name:"Records",to:"/dashboard/records",Icon:S,roles:["manager"]}];function z(){const t=p(),n=d.useRef(null),{user:s}=x(),o=s?.role==="admin"?"manager":s?.role==="user"?"cashier":s?.role,l=s?D.filter(r=>r.roles.includes(o)):[],[i,m]=d.useState(l.findIndex(r=>t.pathname.startsWith(r.to)));return d.useEffect(()=>{const r=l.reduce((a,c,u)=>t.pathname.startsWith(c.to)&&(a===-1||c.to.length>l[a].to.length)?u:a,-1);m(r)},[t.pathname,l]),d.useEffect(()=>{if(n.current&&i!==-1){const r=document.querySelectorAll("nav ul li")[i];if(r){const a=r.offsetTop,c=r.offsetHeight;n.current.style.transform=`translateY(${a}px)`,n.current.style.height=`${c}px`}}},[i]),e.jsxs("aside",{className:"w-64 min-h-screen bg-white border-r border-gray-200 hidden md:flex flex-col text-black",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center gap-3",children:[e.jsx("img",{src:v,alt:"DSC Souvenirs Logo",className:"w-10 h-10"}),e.jsxs("div",{className:"flex flex-col leading-tight",children:[e.jsx("span",{className:"text-xl font-bold text-black",children:"DSC Souvenirs"}),s&&e.jsx("span",{className:"text-sm font-medium text-pink-500 capitalize",children:s.role==="user"?"Cashier":s.role==="admin"?"Manager":s.role})]})]}),e.jsx("div",{className:"px-2 pt-4",children:e.jsx(C,{})}),e.jsxs("nav",{className:"relative py-4 flex-1","aria-label":"Main navigation",children:[e.jsx("span",{ref:n,className:"absolute w-full bg-pink-100 transition-transform duration-300 ease-in-out pointer-events-none z-0",style:{transform:"translateY(0)"},children:e.jsx("span",{className:"absolute top-0 left-0 h-full w-1 bg-pink-600"})}),e.jsx("ul",{className:"space-y-1 relative z-10",children:l.map(({name:r,to:a,Icon:c})=>e.jsx("li",{children:e.jsxs(h,{to:a,className:({isActive:u})=>["flex items-center gap-3 w-full px-4 py-3 text-sm font-medium rounded-md transition-colors duration-200 relative",u?"text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"].join(" "),children:[e.jsx(c,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{className:"truncate",children:r})]})},a))})]}),e.jsx("div",{className:"mt-auto border-t border-gray-200",children:e.jsx(I,{})})]})}function U(){const{user:t,loading:n}=x(),s=t?t.name||`${t.first_name||""} ${t.last_name||""}`.trim():"Firstname Lastname",o=(()=>{if(!t)return"??";const i=(t.first_name||"").trim(),m=(t.last_name||"").trim();if(i||m)return`${(i[0]||"").toUpperCase()}${(m[0]||"").toUpperCase()}`;const a=(t.name||"").trim().split(/\s+/).filter(Boolean);return a.length===0?"U":a.length===1?a[0][0].toUpperCase():(a[0][0]+a[1][0]).toUpperCase()})(),l=t&&(t.avatar||t.profileImage||t.profile_image);return n?e.jsxs("div",{className:"flex items-center gap-3 bg-pink-50 border border-pink-400 text-black rounded-full px-4 py-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/80 border border-pink-300 flex items-center justify-center text-sm font-semibold",children:"..."}),e.jsx("span",{className:"text-base font-medium",children:"Loading..."})]}):e.jsxs(h,{to:"/dashboard/profile",className:({isActive:i})=>["flex items-center gap-3 bg-pink-50 border border-pink-400 text-black rounded-full px-4 py-[7px] transition-colors duration-200",i?"bg-pink-100":"hover:bg-pink-100"].join(" "),children:[l?e.jsx("img",{src:l,alt:s,className:"w-8 h-8 rounded-full object-cover border border-pink-300"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center border border-pink-300 text-sm font-semibold text-black",children:o}),e.jsx("span",{className:"text-base font-medium truncate",children:s})]})}function M({Title:t}){return e.jsxs("div",{className:"sticky top-0 z-50 flex justify-between items-center px-4 py-4 bg-white shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t}),e.jsx(U,{})]})}function R(){const s=b().reverse().find(o=>o.handle?.title)?.handle?.title||"Dashboard";return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(z,{}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx(M,{Title:s}),e.jsx("div",{className:"max-w-8xl mx-auto max-h-[80vh]",children:e.jsx(j,{})})]})]})}export{R as default};
//# sourceMappingURL=Dashboard-BNvjpwWv.js.map
