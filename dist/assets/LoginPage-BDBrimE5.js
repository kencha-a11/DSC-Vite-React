import{u as y,a as v,b as N,r as s,j as e,L as k}from"./index-DAizD6vu.js";import{D as E}from"./DSCLogo-BVzezT1E.js";function L(){const{login:p,user:n,error:f,clearError:a}=y(),i=v(),h=N(),[t,g]=s.useState(""),[o,b]=s.useState(""),[w,l]=s.useState(null),[c,d]=s.useState(!1),m=h.state?.from?.pathname||"/dashboard";s.useEffect(()=>{n&&i(m,{replace:!0})},[n,i,m]),s.useEffect(()=>()=>a(),[a]),s.useEffect(()=>{(t||o)&&(l(null),a())},[t,o,a]);const j=async r=>{r.preventDefault(),l(null),d(!0);try{await p({email:t,password:o})}catch(x){l(x.message),console.error("Login failed:",x)}finally{d(!1)}},u=w||f;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"h-16 w-full flex items-center px-6 bg-white border-b border-gray-200",children:[e.jsx("img",{src:E,alt:"DSC Souvenirs",className:"h-8 w-auto mr-3"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"DSC Souvenirs"})]}),e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] p-4",children:e.jsxs("div",{className:"w-full max-w-md p-8",children:[u&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:u})}),e.jsxs("form",{onSubmit:j,autoComplete:"off",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"off",required:!0,value:t,onChange:r=>g(r.target.value),placeholder:"Enter your email",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"})}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:o,onChange:r=>b(r.target.value),placeholder:"Enter password",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm"})}),e.jsxs("div",{className:"text-sm pt-2 text-right flex justify-between",children:[e.jsx(k,{to:"/home",className:"font-medium text-blue-600 hover:text-blue-500",children:"Home?"}),e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot Password?"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-lg font-semibold text-white bg-pink-500 hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Login"})})]})]})})]})}export{L as default};
