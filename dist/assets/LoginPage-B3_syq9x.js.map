{"version":3,"file":"LoginPage-B3_syq9x.js","sources":["../../src/pages/auth/LoginPage.jsx"],"sourcesContent":["// src/pages/auth/LoginPage.jsx\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport DSCLogo from '../../assets/DSCLogo.png';\n\nexport default function LoginPage() {\n  const { login, user, error, clearError } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [localError, setLocalError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const from = location.state?.from?.pathname || \"/dashboard\";\n\n  useEffect(() => {\n    if (user) navigate(from, { replace: true });\n  }, [user, navigate, from]);\n\n  useEffect(() => {\n    return () => clearError();\n  }, [clearError]);\n\n  useEffect(() => {\n    if (email || password) {\n      setLocalError(null);\n      clearError();\n    }\n  }, [email, password, clearError]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLocalError(null);\n    setLoading(true);\n\n    try {\n      await login({ email, password });\n    } catch (err) {\n      setLocalError(err.message);\n      console.error(\"Login failed:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const displayError = localError || error;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Top Section / Header */}\n      <div className=\"h-16 w-full flex items-center px-6 bg-white border-b border-gray-200\">\n        {DSCLogo && (\n          <img src={DSCLogo} alt=\"DSC Souvenirs\" className=\"h-8 w-auto mr-3\" />\n        )}\n        <span className=\"text-lg font-semibold text-gray-900\">DSC Souvenirs</span>\n      </div>\n\n      {/* Login Form */}\n      <div className=\"flex items-center justify-center min-h-[calc(100vh-4rem)] p-4\">\n        <div className=\"w-full max-w-md p-8\">\n          {/* Error Message */}\n          {displayError && (\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\">\n              <p className=\"text-sm text-red-600\">{displayError}</p>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} autoComplete=\"off\" className=\"space-y-6\">\n            {/* Email Field */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"off\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"Enter your email\"\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\n                />\n              </div>\n            </div>\n\n            {/* Password Field */}\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                  Password\n                </label>\n              </div>\n              <div className=\"mt-1\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter password\"\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\n                />\n              </div>\n              <div className=\"text-sm pt-2 text-right flex justify-between\">\n                <Link to=\"/home\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n                  Home?\n                </Link>\n                <a href=\"#\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n                  Forgot Password?\n                </a>\n              </div>\n\n            </div>\n\n            {/* Submit Button */}\n            <div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-lg font-semibold text-white bg-pink-500 hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Logging in...\n                  </span>\n                ) : (\n                  \"Login\"\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["LoginPage","login","user","error","clearError","useAuth","navigate","useNavigate","location","useLocation","email","setEmail","useState","password","setPassword","localError","setLocalError","loading","setLoading","from","useEffect","handleSubmit","e","err","displayError","jsxs","DSCLogo","jsx","Link"],"mappings":"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"}