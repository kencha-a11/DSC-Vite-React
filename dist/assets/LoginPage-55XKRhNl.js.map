{"version":3,"file":"LoginPage-55XKRhNl.js","sources":["../../src/pages/auth/LoginPage.jsx"],"sourcesContent":["// src/pages/auth/LoginPage.jsx\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\r\n\r\nimport logo from '../../assets/logo.png';\r\n\r\nexport default function LoginPage() {\r\n  const { login, user, error, clearError } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [localError, setLocalError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const from = location.state?.from?.pathname || \"/dashboard\";\r\n\r\n  useEffect(() => {\r\n    if (user) navigate(from, { replace: true });\r\n  }, [user, navigate, from]);\r\n\r\n  useEffect(() => {\r\n    return () => clearError();\r\n  }, [clearError]);\r\n\r\n  useEffect(() => {\r\n    if (email || password) {\r\n      setLocalError(null);\r\n      clearError();\r\n    }\r\n  }, [email, password, clearError]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLocalError(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      await login({ email, password });\r\n    } catch (err) {\r\n      setLocalError(err.message);\r\n      console.error(\"Login failed:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const displayError = localError || error;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Top Section / Header */}\r\n      <div className=\"h-16 w-full flex items-center px-6 bg-white border-b border-gray-200\">\r\n        {logo && (\r\n          <img src={logo} alt=\"DSC Souvenirs\" className=\"h-8 w-auto mr-3\" />\r\n        )}\r\n        <span className=\"text-lg font-semibold text-gray-900\">DSC Souvenirs</span>\r\n      </div>\r\n\r\n      {/* Login Form */}\r\n      <div className=\"flex items-center justify-center min-h-[calc(100vh-4rem)] p-4\">\r\n        <div className=\"w-full max-w-md p-8\">\r\n          {/* Error Message */}\r\n          {displayError && (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\">\r\n              <p className=\"text-sm text-red-600\">{displayError}</p>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} autoComplete=\"off\" className=\"space-y-6\">\r\n            {/* Email Field */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email\r\n              </label>\r\n              <div className=\"mt-1\">\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"off\"\r\n                  required\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Password Field */}\r\n            <div>\r\n              <div className=\"flex items-center justify-between\">\r\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Password\r\n                </label>\r\n              </div>\r\n              <div className=\"mt-1\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  autoComplete=\"new-password\"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter password\"\r\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n              <div className=\"text-sm pt-2 text-right flex justify-between\">\r\n                <Link to=\"/home\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                  Home?\r\n                </Link>\r\n                <a href=\"#\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                  Forgot Password?\r\n                </a>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* Submit Button */}\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-lg font-semibold text-white bg-pink-500 hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {loading ? (\r\n                  <span className=\"flex items-center\">\r\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                    Logging in...\r\n                  </span>\r\n                ) : (\r\n                  \"Login\"\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["LoginPage","login","user","error","clearError","useAuth","navigate","useNavigate","location","useLocation","email","setEmail","useState","password","setPassword","localError","setLocalError","loading","setLoading","from","useEffect","handleSubmit","e","err","displayError","jsxs","logo","jsx","Link"],"mappings":"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"}