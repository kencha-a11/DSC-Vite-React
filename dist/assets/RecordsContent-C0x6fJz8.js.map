{"version":3,"file":"RecordsContent-C0x6fJz8.js","sources":["../../src/services/logServices.js","../../src/components/records/TimeLog.jsx","../../src/components/records/SalesLog.jsx","../../src/components/records/InventoryLog.jsx","../../src/components/contents/RecordsContent.jsx"],"sourcesContent":["// src/services/logService.js\r\nimport api from \"../api/axios\";\r\n\r\n/**\r\n * Fetch Time Logs with optional query params\r\n * @param {Object} params - Filters: user_id, status, date, page\r\n */\r\nexport async function getTimeLogs(params = {}) {\r\n  const response = await api.get(\"/logs/time\", { params });\r\n  return response?.data?.data ?? []; // paginate returns {data, links, meta} structure\r\n}\r\n\r\n/**\r\n * Fetch sales logs from the server.\r\n * @param {Object} params - Optional query parameters (e.g., { userId: 1, date: '2025-10-15' })\r\n * @returns {Promise<Array>} Array of sales log objects\r\n */\r\nexport async function getSalesLogs(params = {}) {\r\n  try {\r\n    const response = await api.get(\"/logs/sales\", { params });\r\n    // Safely return the data array or an empty array if undefined\r\n\r\n    return Array.isArray(response?.data?.data) ? response.data.data : [];\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch sales logs:\", error);\r\n    return []; // fallback to empty array to prevent breaking UI\r\n  }\r\n}\r\n/**\r\n * Fetch Inventory Logs with optional query params\r\n * @param {Object} params - Filters: user_id, action, product_id, page\r\n */\r\nexport async function getInventoryLogs(params = {}) {\r\n  const response = await api.get(\"/logs/inventory\", { params });\r\n  console.log(\"ðŸ” Raw API Response:\", response.data); // ADD THIS LINE\r\n  \r\n  return {\r\n    logs: response?.data?.data ?? [],\r\n    meta: response?.data?.meta ?? {},\r\n    links: response?.data?.links ?? {},\r\n  };\r\n}","import React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { getTimeLogs } from \"../../services/logServices\";\r\nimport useDebounce from \"../../hooks/useDebounce\";\r\nimport useInfiniteScroll from \"../../hooks/useInfiniteScroll\";\r\n\r\nexport default function TimeLog() {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [userFilter, setUserFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  const loaderRef = useRef();\r\n  const debouncedSearch = useDebounce(search, 400);\r\n\r\n  const fetchLogs = useCallback(\r\n    async (pageToFetch = 1) => {\r\n      setLoading(true);\r\n      try {\r\n        const params = {\r\n          user_id: userFilter || undefined,\r\n          date: dateFilter || undefined,\r\n          status: statusFilter || undefined,\r\n          page: pageToFetch,\r\n          limit: 20,\r\n        };\r\n\r\n        const data = await getTimeLogs(params);\r\n\r\n        setLogs((prev) =>\r\n          pageToFetch === 1 ? data : [...prev, ...data]\r\n        );\r\n        setHasMore(data.length > 0);\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to fetch logs:\", err);\r\n        setLogs([]);\r\n        setHasMore(false);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [userFilter, dateFilter, statusFilter]\r\n  );\r\n\r\n  useEffect(() => {\r\n    setLogs([]);\r\n    setPage(1);\r\n    setHasMore(true);\r\n  }, [debouncedSearch, userFilter, dateFilter, statusFilter]);\r\n\r\n  useEffect(() => {\r\n    fetchLogs(page);\r\n  }, [page, fetchLogs]);\r\n\r\n  useInfiniteScroll(\r\n    loaderRef,\r\n    () => {\r\n      if (hasMore && !loading) {\r\n        setPage((prev) => prev + 1);\r\n      }\r\n    },\r\n    hasMore,\r\n    loading\r\n  );\r\n\r\n  const filteredLogs = logs\r\n    .filter((log) =>\r\n      (log.user?.name ?? \"\")\r\n        .toLowerCase()\r\n        .includes(debouncedSearch.toLowerCase())\r\n    )\r\n    .filter((log) => {\r\n      if (statusFilter === \"online\") return log.end_time === null;\r\n      if (statusFilter === \"offline\") return log.end_time !== null;\r\n      return true;\r\n    });\r\n\r\n  // âœ… Compute duration (handles ongoing and live updates)\r\n  const computeDuration = (start, end) => {\r\n    if (!start) return \"--\";\r\n\r\n    const startDate = new Date(start);\r\n    const endDate = end ? new Date(end) : new Date();\r\n\r\n    const diffMs = endDate - startDate;\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n\r\n    if (diffMins < 1) return \"0m\";\r\n\r\n    const hours = Math.floor(diffMins / 60);\r\n    const mins = diffMins % 60;\r\n\r\n    return `${hours > 0 ? `${hours}h ` : \"\"}${mins}m`.trim();\r\n  };\r\n\r\n  // âœ… Auto-update ongoing durations every minute\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setLogs((prev) => [...prev]);\r\n    }, 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const uniqueUsers = Array.from(\r\n    new Map(logs.map((l) => [l.user?.id, l.user])).values()\r\n  ).sort((a, b) => (a?.name ?? \"\").localeCompare(b?.name ?? \"\"));\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded shadow\">\r\n      {/* Filters */}\r\n      <div className=\"p-4 space-y-4\">\r\n        <div className=\"flex flex-wrap gap-4 items-center w-full\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-1/2 min-w-[250px] p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          <div className=\"flex flex-1 gap-4\">\r\n            <select\r\n              value={userFilter}\r\n              onChange={(e) => setUserFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Filter by User</option>\r\n              {uniqueUsers.map((user) => (\r\n                <option key={user?.id} value={user?.id}>\r\n                  {user?.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <input\r\n              type=\"date\"\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">All Status</option>\r\n              <option value=\"online\">Online</option>\r\n              <option value=\"offline\">Offline</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Column Headers */}\r\n      <div className=\"grid grid-cols-[1.2fr_1fr_1fr_0.8fr] items-center text-gray-600 font-medium text-sm border-y border-gray-200 bg-gray-100 py-3 px-8 select-none pr-12\">\r\n        <div className=\"text-left\">User</div>\r\n        <div className=\"text-left\">Date</div>\r\n        <div className=\"text-left\">Time</div>\r\n        <div className=\"text-right\">Duration</div>\r\n      </div>\r\n\r\n      {/* Logs */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {!loading && filteredLogs.length === 0 && (\r\n          <p className=\"py-6 text-center text-gray-500\">No logs found</p>\r\n        )}\r\n\r\n        {filteredLogs.map((log, index) => {\r\n          const startDate = new Date(log.start_time);\r\n          const endDate = log.end_time ? new Date(log.end_time) : null;\r\n\r\n          return (\r\n            <div\r\n              key={`log-${log.id ?? index}`}\r\n              className=\"grid grid-cols-[1.2fr_1fr_1fr_0.8fr] items-center px-8 py-4 border-t border-gray-200 hover:bg-gray-50\"\r\n            >\r\n              {/* User */}\r\n              <div className=\"flex items-center gap-3 py-4\">\r\n                <div className=\"relative\">\r\n                  <div className=\"w-10 h-10 flex items-center justify-center rounded-full bg-violet-500 text-white font-semibold text-lg uppercase\">\r\n                    {log.user?.name ? log.user.name.charAt(0) : \"?\"}\r\n                  </div>\r\n                  {!log.end_time && (\r\n                    <span className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full\"></span>\r\n                  )}\r\n                </div>\r\n                <span className=\"font-medium text-gray-800\">\r\n                  {log.user?.name ?? \"N/A\"}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Date */}\r\n              <div className=\"text-gray-700 text-sm\">\r\n                <div>\r\n                  {startDate.toLocaleDateString(\"en-US\", {\r\n                    month: \"long\",\r\n                    day: \"numeric\",\r\n                    year: \"numeric\",\r\n                  })}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  {startDate.toLocaleDateString(\"en-US\", { weekday: \"long\" })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Time */}\r\n              <div className=\"text-gray-700 text-sm\">\r\n                <div>\r\n                  Start{\" \"}\r\n                  {startDate.toLocaleTimeString([], {\r\n                    hour: \"2-digit\",\r\n                    minute: \"2-digit\",\r\n                  })}\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span>\r\n                    End{\" \"}\r\n                    {log.end_time\r\n                      ? endDate.toLocaleTimeString([], {\r\n                          hour: \"2-digit\",\r\n                          minute: \"2-digit\",\r\n                        })\r\n                      : \"--:--\"}\r\n                  </span>\r\n                  {!log.end_time && (\r\n                    <span className=\"text-green-600 font-semibold ml-2\">\r\n                      Ongoing\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Duration */}\r\n              <div className=\"text-gray-800 text-sm font-semibold text-right\">\r\n                {computeDuration(log.start_time, log.end_time)}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {loading && (\r\n          <div className=\"text-center py-4 text-gray-500\">Loading...</div>\r\n        )}\r\n        <div ref={loaderRef} className=\"h-10\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/components/records/SalesLog.jsx\r\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { getSalesLogs } from \"../../services/logServices\";\r\nimport useDebounce from \"../../hooks/useDebounce\";\r\nimport useInfiniteScroll from \"../../hooks/useInfiniteScroll\";\r\n\r\nexport default function SalesLog() {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [userFilter, setUserFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  const loaderRef = useRef();\r\n  const debouncedSearch = useDebounce(search, 400);\r\n\r\n  // Fetch logs with pagination\r\n  const fetchLogs = useCallback(\r\n    async (pageToFetch = 1) => {\r\n      setLoading(true);\r\n      try {\r\n        const params = {\r\n          user_id: userFilter || undefined,\r\n          date: dateFilter || undefined,\r\n          page: pageToFetch,\r\n          limit: 20, // adjust limit as needed\r\n        };\r\n        const data = await getSalesLogs(params);\r\n\r\n        setLogs(prev => (pageToFetch === 1 ? data : [...prev, ...data]));\r\n        setHasMore(data.length > 0);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch sales logs:\", err);\r\n        setLogs([]);\r\n        setHasMore(false);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [userFilter, dateFilter]\r\n  );\r\n\r\n  // Reset logs when filters/search change\r\n  useEffect(() => {\r\n    setLogs([]);\r\n    setPage(1);\r\n    setHasMore(true);\r\n  }, [debouncedSearch, userFilter, dateFilter]);\r\n\r\n  // Fetch logs when page changes\r\n  useEffect(() => {\r\n    fetchLogs(page);\r\n  }, [page, fetchLogs]);\r\n\r\n  // Infinite scroll\r\n  useInfiniteScroll(\r\n    loaderRef,\r\n    () => {\r\n      if (hasMore && !loading) setPage(prev => prev + 1);\r\n    },\r\n    hasMore,\r\n    loading\r\n  );\r\n\r\n  // Filter logs client-side for search\r\n  const filteredLogs = logs.filter(log =>\r\n    (log.user?.name ?? \"\").toLowerCase().includes(debouncedSearch.toLowerCase())\r\n  );\r\n\r\n  const uniqueUsers = Array.from(\r\n    new Map(logs.map(l => [l.user?.id, l.user])).values()\r\n  ).sort((a, b) => (a?.name ?? \"\").localeCompare(b?.name ?? \"\"));\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded shadow\">\r\n      {/* Filters */}\r\n      <div className=\"p-4 space-y-4\">\r\n        <div className=\"flex flex-wrap gap-4 items-center w-full\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-1/2 min-w-[250px] p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n\r\n          <div className=\"flex flex-1 gap-4\">\r\n            <select\r\n              value={userFilter}\r\n              onChange={(e) => setUserFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Filter by User</option>\r\n              {uniqueUsers.map(user => (\r\n                <option key={user?.id} value={user?.id}>{user?.name}</option>\r\n              ))}\r\n            </select>\r\n\r\n            <input\r\n              type=\"date\"\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Header Row */}\r\n      <div className=\"grid grid-cols-[1fr_1fr_0.5fr_0.5fr] items-center text-gray-600 font-medium text-sm border-y border-gray-200 bg-gray-100 py-3 px-8 select-none pr-14\">\r\n        <div className=\"text-left\">Details</div>\r\n        <div className=\"text-left\">Item Name</div>\r\n        <div className=\"text-left\">Quantity</div>\r\n        <div className=\"text-right\">Subtotal</div>\r\n      </div>\r\n\r\n      {/* Sales Logs */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {filteredLogs.map((log, index) => {\r\n          const saleItems = log.sale_items ?? [];\r\n          const saleDate = new Date(log.created_at ?? Date.now());\r\n          const totalItems = saleItems.reduce(\r\n            (acc, item) => acc + (item.quantity ?? item.snapshot_quantity ?? 0),\r\n            0\r\n          );\r\n          const totalPrice = saleItems.reduce(\r\n            (acc, item) => acc + parseFloat(item.subtotal ?? 0),\r\n            0\r\n          );\r\n\r\n          return (\r\n            <div\r\n              key={`sale-${log.id ?? index}`}\r\n              className=\"grid grid-cols-[1fr_1fr_0.5fr_0.5fr] border-t border-gray-200 hover:bg-gray-50 px-8 py-4\"\r\n            >\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center rounded-full bg-violet-500 text-white font-semibold text-lg uppercase\">\r\n                  {log.user?.name ? log.user.name.charAt(0) : \"?\"}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col text-gray-800\">\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    <span className=\"font-semibold\">{log.user?.name ?? \"Unknown User\"}</span>\r\n                    <span className=\"text-gray-500 text-sm\">\r\n                      {saleDate.toLocaleDateString(\"en-US\", { month: \"long\", day: \"numeric\", year: \"numeric\" })}\r\n                    </span>\r\n                    <span className=\"text-gray-400 text-sm\">\r\n                      {saleDate.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"mt-1 text-sm text-gray-600\">{totalItems} items</div>\r\n                  <div className=\"text-green-600 font-semibold text-sm\">Total: â‚±{totalPrice.toFixed(2)}</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-start text-gray-700 text-sm\">\r\n                {saleItems.map((item, i) => (\r\n                  <div key={`item-name-${i}`} className=\"leading-6\">\r\n                    {item.product?.name ?? item.snapshot_name ?? \"Deleted Product\"}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-start text-gray-700 text-sm\">\r\n                {saleItems.map((item, i) => (\r\n                  <div key={`item-qty-${i}`} className=\"leading-6\">\r\n                    {item.quantity ?? item.snapshot_quantity ?? 0}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"flex flex-col items-end text-gray-700 text-sm pr-4\">\r\n                {saleItems.map((item, i) => (\r\n                  <div key={`item-sub-${i}`} className=\"leading-6\">\r\n                    â‚±{parseFloat(item.subtotal ?? 0).toFixed(2)}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {loading && <div className=\"text-center py-4 text-gray-500\">Loading...</div>}\r\n        <div ref={loaderRef} className=\"h-10\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { getInventoryLogs } from \"../../services/logServices\";\r\n\r\n// Simple debounce hook\r\nfunction useDebounce(value, delay) {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(handler);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\n// Simple infinite scroll hook\r\nfunction useInfiniteScroll(loaderRef, callback, hasMore, loading) {\r\n  useEffect(() => {\r\n    if (!loaderRef.current || !hasMore || loading) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting) callback();\r\n      },\r\n      { threshold: 1.0 }\r\n    );\r\n\r\n    observer.observe(loaderRef.current);\r\n    return () => {\r\n      if (loaderRef.current) observer.unobserve(loaderRef.current);\r\n    };\r\n  }, [loaderRef, callback, hasMore, loading]);\r\n}\r\n\r\nexport default function InventoryLog() {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [actionFilter, setActionFilter] = useState(\"\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  const loaderRef = useRef();\r\n  const debouncedSearch = useDebounce(search, 400);\r\n\r\n  // No highlighting - just return text as-is\r\n  const highlightMatch = (text, searchTerm) => {\r\n    return text || \"N/A\";\r\n  };\r\n\r\n  // Fetch logs from server with filters and pagination\r\n  const fetchLogs = useCallback(\r\n    async (pageToFetch = 1) => {\r\n      setLoading(true);\r\n      try {\r\n        // Build params object\r\n        const params = {\r\n          page: pageToFetch,\r\n          limit: 20,\r\n        };\r\n\r\n        // Only add if they have actual values\r\n        if (debouncedSearch && debouncedSearch.trim() !== \"\") {\r\n          params.search = debouncedSearch.trim();\r\n        }\r\n\r\n        if (actionFilter && actionFilter !== \"\") {\r\n          params.action = actionFilter;\r\n        }\r\n\r\n        if (dateFilter && dateFilter !== \"\") {\r\n          params.date = dateFilter;\r\n        }\r\n\r\n        console.log(\"ðŸ” Fetching logs with params:\", params);\r\n        console.log(\"   - Search term:\", debouncedSearch);\r\n        console.log(\"   - Action filter:\", actionFilter);\r\n        console.log(\"   - Date filter:\", dateFilter);\r\n\r\n        const { logs: fetchedLogs, meta } = await getInventoryLogs(params);\r\n\r\n        console.log(\"ðŸ“¦ API Response:\");\r\n        console.log(\"   - Total logs fetched:\", fetchedLogs.length);\r\n        console.log(\"   - Meta:\", meta);\r\n        console.log(\"   - First log:\", fetchedLogs[0]);\r\n\r\n        setLogs((prev) =>\r\n          pageToFetch === 1 ? fetchedLogs : [...prev, ...fetchedLogs]\r\n        );\r\n        setHasMore(pageToFetch < (meta.last_page || 1));\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to fetch logs:\", err);\r\n        setLogs([]);\r\n        setHasMore(false);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [debouncedSearch, actionFilter, dateFilter]\r\n  );\r\n\r\n  // Reset logs when filters/search change\r\n  useEffect(() => {\r\n    console.log(\"ðŸ”„ Filters changed - resetting:\");\r\n    console.log(\"   - Search:\", debouncedSearch);\r\n    console.log(\"   - Action:\", actionFilter);\r\n    console.log(\"   - Date:\", dateFilter);\r\n    \r\n    setLogs([]);\r\n    setPage(1);\r\n    setHasMore(true);\r\n  }, [debouncedSearch, actionFilter, dateFilter]);\r\n\r\n  // Fetch logs when page changes\r\n  useEffect(() => {\r\n    console.log(\"ðŸ“„ Page changed to:\", page);\r\n    fetchLogs(page);\r\n  }, [page, fetchLogs]);\r\n\r\n  // Infinite scroll\r\n  useInfiniteScroll(\r\n    loaderRef,\r\n    () => {\r\n      if (hasMore && !loading) setPage((prev) => prev + 1);\r\n    },\r\n    hasMore,\r\n    loading\r\n  );\r\n\r\n  const actionOptions = [\r\n    { value: \"\", label: \"All Actions\" },\r\n    { value: \"created\", label: \"Created\" },\r\n    { value: \"update\", label: \"Updated\" },\r\n    { value: \"restock\", label: \"Restocked\" },\r\n    { value: \"deducted\", label: \"Deducted\" },\r\n    { value: \"deleted\", label: \"Deleted\" },\r\n  ];\r\n\r\n  const getActionColor = (action) => {\r\n    switch ((action ?? \"\").toLowerCase()) {\r\n      case \"created\": return \"text-green-600 font-semibold\";\r\n      case \"update\": return \"text-blue-600 font-semibold\";\r\n      case \"restock\": return \"text-emerald-600 font-semibold\";\r\n      case \"deducted\": return \"text-orange-500 font-semibold\";\r\n      case \"deleted\": return \"text-red-600 font-semibold\";\r\n      default: return \"text-gray-700\";\r\n    }\r\n  };\r\n\r\n  const formatActionLabel = (action) => {\r\n    const map = {\r\n      created: \"Created\",\r\n      update: \"Updated\",\r\n      restock: \"Restocked\",\r\n      deducted: \"Deducted\",\r\n      deleted: \"Removed\",\r\n    };\r\n    return map[action?.toLowerCase()] ?? action ?? \"N/A\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded shadow\">\r\n      {/* Filters */}\r\n      <div className=\"p-4 space-y-4\">\r\n        <div className=\"flex flex-wrap gap-4 items-center w-full\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by product name...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-1/2 min-w-[250px] p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          <div className=\"flex flex-1 gap-4\">\r\n            <select\r\n              value={actionFilter}\r\n              onChange={(e) => setActionFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              {actionOptions.map((opt) => (\r\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n              ))}\r\n            </select>\r\n            <input\r\n              type=\"date\"\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n              className=\"flex-1 p-2 border rounded-lg border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Header */}\r\n      <div className=\"grid grid-cols-[1fr_1fr_0.5fr_0.5fr] items-center text-gray-600 font-medium text-sm border-y border-gray-200 bg-gray-100 py-3 px-8 select-none\">\r\n        <div className=\"text-left\">Action</div>\r\n        <div className=\"text-left\">Quantity</div>\r\n        <div className=\"text-left\">Product</div>\r\n        <div className=\"text-right\">Date & Time</div>\r\n      </div>\r\n\r\n      {/* Logs */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {logs.length === 0 && !loading && (\r\n          <p className=\"py-6 text-center text-gray-500\">\r\n            No inventory logs found\r\n            {(debouncedSearch || actionFilter || dateFilter) && (\r\n              <span className=\"block text-sm mt-2\">\r\n                Try adjusting your filters\r\n              </span>\r\n            )}\r\n          </p>\r\n        )}\r\n\r\n        {logs.map((log) => {\r\n          const date = new Date(log.created_at);\r\n\r\n          return (\r\n            <div\r\n              key={log.id}\r\n              className=\"grid grid-cols-[1fr_1fr_0.5fr_0.5fr] border-t border-gray-200 hover:bg-gray-50 px-8 py-6\"\r\n            >\r\n              <div className=\"flex flex-col\">\r\n                <span className={`capitalize ${getActionColor(log.action)}`}>\r\n                  {formatActionLabel(log.action)}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center text-gray-800 text-sm\">\r\n                {log.quantity_change ?? \"-\"}\r\n              </div>\r\n              <div className=\"flex items-center text-gray-800 text-sm\">\r\n                {highlightMatch(log.product_name || \"N/A\", debouncedSearch)}\r\n              </div>\r\n              <div className=\"flex flex-col items-end text-gray-700 text-sm\">\r\n                <div>\r\n                  {date.toLocaleDateString(\"en-US\", {\r\n                    month: \"long\",\r\n                    day: \"numeric\",\r\n                    year: \"numeric\",\r\n                  })}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  {date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {loading && <p className=\"py-6 text-center text-gray-500\">Loading...</p>}\r\n        <div ref={loaderRef} className=\"h-10\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport TimeLog from \"../records/TimeLog\";\r\nimport SalesLog from \"../records/SalesLog\";\r\nimport InventoryLog from \"../records/InventoryLog\";\r\n\r\nconst tabs = [\r\n  { key: \"time\", label: \"Time log\" },\r\n  { key: \"sales\", label: \"Sales log\" },\r\n  { key: \"inventory\", label: \"Inventory log\" },\r\n];\r\n\r\nconst RecordsContent = () => {\r\n  const [activeTab, setActiveTab] = useState(\"time\");\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-[calc(100vh-5rem)] bg-white rounded-lg shadow p-4\">\r\n      {/* Tab Header */}\r\n      <div className=\"relative flex justify-between border border-gray-200 rounded-t-lg overflow-hidden\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.key}\r\n            onClick={() => setActiveTab(tab.key)}\r\n            className={`relative flex-1 py-3 text-center font-medium transition-colors duration-300 ${\r\n              activeTab === tab.key\r\n                ? \"text-black bg-fuchsia-50\"\r\n                : \"text-gray-400 hover:text-gray-600\"\r\n            }`}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n\r\n        {/* Sliding indicator */}\r\n        <div\r\n          className={`absolute bottom-0 h-1 bg-fuchsia-600 rounded-t transition-all duration-300`}\r\n          style={{\r\n            width: `${100 / tabs.length}%`,\r\n            left: `${tabs.findIndex((t) => t.key === activeTab) * (100 / tabs.length)}%`,\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"flex-1 overflow-auto border border-gray-200\">\r\n        {activeTab === \"time\" && <TimeLog />}\r\n        {activeTab === \"sales\" && <SalesLog />}\r\n        {activeTab === \"inventory\" && <InventoryLog />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecordsContent;\r\n"],"names":["getTimeLogs","params","api","getSalesLogs","response","error","getInventoryLogs","TimeLog","logs","setLogs","useState","loading","setLoading","search","setSearch","userFilter","setUserFilter","dateFilter","setDateFilter","statusFilter","setStatusFilter","page","setPage","hasMore","setHasMore","loaderRef","useRef","debouncedSearch","useDebounce","fetchLogs","useCallback","pageToFetch","data","prev","err","useEffect","useInfiniteScroll","filteredLogs","log","computeDuration","start","end","startDate","diffMs","diffMins","hours","mins","interval","uniqueUsers","l","a","b","jsxs","jsx","e","user","index","endDate","SalesLog","saleItems","saleDate","totalItems","acc","item","totalPrice","i","value","delay","debouncedValue","setDebouncedValue","handler","callback","observer","entries","InventoryLog","actionFilter","setActionFilter","highlightMatch","text","searchTerm","fetchedLogs","meta","actionOptions","getActionColor","action","formatActionLabel","opt","date","tabs","RecordsContent","activeTab","setActiveTab","tab","t"],"mappings":"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"}