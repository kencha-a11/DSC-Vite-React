import{j as e,u as h,a as g,r as c,b as f,N as m,c as p,O as j}from"./index-DAizD6vu.js";const b=({onConfirm:t,onCancel:s,message:r,subMessage:o})=>e.jsxs("div",{className:"fixed inset-0 z-1000 flex items-center justify-center px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:s}),e.jsxs("div",{className:"relative z-10 bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 border-2 border-pink-500",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 leading-tight",children:r}),e.jsx("p",{className:"text-gray-400 text-lg",children:o})]}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsx("button",{onClick:s,className:"flex-1 px-8 py-3.5 rounded-xl text-lg font-semibold text-gray-400 bg-gray-200 hover:bg-gray-300 focus:outline-none transition duration-150 ease-in-out",children:"Cancel"}),e.jsx("button",{onClick:t,className:"flex-1 px-8 py-3.5 rounded-xl text-lg font-semibold text-white bg-pink-500 hover:bg-pink-600 focus:outline-none transition duration-150 ease-in-out",children:"Yes"})]})]})]});function v(){const{logout:t}=h(),s=g(),[r,o]=c.useState(!1),[a,i]=c.useState(!1),d=()=>{i(!0)},l=async()=>{if(i(!1),!r){o(!0);try{await t(),s("/home",{replace:!0})}catch(u){console.error("Logout failed:",u),s("/home",{replace:!0})}finally{o(!1)}}},n=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,disabled:r,className:`w-full flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors duration-200
          ${r?"text-gray-400 cursor-not-allowed bg-gray-50":"hover:bg-gray-100"}`,children:r?"Logging out...":"Logout"}),a&&e.jsx(b,{message:"Logout?",subMessage:"Are you sure you want to log out?",onConfirm:l,onCancel:n})]})}function k(){const[t,s]=c.useState(new Date);c.useEffect(()=>{const a=setInterval(()=>s(new Date),1e3);return()=>clearInterval(a)},[]);const r=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(t),o=new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric"}).format(t);return e.jsxs("div",{className:"bg-pink-500 text-white rounded-lg px-4 py-4 text-center",children:[e.jsx("div",{className:"text-2xl font-extrabold leading-tight",children:r}),e.jsx("div",{className:"text-sm opacity-90",children:o})]})}const y=({className:t="w-5 h-5"})=>e.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[e.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),w=({className:t="w-5 h-5"})=>e.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[e.jsx("path",{d:"M3 11.5L12 4l9 7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 12v7a1 1 0 0 0 1 1h3v-5h6v5h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),N=({className:t="w-5 h-5"})=>e.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("rect",{x:"3",y:"13",width:"18",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),C=({className:t="w-5 h-5"})=>e.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[e.jsx("path",{d:"M5 5h14v14H5z",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9h6v6H9z",stroke:"currentColor",strokeWidth:"1.5"})]}),L=({className:t="w-5 h-5"})=>e.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[e.jsx("path",{d:"M12 8v8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"6",r:"1.5",fill:"currentColor"}),e.jsx("path",{d:"M5 12h14l-1 6H6l-1-6z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),I=[{name:"Dashboard",to:"/dashboard",Icon:w,roles:["cashier","manager"]},{name:"Accounts",to:"/dashboard/accounts",Icon:y,roles:["manager"]},{name:"Sells",to:"/dashboard/sell",Icon:L,roles:["cashier"]},{name:"Inventory",to:"/dashboard/inventory",Icon:N,roles:["manager"]},{name:"Records",to:"/dashboard/records",Icon:C,roles:["manager"]}];function S(){const t=f(),s=c.useRef(null),{user:r}=h(),o=r?.role==="admin"?"manager":r?.role==="user"?"cashier":r?.role,a=r?I.filter(l=>l.roles.includes(o)):[],[i,d]=c.useState(a.findIndex(l=>t.pathname.startsWith(l.to)));return c.useEffect(()=>{const l=a.reduce((n,u,x)=>t.pathname.startsWith(u.to)&&(n===-1||u.to.length>a[n].to.length)?x:n,-1);d(l)},[t.pathname,a]),c.useEffect(()=>{s.current&&i!==-1&&(s.current.style.transform=`translateY(${i*48}px)`)},[i]),e.jsxs("aside",{className:"w-64 min-h-screen bg-white border-r border-gray-200 hidden md:flex flex-col text-black",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center gap-3",children:[e.jsx("img",{src:"/assets/logo.png",alt:"DSC Souvenirs Logo",className:"w-10 h-10"}),e.jsxs("div",{className:"flex flex-col leading-tight",children:[e.jsx("span",{className:"text-xl font-bold text-black",children:"DSC Souvenirs"}),r&&e.jsx("span",{className:"text-sm font-medium text-pink-500 capitalize",children:r.role==="user"?"Cashier":r.role==="admin"?"Manager":r.role})]})]}),e.jsx("div",{className:"px-2 pt-4",children:e.jsx(k,{})}),e.jsxs("nav",{className:"relative px-2 py-4 flex-1","aria-label":"Main navigation",children:[e.jsx("span",{ref:s,className:"absolute left-2 w-[calc(100%-1rem)] h-12 bg-gray-100 rounded-md transition-transform duration-300 ease-in-out pointer-events-none z-0",style:{transform:"translateY(0)"}}),e.jsx("ul",{className:"space-y-1 relative z-10",children:a.map(({name:l,to:n,Icon:u})=>e.jsx("li",{children:e.jsxs(m,{to:n,className:({isActive:x})=>["flex items-center gap-3 w-full px-4 py-3 text-sm font-medium rounded-md transition-colors duration-200 relative",x?"text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"].join(" "),children:[e.jsx(u,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{className:"truncate",children:l})]})},n))})]}),e.jsx("div",{className:"mt-auto border-t border-gray-200",children:e.jsx(v,{})})]})}function M(){const{user:t,loading:s}=h(),r=t?t.name||`${t.first_name||""} ${t.last_name||""}`.trim():"Firstname Lastname",o=(()=>{if(!t)return"??";const i=(t.first_name||"").trim(),d=(t.last_name||"").trim();if(i||d)return`${(i[0]||"").toUpperCase()}${(d[0]||"").toUpperCase()}`;const n=(t.name||"").trim().split(/\s+/).filter(Boolean);return n.length===0?"U":n.length===1?n[0][0].toUpperCase():(n[0][0]+n[1][0]).toUpperCase()})(),a=t&&(t.avatar||t.profileImage||t.profile_image);return s?e.jsxs("div",{className:"flex items-center gap-3 bg-pink-50 border border-pink-400 text-black rounded-full px-4 py-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/80 border border-pink-300 flex items-center justify-center text-sm font-semibold",children:"..."}),e.jsx("span",{className:"text-base font-medium",children:"Loading..."})]}):e.jsxs(m,{to:"/dashboard/profile",className:({isActive:i})=>["flex items-center gap-3 bg-pink-50 border border-pink-400 text-black rounded-full px-4 py-[7px] transition-colors duration-200",i?"bg-pink-100":"hover:bg-pink-100"].join(" "),children:[a?e.jsx("img",{src:a,alt:r,className:"w-8 h-8 rounded-full object-cover border border-pink-300"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center border border-pink-300 text-sm font-semibold text-black",children:o}),e.jsx("span",{className:"text-base font-medium truncate",children:r})]})}function D({Title:t}){return e.jsxs("div",{className:"sticky top-0 z-50 flex justify-between items-center px-4 py-4 bg-white shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t}),e.jsx(M,{})]})}function z(){const r=p().reverse().find(o=>o.handle?.title)?.handle?.title||"Dashboard";return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(S,{}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx(D,{Title:r}),e.jsx("div",{className:"max-w-8xl mx-auto max-h-[80vh]",children:e.jsx(j,{})})]})]})}export{z as default};
