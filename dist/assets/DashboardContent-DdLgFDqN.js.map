{"version":3,"file":"DashboardContent-DdLgFDqN.js","sources":["../../src/components/icons/DollarIcon.jsx","../../src/components/icons/BasketIcon.jsx","../../src/components/icons/BoxIcon.jsx","../../src/components/icons/ReceiptIcon.jsx","../../src/components/icons/UserIcon.jsx","../../src/components/icons/AlarmIcon.jsx","../../src/components/dashboard/StatCard.jsx","../../src/components/dashboard/manager/SalesTrendChart.jsx","../../src/components/dashboard/manager/TopSellingProduct.jsx","../../src/components/dashboard/manager/NonSellingList.jsx","../../src/components/dashboard/manager/StockAlert.jsx","../../src/services/dashboardServices.js","../../src/components/dashboard/manager/useManagerDashboardHandler.js","../../src/components/dashboard/manager/ManagerDashboard.jsx","../../src/components/dashboard/cashier/InventoryTable.jsx","../../src/components/dashboard/cashier/TimeLogTable.jsx","../../src/components/dashboard/cashier/SalesLogTable.jsx","../../src/components/dashboard/cashier/RecordPanel.jsx","../../src/components/dashboard/cashier/useCashierDashboardHandler.js","../../src/components/dashboard/cashier/CashierDashboard.jsx","../../src/components/dashboard/DashboardContent.jsx"],"sourcesContent":["export const DollarIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      fill=\"none\"\r\n      viewBox=\"0 0 24 24\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"currentColor\"\r\n      className=\"w-5 h-5 text-gray-500\"\r\n    >\r\n      {/* Vertical Line/Strike-through */}\r\n      <path d=\"M12 2L12 22\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n      \r\n      {/* S-shape for the Dollar Sign */}\r\n      <path d=\"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    </svg>\r\n  );\r\n};","export const BasketIcon = () => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className=\"w-5 h-5 text-gray-500\"\r\n      >\r\n        <path d=\"M6 10l-2 10h16l-2-10H6z\"></path>\r\n        <circle cx=\"12\" cy=\"15\" r=\"1\" fill=\"currentColor\" stroke=\"none\"></circle>\r\n        <path d=\"M10 5l4 0\"></path>\r\n        <path d=\"M12 2l0 3\"></path>\r\n      </svg>\r\n)","export const BoxIcon = () => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className=\"w-5 h-5 text-gray-500\"\r\n    >\r\n        <path d=\"M12.89 1.15l8 4a1 1 0 0 1 0 1.7l-8 4a1 1 0 0 1-1.78 0l-8-4a1 1 0 0 1 0-1.7l8-4a1 1 0 0 1 1.78 0z\"></path>\r\n        <path d=\"M2.33 13.92a1 1 0 0 0 .52 1.25l8 4a1 1 0 0 0 1 0l8-4a1 1 0 0 0 .52-1.25M6 13l0 6\"></path>\r\n        <path d=\"M18 13l0 6\"></path>\r\n        <path d=\"M12 11l0 8\"></path>\r\n    </svg>\r\n)","export const ReceiptIcon = () => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        strokeWidth=\"2\"\r\n        stroke=\"currentColor\"\r\n        className=\"w-5 h-5 text-gray-500\"\r\n    >\r\n        <path d=\"M4 3h16v18l-3-2-3 2-3-2-3 2-3-2V3z\" />\r\n        <line x1=\"8\" y1=\"7\" x2=\"16\" y2=\"7\" />\r\n        <line x1=\"8\" y1=\"11\" x2=\"16\" y2=\"11\" />\r\n        <line x1=\"8\" y1=\"15\" x2=\"13\" y2=\"15\" />\r\n    </svg>\r\n)","export const UserIcon = () => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n        strokeWidth=\"2\"\r\n        stroke=\"currentColor\"\r\n        className=\"w-5 h-5 text-gray-500\"\r\n    >\r\n        <path d=\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\r\n        <circle cx=\"8.5\" cy=\"7\" r=\"4\" />\r\n        <path d=\"M20 8v6M23 11H17\" />\r\n    </svg>\r\n)","export const AlarmIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n    {/* Main Clock Circle */}\r\n    <circle cx=\"12\" cy=\"12\" r=\"9\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    \r\n    {/* Clock Hands (Hour, Minute) */}\r\n    <path d=\"M12 7V12L15 14\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    \r\n    {/* Left Alarm Ticks */}\r\n    <path d=\"M4 4L6 6\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    \r\n    {/* Right Alarm Ticks */}\r\n    <path d=\"M20 4L18 6\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n  </svg>\r\n);","import {\r\n  DollarIcon,\r\n  BasketIcon,\r\n  BoxIcon,\r\n  ReceiptIcon,\r\n  UserIcon,\r\n  AlarmIcon\r\n} from '../../components/icons';\r\n\r\nconst StatCard = ({ type, value, percentageChange, isIncrease }) => {\r\n  // Arrow and color logic for percentage cards\r\n  const percentTextColor = isIncrease ? \"text-green-600\" : \"text-red-600\";\r\n  const percentBgColor = isIncrease ? \"bg-green-100\" : \"bg-red-100\";\r\n  const arrow = isIncrease ? \"â†‘\" : \"â†“\";\r\n\r\n  // Dashboard card types with JSX icons\r\n  const cardTypes = {\r\n    totalSales: { label: \"Total Sales\", icon: <DollarIcon /> },\r\n    totalItems: { label: \"Total Items Sold\", icon: <BasketIcon /> },\r\n    totalTransactions: { label: \"Total Transactions\", icon: <ReceiptIcon /> },\r\n    inventoryCount: { label: \"Inventory Count\", icon: <BoxIcon /> },\r\n    activeUsers: { label: \"Active Users\", icon: <UserIcon /> },\r\n    totalLogs: { label: \"User Log\", icon: <AlarmIcon /> },\r\n  };\r\n\r\n  // Fallback for unknown types\r\n  const current = cardTypes[type] || {\r\n    label: type,\r\n    icon: <div className=\"w-5 h-5 bg-gray-300\" />,\r\n  };\r\n\r\n  // Status content: arrow or active badge\r\n  let statusContent;\r\n  if (type === \"activeUsers\") {\r\n    statusContent = (\r\n      <div className=\"flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-700\">\r\n        Active\r\n      </div>\r\n    );\r\n  } else if (type !== \"totalLogs\") {\r\n    // Only sales/items/transactions show arrow + percentage\r\n    statusContent = (\r\n      <div\r\n        className={`flex items-center px-3 py-1 rounded-full text-sm font-semibold ${percentBgColor} ${percentTextColor}`}\r\n      >\r\n        <span className=\"mr-1\">{arrow}</span>\r\n        <span>{percentageChange}%</span>\r\n      </div>\r\n    );\r\n  } else {\r\n    // totalLogs has no badge/statusContent\r\n    statusContent = null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 border border-gray-200 rounded-xl bg-white shadow-sm w-full\">\r\n      <div className=\"w-10 h-10 flex items-center justify-center mb-4 border border-gray-300 rounded-lg\">\r\n        {current.icon}\r\n      </div>\r\n      <p className=\"mb-2 text-lg text-gray-600\">{current.label}</p>\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* Show value prominently for all cards */}\r\n        <p className=\"text-3xl font-bold text-gray-900\">{value}</p>\r\n        {/* Show status content only if not totalLogs or activeUsers */}\r\n        {statusContent}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatCard;\r\n","import React from \"react\";\r\n\r\nconst SalesTrendChart = ({ title, data, selectedYear, onYearChange, className = \"\" }) => {\r\n  const months = data.map((d) => d.month.substring(0, 3));\r\n\r\n  // Use numeric values for chart calculations\r\n  const numericSales = data.map((d) => d.total_sales);\r\n  const maxSales = Math.max(...numericSales);\r\n\r\n  // Generate Y-axis labels as formatted currency\r\n  const yAxisValues = Array.from({ length: 6 }, (_, i) => {\r\n    const value = (maxSales / 5) * i;\r\n    return `â‚±${value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n  });\r\n\r\n  return (\r\n    <div className={`bg-white border border-gray-200 rounded-xl shadow-sm ${className}`}>\r\n      {/* Header Section */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n        <h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\r\n        <div className=\"relative\">\r\n          <select\r\n            className=\"block appearance-none w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-md leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            aria-label=\"Select year\"\r\n            value={selectedYear}\r\n            onChange={(e) => onYearChange(Number(e.target.value))}\r\n          >\r\n            {/* <option value=\"2024\">2024</option> */}\r\n            <option value=\"2025\">2025</option>\r\n            {/* <option value=\"2026\">2026</option> */}\r\n          </select>\r\n          <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n            <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chart Area */}\r\n      <div className=\"flex p-4\">\r\n        {/* Y-axis */}\r\n        <div className=\"flex flex-col justify-between pr-4 text-sm text-gray-600 font-medium whitespace-nowrap\">\r\n          {yAxisValues.slice().reverse().map((value, index) => (\r\n            <span key={index}>{value}</span>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Chart */}\r\n        <div className=\"grow\">\r\n          <svg className=\"w-full\" viewBox=\"0 0 600 200\" preserveAspectRatio=\"none\">\r\n            {/* Grid lines */}\r\n            {yAxisValues.map((_, index) => (\r\n              <line\r\n                key={`grid-${index}`}\r\n                x1=\"0\"\r\n                y1={200 - (index * (200 / (yAxisValues.length - 1)))}\r\n                x2=\"600\"\r\n                y2={200 - (index * (200 / (yAxisValues.length - 1)))}\r\n                stroke=\"#e5e7eb\"\r\n                strokeWidth=\"1\"\r\n                strokeDasharray=\"2 2\"\r\n              />\r\n            ))}\r\n\r\n            {/* Line */}\r\n            <polyline\r\n              fill=\"none\"\r\n              stroke=\"#8b5cf6\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              points={numericSales\r\n                .map((sales, i) => {\r\n                  const x = (i / (numericSales.length - 1)) * 600;\r\n                  const y = 200 - (sales / maxSales) * 180;\r\n                  return `${x},${y}`;\r\n                })\r\n                .join(\" \")}\r\n            />\r\n\r\n            {/* Area fill */}\r\n            <polygon\r\n              fill=\"#ede9fe\"\r\n              points={`0,200 ${numericSales\r\n                .map((sales, i) => {\r\n                  const x = (i / (numericSales.length - 1)) * 600;\r\n                  const y = 200 - (sales / maxSales) * 180;\r\n                  return `${x},${y}`;\r\n                })\r\n                .join(\" \")} 600,200`}\r\n            />\r\n          </svg>\r\n\r\n          {/* X-axis Labels */}\r\n          <div className=\"flex justify-between mt-2 text-sm text-gray-600 font-medium\">\r\n            {months.map((m, i) => (\r\n              <span key={i}>{m}</span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesTrendChart;\r\n","// TopSellingProduct.jsx\r\nimport React from \"react\";\r\n\r\nconst TopSellingProduct = ({\r\n  title = \"Top-selling items\",\r\n  items = [],\r\n  className = \"\",\r\n}) => {\r\n  // Fallback: prevent errors if no data is passed\r\n  if (!items || items.length === 0) {\r\n    return (\r\n      <div\r\n        className={`bg-white border border-gray-200 rounded-xl  ${className}`}\r\n      >\r\n        <h3 className=\"p-4 text-lg font-medium text-gray-900 border-b border-gray-200\">\r\n          {title}\r\n        </h3>\r\n        <div className=\"p-4 text-gray-500 text-sm text-center\">\r\n          No data available\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Find the highest quantity to set the reference for bar length\r\n  const maxQuantity = Math.max(...items.map((item) => item.total_sold));\r\n\r\n  return (\r\n    <div\r\n      className={`bg-white border border-gray-200 rounded-xl ${className}`}\r\n    >\r\n      {/* Header */}\r\n      <h3 className=\"p-4 text-lg font-medium text-gray-900 border-b border-gray-200\">\r\n        {title}\r\n      </h3>\r\n\r\n      {/* List Container */}\r\n      <div className=\"p-4 space-y-3\">\r\n        {items.map((item, index) => {\r\n          // Calculate the width of the bar as a percentage of the max quantity\r\n          const barWidthPercentage = (item.total_sold / maxQuantity) * 100;\r\n\r\n          // Alternate bar colors for a pattern\r\n          const barColorClass = index % 2 === 0 ? \"bg-blue-600\" : \"bg-blue-300\";\r\n          const textColor = \"text-blue-600\";\r\n\r\n          return (\r\n            <div key={index} className=\"flex flex-col\">\r\n              {/* Item Name */}\r\n              <p className=\"text-sm text-gray-800 mb-1\">{item.product_name}</p>\r\n\r\n              {/* Bar and Quantity */}\r\n              <div className=\"flex items-center\">\r\n                <div className=\"grow h-6 relative bg-gray-100 rounded-sm overflow-hidden\">\r\n                  {/* Bar */}\r\n                  <div\r\n                    className={`h-full absolute left-0 top-0 ${barColorClass}`}\r\n                    style={{\r\n                      width: `${barWidthPercentage}%`,\r\n                      transition: \"width 0.3s ease\",\r\n                    }}\r\n                  ></div>\r\n                </div>\r\n\r\n                {/* Quantity Label */}\r\n                <span\r\n                  className={`ml-3 text-sm font-semibold ${textColor} whitespace-nowrap`}\r\n                >\r\n                  {item.total_sold} pcs\r\n                </span>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopSellingProduct;\r\n","import React, { forwardRef } from 'react';\r\n\r\n// âœ… NonSellingProductList is a functional component with forwardRef for external refs\r\nconst NonSellingProductList = forwardRef(\r\n  ({ items, selectedDays, onDaysChange, loading, sentinelRef, containerRef }, ref) => {\r\n    const daysOptions = [7, 14, 30, 60, 90];\r\n\r\n    // âœ… Helper to calculate days since last sold\r\n    const calculateDaysAgo = (lastSoldDate) => {\r\n      if (!lastSoldDate || lastSoldDate === 'Never') return null;\r\n      const diffTime = Math.abs(new Date() - new Date(lastSoldDate));\r\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    };\r\n\r\n    // âœ… Helper to format date (not critical for infinite scroll)\r\n    const formatDate = (dateString) => {\r\n      if (!dateString || dateString === 'Never') return 'Never';\r\n      return new Date(dateString).toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: '2-digit',\r\n        year: 'numeric',\r\n      });\r\n    };\r\n\r\n    return (\r\n      <div className=\"bg-white rounded-xl shadow-sm\">\r\n        <div className=\"flex items-center justify-between p-4 border-gray-200 border-b\">\r\n          <h3 className=\"text-lg font-medium text-gray-900\">Not-selling items</h3>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <select\r\n              value={selectedDays}\r\n              onChange={(e) => onDaysChange(Number(e.target.value))}\r\n              className=\"px-3 py-1 text-sm font-semibold text-gray-700 bg-gray-100 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              {daysOptions.map((d) => (\r\n                <option key={d} value={d}>\r\n                  {d}+\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-sm text-gray-700\">days unsold</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* âœ… Scrollable container with ref for intersection observer */}\r\n        <div className=\"max-h-96 overflow-y-auto divide-y\" ref={containerRef}>\r\n          {/* âœ… Display empty state if no items */}\r\n          {items.length === 0 && !loading ? (\r\n            <div className=\"p-4 text-center text-gray-500\">No items found</div>\r\n          ) : (\r\n            items.map((item, index) => {\r\n              const daysAgo = calculateDaysAgo(item.last_sold_date);\r\n              return (\r\n                <div\r\n                  key={item.id || index}\r\n                  className=\"p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between border-gray-200\"\r\n                >\r\n                  <p className=\"text-base font-medium text-gray-800\">\r\n                    {item.product_name || item.name}\r\n                  </p>\r\n                  {daysAgo !== null && (\r\n                    <span className=\"text-gray-500\">{daysAgo} days ago</span>\r\n                  )}\r\n                </div>\r\n              );\r\n            })\r\n          )}\r\n\r\n          {/* âœ… Sentinel div observed by IntersectionObserver to trigger loadMore */}\r\n          <div ref={sentinelRef} className=\"p-4 text-center\">\r\n            {loading && <span className=\"text-sm text-gray-500\">Loading more...</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nNonSellingProductList.displayName = 'NonSellingProductList';\r\nexport default NonSellingProductList;\r\n\r\n/*\r\nâœ… How it works with infinite scroll:\r\n\r\n1. The scrollable container has `containerRef` which is passed to `useInfiniteScroll`.\r\n2. The sentinel div has `sentinelRef` which the IntersectionObserver watches.\r\n3. `useInfiniteScroll` is initialized in the parent hook (`useManagerDashboardHandler`) with:\r\n   - sentinelRef: the element at the bottom to detect when near viewport\r\n   - containerRef.current: the scrollable container as the root\r\n   - hasMore & loading flags: prevent duplicate or unnecessary fetches\r\n   - loadMore function: increments page to trigger API fetch\r\n4. On initial render, containerRef.current might be null:\r\n   - `useEffect` inside `useInfiniteScroll` handles this by observing the sentinel once the ref is set\r\n5. When user scrolls and sentinel intersects container viewport:\r\n   - IntersectionObserver triggers loadMore\r\n   - loadMore updates the page state\r\n   - useEffect in the hook fetches next page from API\r\n   - Newly fetched items are appended to the `items` array\r\n6. Changing `selectedDays` resets items, page, and hasMore, so observer will fetch fresh data\r\n7. The component itself does not handle fetching; it only renders items and provides DOM refs for the hook\r\n8. âœ… Ensure useInfiniteScroll is always called at top-level to properly attach the observer\r\n*/\r\n","import React, { useEffect } from 'react';\r\n\r\n// âœ… StockAlert component with containerRef (scroll container) and sentinelRef (trigger for infinite scroll)\r\nconst StockAlert = ({ data, loading, sentinelRef, containerRef, loadMore }) => {\r\n  const getStatusBadge = (status, stock) => {\r\n    if (status === 'Out of Stock' || stock === 0) {\r\n      return (\r\n        <span className=\"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded\">\r\n          Out of Stock\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <span className=\"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded\">\r\n        Low Stock\r\n      </span>\r\n    );\r\n  };\r\n\r\n  // âœ… Attach IntersectionObserver to sentinelRef to detect when scroll reaches bottom\r\n  useEffect(() => {\r\n    if (!sentinelRef?.current || !containerRef?.current) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        // âœ… When sentinel is visible and not already loading, call loadMore\r\n        if (entry.isIntersecting && !loading) {\r\n          loadMore();\r\n        }\r\n      },\r\n      {\r\n        root: containerRef.current, // âœ… scrollable container as root\r\n        rootMargin: '0px',\r\n        threshold: 1.0,\r\n      }\r\n    );\r\n\r\n    observer.observe(sentinelRef.current);\r\n\r\n    return () => {\r\n      if (sentinelRef.current) observer.unobserve(sentinelRef.current);\r\n    };\r\n  }, [sentinelRef, containerRef, loadMore, loading]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-sm\">\r\n      <div className=\"flex items-center justify-between p-4 border-gray-200 border-b\">\r\n        <h3 className=\"text-lg font-medium text-gray-900\">Stock Alert</h3>\r\n      </div>\r\n\r\n      {/* âœ… containerRef allows IntersectionObserver to observe the scroll */}\r\n      <div className=\"max-h-96 overflow-y-auto divide-y\" ref={containerRef}>\r\n        {data.length === 0 && !loading ? (\r\n          <div className=\"p-4 text-center text-gray-500\">No low stock items</div>\r\n        ) : (\r\n          data.map((item, index) => (\r\n            <div\r\n              key={item.id || index}\r\n              className=\"p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between border-gray-200\"\r\n            >\r\n              <p className=\"text-base font-medium text-gray-800\">{item.product_name}</p>\r\n              <div className=\"flex items-center space-x-3 text-sm mt-2 sm:mt-0\">\r\n                <div>\r\n                  <span\r\n                    className={`font-medium ${\r\n                      item.stock === 0\r\n                        ? 'text-red-600'\r\n                        : item.stock <= 5\r\n                        ? 'text-orange-600'\r\n                        : 'text-gray-800'\r\n                    }`}\r\n                  >\r\n                    {item.stock ?? 0}\r\n                  </span>\r\n                  <span className=\"text-gray-600\"> remaining </span>\r\n                </div>\r\n                {getStatusBadge(item.status, item.stock)}\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n\r\n        {/* âœ… sentinel div triggers IntersectionObserver */}\r\n        <div ref={sentinelRef} className=\"p-4 text-center\">\r\n          {loading && <span className=\"text-sm text-gray-500\">Loading more...</span>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockAlert;\r\n\r\n/*\r\nâœ… Explanation:\r\n\r\n1. Added `useEffect` inside StockAlert to attach an IntersectionObserver to sentinelRef.\r\n2. The observer watches sentinelRef within the scrollable container (containerRef).\r\n3. When sentinel enters viewport (isIntersecting) and loading is false, loadMore() is called.\r\n4. loadMore function must be provided from the parent hook/component (e.g., useManagerDashboardHandler)\r\n   to increment page number and fetch next items.\r\n5. Cleanup in return ensures observer is removed if component unmounts or ref changes.\r\n6. This setup ensures scroll down automatically triggers fetch when user reaches the bottom.\r\n*/\r\n","import api from \"../api/axios\";\r\n\r\n// ==================== Manager Dashboard ====================\r\n\r\n/**\r\n * Fetches summary data for manager dashboard\r\n * @param {number} year - Optional year filter\r\n * @param {number} days - Optional recent days filter\r\n */\r\nexport const getManagerDashboardData = async (year, days) => {\r\n  const response = await api.get(\"/dashboard/manager\", {\r\n    params: { year, days },\r\n  });\r\n  return response.data;\r\n};\r\n\r\n/**\r\n * Fetch paginated Non-Selling Products\r\n * @param {number} page - Current page for infinite scroll\r\n * @param {number} days - Filter for products not selling in last X days\r\n */\r\nexport const getNonSellingProducts = async (page = 1, days = 30) => {\r\n  const response = await api.get(\"/dashboard/manager/non-selling\", {\r\n    params: { page, days },\r\n  });\r\n  return response.data;\r\n};\r\n\r\n/**\r\n * Fetch paginated Low Stock Alerts\r\n * @param {number} page - Current page for infinite scroll\r\n */\r\nexport const getLowStockAlerts = async (page = 1) => {\r\n  const response = await api.get(\"/dashboard/manager/low-stock\", {\r\n    params: { page },\r\n  });\r\n  return response.data;\r\n};\r\n\r\n// ==================== Admin Dashboard ====================\r\n\r\n/**\r\n * Fetch summary data for admin dashboard\r\n */\r\nexport const getAdminDashboardData = async () => {\r\n  const response = await api.get(\"/dashboard/admin\");\r\n  return response.data;\r\n};\r\n\r\n// ==================== Cashier Dashboard ====================\r\n\r\n/**\r\n * Fetch main cashier dashboard summary\r\n */\r\nexport const getCashierDashboardData = async () => {\r\n  const response = await api.get(\"/dashboard/cashier\");\r\n  return response.data;\r\n};\r\n\r\n/**\r\n * Fetch paginated inventory items\r\n * @param {number} page - Current page for infinite scroll\r\n * @param {string} search - Search term for filtering products\r\n */\r\nexport const getCashierInventory = async (page = 1, search = \"\") => {\r\n  const response = await api.get(\"/dashboard/cashier/inventory\", {\r\n    params: {\r\n      page,\r\n      search: search || undefined, // Only send if not empty\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n\r\n/**\r\n * Fetch paginated time logs with optional date filter\r\n * @param {number} page - Current page for infinite scroll\r\n * @param {string} date - Optional date filter in YYYY-MM-DD format\r\n */\r\nexport const getCashierTimeLogs = async (page = 1, date = \"\") => {\r\n  const response = await api.get(\"/dashboard/cashier/time-logs\", {\r\n    params: {\r\n      page,\r\n      date: date || undefined, // âœ… Send date to backend for filtering\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n\r\n/**\r\n * Fetch paginated sales logs with optional date filter\r\n * @param {number} page - Current page for infinite scroll\r\n * @param {string} date - Optional date filter in YYYY-MM-DD format\r\n */\r\nexport const getCashierSalesLogs = async (page = 1, date = \"\") => {\r\n  const response = await api.get(\"/dashboard/cashier/sales-logs\", {\r\n    params: {\r\n      page,\r\n      date: date || undefined, // âœ… Send date to backend for filtering\r\n    },\r\n  });\r\n  return response.data;\r\n};","// âœ… Integration of useInfiniteScroll with best practices\r\n\r\nimport { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { \r\n  getManagerDashboardData, \r\n  getNonSellingProducts,\r\n  getLowStockAlerts \r\n} from \"../../../services/dashboardServices\";\r\nimport useInfiniteScroll from \"../../../hooks/useInfiniteScroll\";\r\n\r\nexport const useManagerDashboardHandler = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [dashboard, setDashboard] = useState(null);\r\n  const [selectedDays, setSelectedDays] = useState(30);\r\n\r\n  // Non-selling products pagination states\r\n  const [nonSellingPage, setNonSellingPage] = useState(1);\r\n  const [nonSelling, setNonSelling] = useState([]);\r\n  const [hasMoreNonSelling, setHasMoreNonSelling] = useState(true);\r\n  const [loadingNonSelling, setLoadingNonSelling] = useState(false);\r\n\r\n  // Low stock products pagination states\r\n  const [stockPage, setStockPage] = useState(1);\r\n  const [stockAlerts, setStockAlerts] = useState([]);\r\n  const [hasMoreStock, setHasMoreStock] = useState(true);\r\n  const [loadingStock, setLoadingStock] = useState(false);\r\n\r\n  // Refs for sentinel and container for infinite scroll\r\n  const nonSellingRef = useRef(null);\r\n  const stockRef = useRef(null);\r\n  const nonSellingContainerRef = useRef(null);\r\n  const stockContainerRef = useRef(null);\r\n\r\n  // Fetch main dashboard data on mount\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await getManagerDashboardData();\r\n        setDashboard(data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching dashboard:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  // Fetch non-selling products on page or days change\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (loadingNonSelling || (!hasMoreNonSelling && nonSellingPage > 1)) return; // prevent double fetching\r\n      setLoadingNonSelling(true);\r\n      try {\r\n        const res = await getNonSellingProducts(nonSellingPage, selectedDays);\r\n        // Append or reset based on page\r\n        setNonSelling(prev => nonSellingPage === 1 ? res.data : [...prev, ...res.data]);\r\n        setHasMoreNonSelling(res.meta.current_page < res.meta.last_page);\r\n      } catch (error) {\r\n        console.error(\"Error fetching non-selling products:\", error);\r\n        setHasMoreNonSelling(false);\r\n      } finally {\r\n        setLoadingNonSelling(false);\r\n      }\r\n    })();\r\n  }, [nonSellingPage, selectedDays]);\r\n\r\n  // Fetch low stock products on page change\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (loadingStock || (!hasMoreStock && stockPage > 1)) return;\r\n      setLoadingStock(true);\r\n      try {\r\n        const res = await getLowStockAlerts(stockPage);\r\n        setStockAlerts(prev => stockPage === 1 ? res.data : [...prev, ...res.data]);\r\n        setHasMoreStock(res.meta.current_page < res.meta.last_page);\r\n      } catch (error) {\r\n        console.error(\"Error fetching stock alerts:\", error);\r\n        setHasMoreStock(false);\r\n      } finally {\r\n        setLoadingStock(false);\r\n      }\r\n    })();\r\n  }, [stockPage]);\r\n\r\n  // Increment page for infinite scroll\r\n  const loadMoreNonSelling = useCallback(() => {\r\n    if (!loadingNonSelling && hasMoreNonSelling) setNonSellingPage(prev => prev + 1);\r\n  }, [loadingNonSelling, hasMoreNonSelling]);\r\n\r\n  const loadMoreStock = useCallback(() => {\r\n    if (!loadingStock && hasMoreStock) setStockPage(prev => prev + 1);\r\n  }, [loadingStock, hasMoreStock]);\r\n\r\n  // âœ… Integrate useInfiniteScroll hooks at top level\r\n  // - Always pass refs, load function, hasMore, loading state, and containerRef.current\r\n  // - Observes sentinel and triggers loadMore when scrolled near bottom\r\n  useInfiniteScroll(nonSellingRef, loadMoreNonSelling, hasMoreNonSelling, loadingNonSelling, nonSellingContainerRef.current);\r\n  useInfiniteScroll(stockRef, loadMoreStock, hasMoreStock, loadingStock, stockContainerRef.current);\r\n\r\n  // Handler for changing filter days\r\n  const handleDaysChange = (days) => {\r\n    setSelectedDays(days);\r\n    setNonSellingPage(1);\r\n    setNonSelling([]);\r\n    setHasMoreNonSelling(true);\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    dashboard,\r\n    nonSelling,\r\n    stockAlerts,\r\n    selectedDays,\r\n    nonSellingRef,\r\n    stockRef,\r\n    nonSellingContainerRef,\r\n    stockContainerRef,\r\n    loadingNonSelling,\r\n    loadingStock,\r\n    handleDaysChange,\r\n  };\r\n};\r\n\r\n/*\r\nâœ… Key points explained:\r\n\r\n1. Hooks must always be called at top level. No conditional calls.\r\n2. Infinite scroll uses sentinelRef + containerRef to trigger loadMore.\r\n3. loadMoreNonSelling and loadMoreStock increment pages when user scrolls to sentinel.\r\n4. useEffect fetches new data whenever page or filters change.\r\n5. hasMore flags prevent unnecessary API calls once last page is reached.\r\n6. loading flags prevent double fetch while previous request is pending.\r\n7. When days filter changes, reset page to 1 and clear previous items.\r\n8. This setup ensures proper infinite scroll behavior with your Laravel pagination API.\r\n*/\r\n","import React from \"react\";\r\nimport {\r\n  StatCard,\r\n  SalesTrendChart,\r\n  TopSellingProduct,\r\n  NonSellingProductList,\r\n  StockAlert,\r\n} from \"../index\";\r\nimport { useManagerDashboardHandler } from \"./useManagerDashboardHandler\";\r\n\r\nexport default function ManagerDashboard() {\r\n  // âœ… Destructure all state, refs, and handlers from the custom hook\r\n  const {\r\n    loading,\r\n    dashboard,\r\n    nonSelling,\r\n    stockAlerts,\r\n    selectedDays,\r\n    nonSellingRef,\r\n    stockRef,\r\n    nonSellingContainerRef,\r\n    stockContainerRef,\r\n    loadingNonSelling,\r\n    loadingStock,\r\n    handleDaysChange,\r\n  } = useManagerDashboardHandler();\r\n\r\n  // âœ… Show loading state while dashboard is being fetched\r\n  if (loading) {\r\n    return <div className=\"p-6 text-gray-500\">Loading dashboard...</div>;\r\n  }\r\n\r\n  // âœ… Show error if no dashboard data is available\r\n  if (!dashboard) {\r\n    return <div className=\"p-6 text-red-500\">No dashboard data available.</div>;\r\n  }\r\n\r\n  // âœ… Prepare stats array for StatCard components\r\n  const stats = [\r\n    {\r\n      key: \"totalSales\",\r\n      value: `â‚±${dashboard.total_sales?.current?.toLocaleString() ?? 0}`,\r\n      percentageChange: dashboard.total_sales?.change_percentage ?? \"0\",\r\n      isIncrease: parseFloat(dashboard.total_sales?.change_percentage || \"0\") >= 0,\r\n    },\r\n    {\r\n      key: \"totalItems\",\r\n      value: dashboard.total_items_sold?.current ?? 0,\r\n      percentageChange: dashboard.total_items_sold?.change_percentage ?? \"0\",\r\n      isIncrease: parseFloat(dashboard.total_items_sold?.change_percentage || \"0\") >= 0,\r\n    },\r\n    {\r\n      key: \"totalTransactions\",\r\n      value: dashboard.total_transactions?.current ?? 0,\r\n      percentageChange: dashboard.total_transactions?.change_percentage ?? \"0\",\r\n      isIncrease: parseFloat(dashboard.total_transactions?.change_percentage || \"0\") >= 0,\r\n    },\r\n    {\r\n      key: \"inventoryCount\",\r\n      value: dashboard.inventory_count?.current ?? 0,\r\n      percentageChange: dashboard.inventory_count?.change_percentage ?? \"0\",\r\n      isIncrease: parseFloat(dashboard.inventory_count?.change_percentage || \"0\") >= 0,\r\n    },\r\n    {\r\n      key: \"activeUsers\",\r\n      value: `${dashboard.active_users?.active_users ?? 0} / ${dashboard.active_users?.total_users ?? 0}`,\r\n      percentageChange: \"0\",\r\n      isIncrease: true,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <main className=\"flex flex-col\">\r\n      {/* âœ… Display all stat cards */}\r\n      <div className=\"flex space-x-4\">\r\n        {stats.map((stat) => (\r\n          <StatCard\r\n            key={stat.key}\r\n            type={stat.key}\r\n            value={stat.value}\r\n            percentageChange={stat.percentageChange}\r\n            isIncrease={stat.isIncrease}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* âœ… Main panels: left for charts, right for infinite scroll lists */}\r\n      <section className=\"flex flex-wrap lg:flex-nowrap gap-4 mt-6\">\r\n        <div className=\"lg:w-3/5 w-full space-y-6\">\r\n          {/* âœ… Sales trend chart */}\r\n          <SalesTrendChart title=\"Yearly Sales Trend\" data={dashboard.sales_trend || []} />\r\n          {/* âœ… Top selling products */}\r\n          <TopSellingProduct title=\"Top-Selling Products\" items={dashboard.top_products || []} />\r\n        </div>\r\n\r\n        <div className=\"lg:w-2/5 w-full flex flex-col space-y-4 h-[calc(100vh-200px)]\">\r\n          {/* âœ… Non-selling products with infinite scroll */}\r\n          <NonSellingProductList\r\n            items={nonSelling}                  // current loaded items\r\n            selectedDays={selectedDays}        // filter by days\r\n            onDaysChange={handleDaysChange}    // handler to reset page & items\r\n            loading={loadingNonSelling}        // loading spinner state\r\n            sentinelRef={nonSellingRef}        // element watched by intersection observer\r\n            containerRef={nonSellingContainerRef} // scroll container for observer\r\n          />\r\n\r\n          {/* âœ… Low stock alerts with infinite scroll */}\r\n          <StockAlert\r\n            data={Array.isArray(stockAlerts) ? stockAlerts : []} // current loaded stock alerts\r\n            loading={loadingStock}                                // loading spinner state\r\n            sentinelRef={stockRef}                                // element watched by intersection observer\r\n            containerRef={stockContainerRef}                     // scroll container for observer\r\n          />\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\n/*\r\nâœ… How it works after integration:\r\n\r\n1. The custom hook `useManagerDashboardHandler` manages state, API calls, and pagination.\r\n2. Infinite scroll triggers `loadMoreNonSelling` or `loadMoreStock` when the sentinel comes into view.\r\n3. Sentinel elements (`nonSellingRef`, `stockRef`) are observed inside the scroll container (`containerRef`) by IntersectionObserver.\r\n4. When scrolled near the bottom:\r\n   - `loadMoreNonSelling` increments `nonSellingPage`, triggering useEffect to fetch next page.\r\n   - `loadMoreStock` increments `stockPage`, triggering useEffect to fetch next page.\r\n5. `hasMoreNonSelling` / `hasMoreStock` prevent fetching after last page.\r\n6. `loadingNonSelling` / `loadingStock` prevent duplicate requests while one is in progress.\r\n7. Changing `selectedDays` resets non-selling products: page=1, items=[], hasMore=true.\r\n8. Stat cards, charts, and top-selling products are rendered from `dashboard` state.\r\n9. Both NonSellingProductList and StockAlert now automatically fetch additional items when the user scrolls to the bottom.\r\n10. All hooks are called at top-level, respecting React's Rules of Hooks.\r\n*/\r\n","import React, { useRef, useEffect, memo } from \"react\";\r\n\r\n// ==============================\r\n// Single Inventory Row Component\r\n// ==============================\r\nconst InventoryRow = memo(({ item }) => {\r\n  const handleImageError = (e) => {\r\n    e.target.style.display = \"none\";\r\n    if (e.target.nextSibling) {\r\n      e.target.nextSibling.style.display = \"flex\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-[80px_2fr_1fr_1.2fr_1.5fr_1fr] items-center py-3 px-4 border-b border-gray-200 hover:bg-gray-50 transition-colors\">\r\n      <div className=\"flex justify-center\">\r\n        {item.image ? (\r\n          <img\r\n            src={item.image}\r\n            alt={item.product_name}\r\n            loading=\"lazy\"\r\n            className=\"w-12 h-12 object-cover rounded-md\"\r\n            onError={handleImageError}\r\n          />\r\n        ) : null}\r\n        <div\r\n          className=\"w-12 h-12 border border-gray-300 rounded-md flex items-center justify-center text-gray-400 text-sm font-semibold bg-gray-50\"\r\n          style={{ display: item.image ? \"none\" : \"flex\" }}\r\n        >\r\n          {item.product_name?.charAt(0).toUpperCase() || \"?\"}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"text-gray-800 font-medium truncate pr-2\" title={item.product_name}>\r\n        {item.product_name}\r\n      </div>\r\n\r\n      <div className=\"text-gray-700\">{item.stock ?? 0}</div>\r\n      <div className=\"text-gray-700\">â‚± {parseFloat(item.price ?? 0).toFixed(2)}</div>\r\n      <div className=\"text-gray-700 truncate\" title={item.categories?.map((c) => c.name).join(\", \")}>\r\n        {item.categories?.length > 0 ? item.categories.map((c) => c.name).join(\", \") : \"-\"}\r\n      </div>\r\n      <div className={`font-semibold capitalize ${item.statusColor ?? \"text-green-600\"}`}>\r\n        {item.status ?? \"In stock\"}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nInventoryRow.displayName = \"InventoryRow\";\r\n\r\n// ==============================\r\n// Loading Skeleton Component\r\n// ==============================\r\nconst LoadingSkeleton = () => (\r\n  <div className=\"animate-pulse space-y-3 p-4\">\r\n    {[...Array(5)].map((_, i) => (\r\n      <div key={i} className=\"grid grid-cols-[80px_2fr_1fr_1.2fr_1.5fr_1fr] gap-4 items-center\">\r\n        <div className=\"w-12 h-12 bg-gray-200 rounded-md\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-12\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-20\"></div>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// ==============================\r\n// Main Inventory Table Component\r\n// ==============================\r\nexport const InventoryTable = memo(({ data, loading, meta, loadMore, scrollRef, searchTerm, setSearchTerm }) => {\r\n  const containerRef = scrollRef || useRef(null);\r\n  const sentinelRef = useRef(null);\r\n\r\n  // ==============================\r\n  // Robust Infinite Scroll\r\n  // ==============================\r\n  useEffect(() => {\r\n    const sentinel = sentinelRef.current;\r\n    const container = containerRef.current;\r\n\r\n    if (!sentinel || !container || !loadMore) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (\r\n          entry.isIntersecting &&\r\n          !loading &&\r\n          meta?.current_page < meta?.last_page\r\n        ) {\r\n          console.log(\"[InventoryTable] Sentinel visible, loading page\", meta.current_page + 1);\r\n          loadMore();\r\n        }\r\n      },\r\n      {\r\n        root: container,\r\n        rootMargin: \"300px\", // triggers before reaching bottom\r\n        threshold: 0,        // fires as soon as any part of sentinel is visible\r\n      }\r\n    );\r\n\r\n    observer.observe(sentinel);\r\n\r\n    return () => observer.disconnect();\r\n  }, [loading, meta?.current_page, meta?.last_page, loadMore, containerRef]);\r\n\r\n  const showEmptyState = !loading && data.length === 0;\r\n  const showLoadingState = loading && data.length === 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col bg-white shadow-md rounded-lg overflow-hidden h-full\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 p-4 border-b border-gray-200 flex-none bg-white\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Inventory</h1>\r\n        <div className=\"relative w-full sm:w-64\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search items...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full border border-gray-300 rounded-lg py-2 px-4 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-shadow\"\r\n          />\r\n          {searchTerm && (\r\n            <button\r\n              onClick={() => setSearchTerm(\"\")}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n            >\r\n              âœ•\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Scrollable Body */}\r\n      <div ref={containerRef} className=\"flex-1 min-h-0 overflow-y-auto\">\r\n        {/* Column Headers */}\r\n        <div className=\"sticky top-0 z-10 grid grid-cols-[80px_2fr_1fr_1.2fr_1.5fr_1fr] text-xs sm:text-sm font-semibold text-gray-600 bg-gray-100 border-b border-gray-300 shadow-sm\">\r\n          {[\"Image\", \"Item name\", \"Stock\", \"Unit price\", \"Category\", \"Status\"].map((col, i) => (\r\n            <div key={i} className={`py-3 px-2 ${i === 0 ? \"justify-center flex\" : \"\"}`}>{col}</div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Loading / Empty */}\r\n        {showLoadingState && <LoadingSkeleton />}\r\n        {showEmptyState && <div className=\"p-4 text-gray-500\">No inventory items found</div>}\r\n\r\n        {/* Inventory Rows */}\r\n        {data.length > 0 && (\r\n          <>\r\n            {data.map((item) => <InventoryRow key={item.id} item={item} />)}\r\n\r\n            {/* Sentinel for Infinite Scroll */}\r\n            <div ref={sentinelRef} className=\"h-20\" />\r\n\r\n            {/* Loading More Indicator */}\r\n            {loading && data.length > 0 && (\r\n              <div className=\"text-center py-4 text-gray-500\">\r\n                <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\r\n                <p className=\"mt-2 text-sm\">Loading more items...</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* End of Results */}\r\n            {!loading && meta?.current_page >= meta?.last_page && data.length > 0 && (\r\n              <div className=\"text-center py-4 text-gray-400 text-sm\">End</div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nInventoryTable.displayName = \"InventoryTable\";\r\n","import React, { useEffect, useState, memo } from \"react\";\r\n\r\n// ðŸ•’ TIME LOG ENTRY (handles live duration updates)\r\nconst TimeLogEntry = memo(({ log }) => {\r\n  const [duration, setDuration] = useState(log?.duration ?? \"0m\");\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    let intervalId = null;\r\n    const ENABLE_DEBUG = true;\r\n\r\n    const debug = (...args) => {\r\n      if (ENABLE_DEBUG) console.debug(\"[TimeLogEntry]\", ...args);\r\n    };\r\n\r\n    debug(\"ðŸŸ¢ effect start\", { log });\r\n\r\n    if (!log) {\r\n      debug(\"âš ï¸ no log provided\");\r\n      return () => { mounted = false; };\r\n    }\r\n\r\n    if (log.end !== \"Ongoing\") {\r\n      debug(\"â„¹ï¸ log is not ongoing, static duration:\", log.duration);\r\n      setDuration(log.duration ?? \"0m\");\r\n      return () => { mounted = false; };\r\n    }\r\n\r\n    // âœ… Try to parse start timestamp\r\n    const tryParseStartMs = () => {\r\n      debug(\"ðŸ” Parsing start_time:\", log.start_time);\r\n\r\n      if (log.start_time) {\r\n        const safeStart = log.start_time.replace(/\\.\\d+Z$/, \"Z\");\r\n        const parsed = Date.parse(safeStart);\r\n        debug(\"ðŸ“… Date.parse(safeStart):\", { safeStart, parsed });\r\n\r\n        if (!Number.isNaN(parsed)) return parsed;\r\n\r\n        const alt = new Date(safeStart).getTime();\r\n        debug(\"ðŸ“… new Date().getTime():\", { safeStart, alt });\r\n        if (!Number.isNaN(alt)) return alt;\r\n      }\r\n\r\n      if (log.date && log.start) {\r\n        const combined = `${log.date} ${log.start}`;\r\n        const parsed2 = Date.parse(combined);\r\n        debug(\"ðŸ“… Date.parse(date + start):\", { combined, parsed2 });\r\n        if (!Number.isNaN(parsed2)) return parsed2;\r\n\r\n        // Manual parse fallback\r\n        try {\r\n          debug(\"âš™ï¸ Manual parse fallback:\", { date: log.date, start: log.start });\r\n          const [monthName, dayWithComma, year] = log.date.split(\" \");\r\n          const day = parseInt(dayWithComma.replace(\",\", \"\"), 10);\r\n          const [time, meridian] = log.start.split(\" \");\r\n          let [hour, minute] = time.split(\":\").map(Number);\r\n          if (meridian === \"PM\" && hour !== 12) hour += 12;\r\n          if (meridian === \"AM\" && hour === 12) hour = 0;\r\n          const monthIndex = new Date(`${monthName} 1, 2000`).getMonth();\r\n          const manualDate = new Date(Number(year), monthIndex, day, hour, minute, 0);\r\n          debug(\"ðŸ§­ Manual Date constructed:\", manualDate.toISOString());\r\n          return manualDate.getTime();\r\n        } catch (err) {\r\n          console.error(\"âŒ Manual parse error:\", err);\r\n        }\r\n      }\r\n\r\n      if (log.start_time && typeof log.start_time === \"string\") {\r\n        const maybeIso = log.start_time.endsWith(\"Z\") ? log.start_time : `${log.start_time}Z`;\r\n        const parsed3 = Date.parse(maybeIso);\r\n        debug(\"ðŸ“… Try append Z:\", { maybeIso, parsed3 });\r\n        if (!Number.isNaN(parsed3)) return parsed3;\r\n      }\r\n\r\n      debug(\"ðŸš« All parsing attempts failed\");\r\n      return NaN;\r\n    };\r\n\r\n    const startMs = tryParseStartMs();\r\n    debug(\"âœ… final startMs:\", startMs);\r\n\r\n    if (Number.isNaN(startMs)) {\r\n      console.error(\"[TimeLogEntry] âŒ Could not parse start timestamp:\", log);\r\n      return () => { mounted = false; };\r\n    }\r\n\r\n    const now = Date.now();\r\n    const TOLERANCE_MS = 5000;\r\n    if (startMs - now > TOLERANCE_MS) {\r\n      console.warn(\"[TimeLogEntry] âš ï¸ start is in the future\", {\r\n        startMs,\r\n        startIso: new Date(startMs).toISOString(),\r\n        now,\r\n        nowIso: new Date(now).toISOString(),\r\n        diffMs: startMs - now,\r\n      });\r\n    }\r\n\r\n    const updateDuration = () => {\r\n      if (!mounted) return;\r\n      const nowInner = Date.now();\r\n      const diffMs = Math.max(0, nowInner - startMs);\r\n      const totalMinutes = Math.floor(diffMs / (1000 * 60));\r\n      const hours = Math.floor(totalMinutes / 60);\r\n      const minutes = totalMinutes % 60;\r\n\r\n      const formatted =\r\n        totalMinutes < 1 ? \"0m\" :\r\n        hours === 0 ? `${minutes}m` :\r\n        minutes === 0 ? `${hours}h` :\r\n        `${hours}h ${minutes}m`;\r\n\r\n      debug(\"ðŸ•’ updateDuration\", {\r\n        nowInner,\r\n        startMs,\r\n        diffMs,\r\n        totalMinutes,\r\n        hours,\r\n        minutes,\r\n        formatted,\r\n      });\r\n\r\n      setDuration((prev) => (prev === formatted ? prev : formatted));\r\n    };\r\n\r\n    updateDuration();\r\n    intervalId = setInterval(updateDuration, 1000);\r\n\r\n    return () => {\r\n      debug(\"ðŸ”´ cleanup\");\r\n      mounted = false;\r\n      if (intervalId) clearInterval(intervalId);\r\n    };\r\n  }, [log]);\r\n\r\n  return (\r\n    <div className=\"flex justify-between items-center p-4 border-b border-gray-200 last:border-b-0 hover:bg-gray-50 transition-colors\">\r\n      <div className=\"flex flex-col min-w-[50%] pr-4\">\r\n        <span className=\"text-gray-800 font-medium text-base\">{log?.date}</span>\r\n        <span className=\"text-gray-500 text-sm\">{log?.day}</span>\r\n      </div>\r\n      <div className=\"flex flex-col items-start\">\r\n        <span className=\"text-gray-800 font-medium\">Start: {log?.start}</span>\r\n        <span className=\"text-gray-800 font-medium mb-1\">End: {log?.end}</span>\r\n        <span className=\"text-gray-800 font-medium\">\r\n          Duration: <span className=\"font-bold\">{duration}</span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n\r\n\r\nTimeLogEntry.displayName = \"TimeLogEntry\";\r\n\r\n// ðŸ§¾ TIME LOG TABLE (renders list + infinite scroll)\r\nexport const TimeLogTable = ({\r\n  data = [],\r\n  meta = {},\r\n  loading = false,\r\n  loadMoreTimeLogs,\r\n  scrollRef,\r\n  sentinelRef,\r\n}) => {\r\n  // ðŸ•³ï¸ Empty state\r\n  if (data.length === 0 && !loading) {\r\n    return (\r\n      <div\r\n        ref={scrollRef}\r\n        className=\"flex-1 overflow-y-auto min-h-0 h-[53vh] flex items-center justify-center\"\r\n      >\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-gray-400 text-lg\">No time logs found</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // âœ… Main render\r\n  return (\r\n    <div ref={scrollRef} className=\"flex-1 overflow-y-auto min-h-0 h-[53vh]\">\r\n      {data.map((log, index) => (\r\n        <TimeLogEntry key={log.id ?? `time-${index}`} log={log} />\r\n      ))}\r\n\r\n      <div ref={sentinelRef} className=\"h-10\" />\r\n\r\n      {loading && data.length > 0 && (\r\n        <div className=\"text-center py-4 text-gray-500\">\r\n          <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-b-2\"></div>\r\n          <p className=\"mt-2 text-sm\">Loading more logs...</p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && meta?.current_page >= meta?.last_page && data.length > 0 && (\r\n        <div className=\"text-center py-4 text-gray-400 text-sm\">End</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimeLogTable;\r\n","import React, { useMemo, memo, useEffect } from \"react\";\r\n\r\n// -----------------------------\r\n// Single Sales Log Row\r\n// -----------------------------\r\nconst SalesLogEntry = memo(({ log }) => {\r\n  // Display time safely\r\n  const formattedTime = log.time ?? \"N/A\";\r\n\r\n  return (\r\n    <div className=\"flex justify-between items-center p-4 border-b border-gray-200 last:border-b-0 hover:bg-gray-50 transition-colors\">\r\n      <div className=\"flex flex-col min-w-[50%] pr-4\">\r\n        <span className=\"text-gray-800 font-medium text-base\">{log.date}</span>\r\n        <span className=\"text-gray-500 text-sm\">{log.day}</span>\r\n        <span className=\"text-gray-500 text-sm\">{formattedTime}</span>\r\n      </div>\r\n      <div className=\"flex flex-col items-start\">\r\n        <span className=\"text-gray-800 font-medium mb-1\">\r\n          <span className=\"font-bold text-fuchsia-600\">{log.items}</span> items\r\n        </span>\r\n        <span className=\"text-gray-500 text-sm\">\r\n          Total: <span className=\"text-green-600 font-bold text-lg\">{log.total}</span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nSalesLogEntry.displayName = \"SalesLogEntry\";\r\n\r\n// -----------------------------\r\n// Sales Log Table Component\r\n// -----------------------------\r\nexport const SalesLogTable = ({\r\n  data = [],\r\n  meta = {},\r\n  loading = false,\r\n  loadMoreSalesLogs,\r\n  scrollRef,\r\n  sentinelRef,\r\n  dateFilter = \"\",\r\n}) => {\r\n  // -----------------------------\r\n  // Filter and sort data\r\n  // -----------------------------\r\n  const filteredData = useMemo(() => {\r\n    let logs = data;\r\n\r\n    if (dateFilter) {\r\n      // Filter by date using ISO string (start_time includes full datetime)\r\n      // We only compare the date portion\r\n      logs = logs.filter((log) => log.start_time.startsWith(dateFilter));\r\n    }\r\n\r\n    // Sort descending by full ISO datetime\r\n    // This ensures newest logs appear first\r\n    logs.sort((a, b) => new Date(b.start_time).getTime() - new Date(a.start_time).getTime());\r\n\r\n    return logs;\r\n  }, [data, dateFilter]);\r\n\r\n  // -----------------------------\r\n  // Infinite scroll observer\r\n  // -----------------------------\r\n  useEffect(() => {\r\n    if (!sentinelRef?.current || !loadMoreSalesLogs) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting && !loading && meta.current_page < meta.last_page) {\r\n          loadMoreSalesLogs();\r\n        }\r\n      },\r\n      { root: null, threshold: 0.1 }\r\n    );\r\n\r\n    observer.observe(sentinelRef.current);\r\n    return () => observer.disconnect();\r\n  }, [sentinelRef, loadMoreSalesLogs, loading, meta]);\r\n\r\n  // -----------------------------\r\n  // Empty state\r\n  // -----------------------------\r\n  if (filteredData.length === 0 && !loading) {\r\n    return (\r\n      <div\r\n        ref={scrollRef}\r\n        className=\"flex-1 overflow-y-auto min-h-0 h-[53vh] flex items-center justify-center\"\r\n      >\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-gray-400 text-lg\">No sales logs found</p>\r\n          {dateFilter && (\r\n            <p className=\"text-gray-400 text-sm mt-2\">\r\n              Try selecting a different date\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // -----------------------------\r\n  // Render table\r\n  // -----------------------------\r\n  return (\r\n    <div ref={scrollRef} className=\"flex-1 overflow-y-auto min-h-0 h-[53vh]\">\r\n      {filteredData.map((log, index) => (\r\n        <SalesLogEntry key={log.id ?? `sales-${index}`} log={log} />\r\n      ))}\r\n\r\n      {/* Sentinel for infinite scroll */}\r\n      <div ref={sentinelRef} className=\"h-10\" />\r\n\r\n      {/* Loading indicator */}\r\n      {loading && filteredData.length > 0 && (\r\n        <div className=\"text-center py-4 text-gray-500\">\r\n          <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-fuchsia-600\"></div>\r\n          <p className=\"mt-2 text-sm\">Loading more sales...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* End of results */}\r\n      {!loading && meta?.current_page >= meta?.last_page && filteredData.length > 0 && (\r\n        <div className=\"text-center py-4 text-gray-400 text-sm\">End</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesLogTable;\r\n","import React, { useState } from \"react\";\r\nimport { TimeLogTable } from \"./TimeLogTable\";\r\nimport { SalesLogTable } from \"./SalesLogTable\";\r\n\r\nexport const RecordPanel = ({\r\n  // Time Logs Props\r\n  timeLogs = [],\r\n  timeLogsMeta = {},\r\n  loadingTimeLogs = false,\r\n  loadMoreTimeLogs,\r\n  timeLogsRef,\r\n  sentinelRef,              // âœ… TIME LOGS sentinel ref\r\n  setTimeLogsDateFilter,\r\n\r\n  // Sales Logs Props\r\n  salesLogs = [],\r\n  salesLogsMeta = {},\r\n  loadingSalesLogs = false,\r\n  loadMoreSalesLogs,\r\n  salesLogsRef,\r\n  sentinelRefSales,         // âœ… SALES LOGS sentinel ref\r\n  setSalesLogsDateFilter,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(\"timeLogs\");\r\n  const [dateFilter, setDateFilter] = useState(\"\");\r\n\r\n  // Update the appropriate filter when date changes\r\n  const handleDateChange = (e) => {\r\n    const newDate = e.target.value;\r\n    setDateFilter(newDate);\r\n    \r\n    // Update both filters so switching tabs maintains the selected date\r\n    setTimeLogsDateFilter(newDate);\r\n    setSalesLogsDateFilter(newDate);\r\n  };\r\n\r\n  const tabs = [\r\n    { id: \"timeLogs\", label: \"Time logs\" },\r\n    { id: \"salesLog\", label: \"Sales log\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden h-[68vh]\">\r\n      \r\n      {/* Header with Date Picker */}\r\n      <div className=\"flex justify-between items-center p-4 border-b border-gray-200 flex-none gap-2\">\r\n        <h2 className=\"text-2xl font-semibold text-gray-900\">Records</h2>\r\n\r\n        <input\r\n          type=\"date\"\r\n          value={dateFilter}\r\n          onChange={handleDateChange}\r\n          className=\"border border-gray-300 rounded-lg p-2 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-fuchsia-500\"\r\n        />\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex justify-between border-b border-gray-200 flex-none\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            className={`w-1/2 relative p-4 text-center text-base font-semibold transition-colors ${\r\n              activeTab === tab.id\r\n                ? \"text-fuchsia-700 bg-fuchsia-50\"\r\n                : \"text-gray-500 bg-white hover:bg-gray-50\"\r\n            } focus:outline-none`}\r\n            onClick={() => setActiveTab(tab.id)}\r\n          >\r\n            {tab.label}\r\n            {activeTab === tab.id && (\r\n              <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-fuchsia-700 rounded-t-sm\"></div>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"flex-1 min-h-0 overflow-hidden\">\r\n        {activeTab === \"timeLogs\" && (\r\n          <TimeLogTable\r\n            data={timeLogs}\r\n            loading={loadingTimeLogs}\r\n            loadMoreTimeLogs={loadMoreTimeLogs}\r\n            meta={timeLogsMeta}\r\n            scrollRef={timeLogsRef}\r\n            sentinelRef={sentinelRef}        // âœ… FIXED: Pass time logs sentinel\r\n            dateFilter={dateFilter}\r\n          />\r\n        )}\r\n\r\n        {activeTab === \"salesLog\" && (\r\n          <SalesLogTable\r\n            data={salesLogs}\r\n            loading={loadingSalesLogs}\r\n            loadMoreSalesLogs={loadMoreSalesLogs}\r\n            meta={salesLogsMeta}\r\n            scrollRef={salesLogsRef}\r\n            sentinelRef={sentinelRefSales}   // âœ… FIXED: Pass sales logs sentinel\r\n            dateFilter={dateFilter}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecordPanel;","import { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport {\r\n  getCashierDashboardData,\r\n  getCashierInventory,\r\n  getCashierTimeLogs,\r\n  getCashierSalesLogs,\r\n} from \"../../../services/dashboardServices\";\r\n\r\nimport useInfiniteScroll from \"../../../hooks/useInfiniteScroll\";\r\n\r\nexport const useCashierDashboard = () => {\r\n  // Dashboard state\r\n  const [dashboardData, setDashboardData] = useState(null);\r\n  const [loadingDashboard, setLoadingDashboard] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Inventory state\r\n  const [inventory, setInventory] = useState([]);\r\n  const [inventoryMeta, setInventoryMeta] = useState({});\r\n  const [loadingInventory, setLoadingInventory] = useState(false);\r\n  const [inventoryPage, setInventoryPage] = useState(1);\r\n  const [inventorySearch, setInventorySearch] = useState(\"\");\r\n  const inventoryRef = useRef(null);\r\n  const inventorySentinelRef = useRef(null);\r\n\r\n  // Time Logs state\r\n  const [timeLogs, setTimeLogs] = useState([]);\r\n  const [timeLogsMeta, setTimeLogsMeta] = useState({});\r\n  const [loadingTimeLogs, setLoadingTimeLogs] = useState(false);\r\n  const [timeLogsPage, setTimeLogsPage] = useState(1);\r\n  const [timeLogsDateFilter, setTimeLogsDateFilter] = useState(\"\");\r\n  const timeLogsRef = useRef(null);\r\n  const timeLogsSentinelRef = useRef(null);\r\n\r\n  // Sales Logs state\r\n  const [salesLogs, setSalesLogs] = useState([]);\r\n  const [salesLogsMeta, setSalesLogsMeta] = useState({});\r\n  const [loadingSalesLogs, setLoadingSalesLogs] = useState(false);\r\n  const [salesLogsPage, setSalesLogsPage] = useState(1);\r\n  const [salesLogsDateFilter, setSalesLogsDateFilter] = useState(\"\");\r\n  const salesLogsRef = useRef(null);\r\n  const salesLogsSentinelRef = useRef(null);\r\n\r\n  // Fetch dashboard data\r\n  const fetchDashboardData = useCallback(async () => {\r\n    try {\r\n      setLoadingDashboard(true);\r\n      const data = await getCashierDashboardData();\r\n      setDashboardData(data);\r\n    } catch (err) {\r\n      setError(err);\r\n    } finally {\r\n      setLoadingDashboard(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch inventory\r\n  const fetchInventory = useCallback(async (page, search = \"\") => {\r\n    setLoadingInventory(true);\r\n    try {\r\n      const res = await getCashierInventory(page, search);\r\n      setInventory((prev) => (page === 1 ? res.data : [...prev, ...res.data]));\r\n      setInventoryMeta(res.meta);\r\n    } catch (err) {\r\n      setError(err);\r\n    } finally {\r\n      setLoadingInventory(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch time logs\r\n  const fetchTimeLogs = useCallback(async (page, date = \"\") => {\r\n    setLoadingTimeLogs(true);\r\n    try {\r\n      const res = await getCashierTimeLogs(page, date);\r\n      setTimeLogs((prev) => (page === 1 ? res.data : [...prev, ...res.data]));\r\n      setTimeLogsMeta(res.meta);\r\n    } catch (err) {\r\n      setError(err);\r\n    } finally {\r\n      setLoadingTimeLogs(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch sales logs\r\n  const fetchSalesLogs = useCallback(async (page, date = \"\") => {\r\n    setLoadingSalesLogs(true);\r\n    try {\r\n      const res = await getCashierSalesLogs(page, date);\r\n      setSalesLogs((prev) => (page === 1 ? res.data : [...prev, ...res.data]));\r\n      setSalesLogsMeta(res.meta);\r\n    } catch (err) {\r\n      setError(err);\r\n    } finally {\r\n      setLoadingSalesLogs(false);\r\n    }\r\n  }, []);\r\n\r\n  // Load more handlers\r\n  const loadMoreInventory = useCallback(() => {\r\n    if (inventoryMeta?.current_page < inventoryMeta?.last_page) {\r\n      setInventoryPage((prev) => prev + 1);\r\n    }\r\n  }, [inventoryMeta]);\r\n\r\n  const loadMoreTimeLogs = useCallback(() => {\r\n    if (timeLogsMeta?.current_page < timeLogsMeta?.last_page) {\r\n      setTimeLogsPage((prev) => prev + 1);\r\n    }\r\n  }, [timeLogsMeta]);\r\n\r\n  const loadMoreSalesLogs = useCallback(() => {\r\n    if (salesLogsMeta?.current_page < salesLogsMeta?.last_page) {\r\n      setSalesLogsPage((prev) => prev + 1);\r\n    }\r\n  }, [salesLogsMeta]);\r\n\r\n  // Infinite scroll setup\r\n  useInfiniteScroll(\r\n    inventorySentinelRef,\r\n    loadMoreInventory,\r\n    inventoryPage < (inventoryMeta?.last_page || 0),\r\n    loadingInventory,\r\n    inventoryRef\r\n  );\r\n\r\n  useInfiniteScroll(\r\n    timeLogsSentinelRef,\r\n    loadMoreTimeLogs,\r\n    timeLogsPage < (timeLogsMeta?.last_page || 0),\r\n    loadingTimeLogs,\r\n    timeLogsRef\r\n  );\r\n\r\n  useInfiniteScroll(\r\n    salesLogsSentinelRef,\r\n    loadMoreSalesLogs,\r\n    salesLogsPage < (salesLogsMeta?.last_page || 0),\r\n    loadingSalesLogs,\r\n    salesLogsRef\r\n  );\r\n\r\n  // Initial dashboard data fetch\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, [fetchDashboardData]);\r\n\r\n  // Inventory effects\r\n  useEffect(() => {\r\n    setInventoryPage(1);\r\n    setInventory([]);\r\n    fetchInventory(1, inventorySearch);\r\n  }, [inventorySearch, fetchInventory]);\r\n\r\n  useEffect(() => {\r\n    if (inventoryPage > 1) {\r\n      fetchInventory(inventoryPage, inventorySearch);\r\n    }\r\n  }, [inventoryPage]); // Intentionally minimal deps to prevent loops\r\n\r\n  // Time logs effects\r\n  useEffect(() => {\r\n    setTimeLogsPage(1);\r\n    setTimeLogs([]);\r\n    fetchTimeLogs(1, timeLogsDateFilter);\r\n  }, [timeLogsDateFilter, fetchTimeLogs]);\r\n\r\n  useEffect(() => {\r\n    if (timeLogsPage > 1) {\r\n      fetchTimeLogs(timeLogsPage, timeLogsDateFilter);\r\n    }\r\n  }, [timeLogsPage]); // Intentionally minimal deps\r\n\r\n  // Sales logs effects\r\n  useEffect(() => {\r\n    setSalesLogsPage(1);\r\n    setSalesLogs([]);\r\n    fetchSalesLogs(1, salesLogsDateFilter);\r\n  }, [salesLogsDateFilter, fetchSalesLogs]);\r\n\r\n  useEffect(() => {\r\n    if (salesLogsPage > 1) {\r\n      fetchSalesLogs(salesLogsPage, salesLogsDateFilter);\r\n    }\r\n  }, [salesLogsPage]); // Intentionally minimal deps\r\n\r\n  return {\r\n    dashboardData,\r\n    loadingDashboard,\r\n    error,\r\n    inventory,\r\n    inventoryMeta,\r\n    loadingInventory,\r\n    inventoryRef,\r\n    inventorySentinelRef,\r\n    loadMoreInventory,\r\n    inventorySearch,\r\n    setInventorySearch,\r\n    \r\n    timeLogs,\r\n    timeLogsMeta,\r\n    loadingTimeLogs,\r\n    timeLogsRef,\r\n    timeLogsSentinelRef,\r\n    loadMoreTimeLogs,\r\n    timeLogsDateFilter,\r\n    setTimeLogsDateFilter,\r\n\r\n    salesLogs,\r\n    salesLogsMeta,\r\n    loadingSalesLogs,\r\n    salesLogsRef,\r\n    salesLogsSentinelRef,\r\n    loadMoreSalesLogs,\r\n    salesLogsDateFilter,\r\n    setSalesLogsDateFilter,\r\n  };\r\n};","// ===== FILE: CashierDashboard.jsx =====\r\nimport React, { memo } from \"react\";\r\nimport StatCard from \"../StatCard\";\r\nimport { InventoryTable } from \"./InventoryTable\";\r\nimport RecordPanel from \"./RecordPanel\";\r\nimport { useCashierDashboard } from \"./useCashierDashboardHandler\";\r\n\r\n// Helper to format hours nicely\r\nconst formatHours = (hours) => {\r\n  if (hours == null) return \"0h\"; // handle null or undefined\r\n  const totalMinutes = Math.round(Math.abs(hours) * 60); // convert negative to positive\r\n  const h = Math.floor(totalMinutes / 60);\r\n  const m = totalMinutes % 60;\r\n\r\n  return m > 0 ? `${h}h ${m}m` : `${h}h`;\r\n};\r\n\r\n// ==============================\r\n// Main Dashboard Component\r\n// ==============================\r\nfunction CashierDashboard() {\r\n  const {\r\n    dashboardData,\r\n    loadingDashboard,\r\n    error,\r\n    inventory,\r\n    inventoryMeta,\r\n    loadingInventory,\r\n    loadMoreInventory,\r\n    inventoryRef,        // âœ… scroll container ref for InventoryTable\r\n    inventorySentinelRef, // âœ… sentinel ref for inventory infinite scroll\r\n    inventorySearch,\r\n    setInventorySearch,\r\n    timeLogs,\r\n    timeLogsMeta,\r\n    loadingTimeLogs,\r\n    loadMoreTimeLogs,\r\n    timeLogsRef,\r\n    timeLogsSentinelRef, // âœ… sentinel ref for timeLogs infinite scroll\r\n    setTimeLogsDateFilter,\r\n    salesLogs,\r\n    salesLogsMeta,\r\n    loadingSalesLogs,\r\n    loadMoreSalesLogs,\r\n    salesLogsRef,\r\n    salesLogsSentinelRef, // âœ… sentinel ref for salesLogs infinite scroll\r\n    setSalesLogsDateFilter,\r\n  } = useCashierDashboard();\r\n\r\n  console.log(dashboardData)\r\n\r\n  // âœ… Early returns for loading and error states\r\n  if (loadingDashboard) return <div>Loading dashboard...</div>;\r\n  if (error) return <div>Error: {error?.message}</div>;\r\n  if (!dashboardData || !dashboardData.data) return <div>No dashboard data</div>;\r\n\r\n  // ==============================\r\n  // Prepare stat cards safely\r\n  // ==============================\r\n  const stats = [\r\n    {\r\n      key: \"totalSales\",\r\n      value: `â‚± ${dashboardData.data.total_sales?.current?.toLocaleString() || 0}`,\r\n      percentageChange: Math.abs(parseFloat(dashboardData.data.total_sales?.change_percentage) || 0),\r\n      isIncrease: !dashboardData.data.total_sales?.change_percentage?.includes(\"-\"),\r\n    },\r\n    {\r\n      key: \"totalItems\",\r\n      value: dashboardData.data.total_items_sold?.current || 0,\r\n      percentageChange: Math.abs(parseFloat(dashboardData.data.total_items_sold?.change_percentage) || 0),\r\n      isIncrease: !dashboardData.data.total_items_sold?.change_percentage?.includes(\"-\"),\r\n    },\r\n    {\r\n      key: \"totalTransactions\",\r\n      value: dashboardData.data.total_transactions?.current || 0,\r\n      percentageChange: Math.abs(parseFloat(dashboardData.data.total_transactions?.change_percentage) || 0),\r\n      isIncrease: !dashboardData.data.total_transactions?.change_percentage?.includes(\"-\"),\r\n    },\r\n    {\r\n      key: \"totalLogs\",\r\n      value: formatHours(dashboardData.data.total_logged_hours),\r\n      percentageChange: 0,\r\n      isIncrease: true,\r\n    },\r\n  ];\r\n\r\n  // ==============================\r\n  // Main return rendering\r\n  // ==============================\r\n  return (\r\n    <main className=\"flex flex-col space-y-4 h-full overflow-hidden\">\r\n      {/* ==== Stats Cards ==== */}\r\n      <section className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 flex-none\">\r\n        {stats.map((stat) => (\r\n          <StatCard\r\n            key={stat.key}\r\n            type={stat.key}\r\n            value={stat.value}\r\n            percentageChange={stat.percentageChange}\r\n            isIncrease={stat.isIncrease}\r\n          />\r\n        ))}\r\n      </section>\r\n\r\n      {/* ==== Main Panels ==== */}\r\n      <section className=\"w-full flex flex-col lg:flex-row gap-4 flex-1 min-h-0\">\r\n        <div className=\"w-full lg:w-3/5 flex flex-col min-h-0\">\r\n          <InventoryTable\r\n            data={inventory}                   \r\n            loading={loadingInventory}         \r\n            meta={inventoryMeta}               \r\n            loadMore={loadMoreInventory}       \r\n            scrollRef={inventoryRef}           \r\n            sentinelRef={inventorySentinelRef} // âœ… pass sentinel to child for infinite scroll\r\n            searchTerm={inventorySearch}       \r\n            setSearchTerm={setInventorySearch} \r\n          />\r\n          {/* âœ… Infinite scroll works because IntersectionObserver observes sentinel inside scrollRef */}\r\n        </div>\r\n\r\n        <div className=\"w-full lg:w-2/5 flex flex-col min-h-0\">\r\n          <RecordPanel\r\n            timeLogs={timeLogs}\r\n            timeLogsMeta={timeLogsMeta}\r\n            loadingTimeLogs={loadingTimeLogs}\r\n            loadMoreTimeLogs={loadMoreTimeLogs}         \r\n            scrollRef={timeLogsRef}           \r\n            sentinelRef={timeLogsSentinelRef}  // âœ… attach sentinel for timeLogs\r\n            setTimeLogsDateFilter={setTimeLogsDateFilter}\r\n            \r\n            salesLogs={salesLogs}\r\n            salesLogsMeta={salesLogsMeta}\r\n            loadingSalesLogs={loadingSalesLogs}\r\n            loadMoreSalesLogs={loadMoreSalesLogs} \r\n            salesLogsRef={salesLogsRef}           \r\n            sentinelRefSales={salesLogsSentinelRef} // âœ… attach sentinel for salesLogs\r\n            setSalesLogsDateFilter={setSalesLogsDateFilter}\r\n          />\r\n          {/* âœ… Infinite scroll for both timeLogs and salesLogs handled via sentinels */}\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default memo(CashierDashboard);\r\n\r\n/*\r\nâœ… Key Infinite Scroll Notes:\r\n\r\n1. inventoryRef, timeLogsRef, salesLogsRef provide scrollable container refs for IntersectionObserver root.\r\n2. inventorySentinelRef, timeLogsSentinelRef, salesLogsSentinelRef provide the sentinel element observed at the bottom of the list.\r\n3. loadMoreInventory, loadMoreTimeLogs, loadMoreSalesLogs are callbacks that increment page number and trigger fetchers.\r\n4. Child components (InventoryTable, RecordPanel) render sentinel divs at the end of the list and attach the refs.\r\n5. IntersectionObserver in useInfiniteScroll hook watches sentinel relative to scroll container:\r\n   - triggers loadMore only when sentinel is visible, hasMore is true, and not currently loading.\r\n6. min-h-0 + flex-1 on scrollable divs ensures the container can properly scroll for IntersectionObserver to work.\r\n7. Using memo prevents unnecessary re-renders that could disconnect the observers.\r\n8. All infinite scroll logic is centralized in useCashierDashboard hook; child components only receive data, refs, and handlers.\r\n*/\r\n","// src/components/dashboard/DashboardContent.jsx\r\nimport React from \"react\";\r\nimport ManagerDashboard from \"./manager/ManagerDashboard\";\r\nimport CashierDashboard from \"./cashier/CashierDashboard\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nexport default function DashboardContent() {\r\n  const { user } = useAuth();\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"text-lg text-gray-600\">Please log in to view dashboard</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 h-[91.3vh] overflow-auto\">\r\n      {user.role === \"admin\" ? (\r\n        <ManagerDashboard />\r\n      ) : (\r\n        <CashierDashboard />\r\n      )}\r\n    </div>\r\n\r\n  );\r\n}"],"names":["DollarIcon","jsxs","jsx","BasketIcon","BoxIcon","ReceiptIcon","UserIcon","AlarmIcon","className","StatCard","type","value","percentageChange","isIncrease","percentTextColor","percentBgColor","arrow","current","statusContent","SalesTrendChart","title","data","selectedYear","onYearChange","months","d","numericSales","maxSales","yAxisValues","_","i","e","index","sales","x","y","m","TopSellingProduct","items","maxQuantity","item","barWidthPercentage","barColorClass","NonSellingProductList","forwardRef","selectedDays","onDaysChange","loading","sentinelRef","containerRef","ref","daysOptions","calculateDaysAgo","lastSoldDate","diffTime","daysAgo","StockAlert","loadMore","getStatusBadge","status","stock","useEffect","observer","entry","getManagerDashboardData","year","days","api","getNonSellingProducts","page","getLowStockAlerts","getCashierDashboardData","getCashierInventory","search","getCashierTimeLogs","date","getCashierSalesLogs","useManagerDashboardHandler","setLoading","useState","dashboard","setDashboard","setSelectedDays","nonSellingPage","setNonSellingPage","nonSelling","setNonSelling","hasMoreNonSelling","setHasMoreNonSelling","loadingNonSelling","setLoadingNonSelling","stockPage","setStockPage","stockAlerts","setStockAlerts","hasMoreStock","setHasMoreStock","loadingStock","setLoadingStock","nonSellingRef","useRef","stockRef","nonSellingContainerRef","stockContainerRef","error","res","prev","loadMoreNonSelling","useCallback","loadMoreStock","useInfiniteScroll","ManagerDashboard","handleDaysChange","stats","stat","InventoryRow","memo","handleImageError","c","LoadingSkeleton","InventoryTable","meta","scrollRef","searchTerm","setSearchTerm","sentinel","container","showEmptyState","showLoadingState","col","Fragment","TimeLogEntry","log","duration","setDuration","mounted","intervalId","debug","args","startMs","safeStart","parsed","alt","combined","parsed2","monthName","dayWithComma","day","time","meridian","hour","minute","monthIndex","manualDate","err","maybeIso","parsed3","now","updateDuration","nowInner","diffMs","totalMinutes","hours","minutes","formatted","TimeLogTable","loadMoreTimeLogs","SalesLogEntry","formattedTime","SalesLogTable","loadMoreSalesLogs","dateFilter","filteredData","useMemo","logs","a","b","entries","RecordPanel","timeLogs","timeLogsMeta","loadingTimeLogs","timeLogsRef","setTimeLogsDateFilter","salesLogs","salesLogsMeta","loadingSalesLogs","salesLogsRef","sentinelRefSales","setSalesLogsDateFilter","activeTab","setActiveTab","setDateFilter","handleDateChange","newDate","tabs","tab","useCashierDashboard","dashboardData","setDashboardData","loadingDashboard","setLoadingDashboard","setError","inventory","setInventory","inventoryMeta","setInventoryMeta","loadingInventory","setLoadingInventory","inventoryPage","setInventoryPage","inventorySearch","setInventorySearch","inventoryRef","inventorySentinelRef","setTimeLogs","setTimeLogsMeta","setLoadingTimeLogs","timeLogsPage","setTimeLogsPage","timeLogsDateFilter","timeLogsSentinelRef","setSalesLogs","setSalesLogsMeta","setLoadingSalesLogs","salesLogsPage","setSalesLogsPage","salesLogsDateFilter","salesLogsSentinelRef","fetchDashboardData","fetchInventory","fetchTimeLogs","fetchSalesLogs","loadMoreInventory","formatHours","h","CashierDashboard","CashierDashboard$1","DashboardContent","user","useAuth"],"mappings":"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"}