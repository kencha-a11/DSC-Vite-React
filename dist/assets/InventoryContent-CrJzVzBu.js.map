{"version":3,"file":"InventoryContent-CrJzVzBu.js","sources":["../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryObserver.js","../../node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useMutation.js","../../node_modules/@tanstack/react-query/build/modern/useInfiniteQuery.js","../../src/components/icons/SettingsIcon.jsx","../../src/components/icons/MinusIcon.jsx","../../src/components/icons/UploadIcon.jsx","../../src/components/icons/RemoveIcon.jsx","../../src/components/inventory/InventoryContent/HeaderControl.jsx","../../src/components/inventory/InventoryContent/TableHeader.jsx","../../src/components/common/Modal.jsx","../../src/components/inventory/ProductOperation/EditProduct.jsx","../../src/components/inventory/InventoryContent/ProductTable.jsx","../../src/hooks/useProductsData.js","../../src/services/categoryServices.js","../../src/hooks/useCategoryData.js","../../src/hooks/useClickOutside.js","../../src/components/inventory/InventoryContent/useInventoryHandler.js","../../src/hooks/useProductOperations.js","../../src/components/inventory/ProductOperation/useProductOperationHandler.js","../../src/components/common/DualPanelModal.jsx","../../src/components/common/CategoryConfirmModal.jsx","../../src/components/modals/CreateCategoryModal/CategoryNameInput.jsx","../../src/components/modals/CreateCategoryModal/ProductSearchFilter.jsx","../../src/components/modals/CreateCategoryModal/AvailableProductList.jsx","../../src/components/modals/CreateCategoryModal/ProductSearchPanel.jsx","../../src/components/modals/CreateCategoryModal/SelectedProductsList.jsx","../../src/components/modals/CreateCategoryModal/CreateCategoryModal.jsx","../../src/components/modals/CreateProductModal/useCreateProductForm.js","../../src/components/modals/CreateProductModal/CreateProductModal.jsx","../../src/components/modals/CreateProductModal/ImageUpload.jsx","../../src/components/modals/CreateProductModal/ProductNameInput.jsx","../../src/components/modals/CreateProductModal/PriceInput.jsx","../../src/components/modals/CreateProductModal/CategorySelector.jsx","../../src/components/modals/CreateProductModal/QuantityInput.jsx","../../src/components/modals/CreateProductModal/ThresholdInput.jsx","../../src/hooks/useRemoveProduct.js","../../src/components/modals/RemoveMultipleProductModal/useRemoveMultipleProductsForm.js","../../src/components/modals/RemoveMultipleProductModal/RemoveMultipleProductsModal.jsx","../../src/hooks/useRemoveCategories.js","../../src/components/modals/RemoveMultipleCategoriesModal/useRemoveMultipleCategoriesForm.js","../../src/components/modals/RemoveMultipleCategoriesModal/RemoveMultipleCategoriesModal.jsx","../../src/components/inventory/ProductOperation/RestockProduct.jsx","../../src/components/inventory/ProductOperation/DeductProduct.jsx","../../src/components/inventory/ProductOperation/RemoveProduct.jsx","../../src/components/inventory/InventoryContent.jsx"],"sourcesContent":["// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\") {\n          this.trackProp(\"data\");\n          if (!this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n            this.#currentThenable.reject(\n              new Error(\n                \"experimental_prefetchInRender feature flag is not enabled\"\n              )\n            );\n          }\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/infiniteQueryObserver.ts\nimport { QueryObserver } from \"./queryObserver.js\";\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n} from \"./infiniteQueryBehavior.js\";\nvar InfiniteQueryObserver = class extends QueryObserver {\n  constructor(client, options) {\n    super(client, options);\n  }\n  bindMethods() {\n    super.bindMethods();\n    this.fetchNextPage = this.fetchNextPage.bind(this);\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this);\n  }\n  setOptions(options) {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior()\n    });\n  }\n  getOptimisticResult(options) {\n    options.behavior = infiniteQueryBehavior();\n    return super.getOptimisticResult(options);\n  }\n  fetchNextPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"forward\" }\n      }\n    });\n  }\n  fetchPreviousPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"backward\" }\n      }\n    });\n  }\n  createResult(query, options) {\n    const { state } = query;\n    const parentResult = super.createResult(query, options);\n    const { isFetching, isRefetching, isError, isRefetchError } = parentResult;\n    const fetchDirection = state.fetchMeta?.fetchMore?.direction;\n    const isFetchNextPageError = isError && fetchDirection === \"forward\";\n    const isFetchingNextPage = isFetching && fetchDirection === \"forward\";\n    const isFetchPreviousPageError = isError && fetchDirection === \"backward\";\n    const isFetchingPreviousPage = isFetching && fetchDirection === \"backward\";\n    const result = {\n      ...parentResult,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(options, state.data),\n      hasPreviousPage: hasPreviousPage(options, state.data),\n      isFetchNextPageError,\n      isFetchingNextPage,\n      isFetchPreviousPageError,\n      isFetchingPreviousPage,\n      isRefetchError: isRefetchError && !isFetchNextPageError && !isFetchPreviousPageError,\n      isRefetching: isRefetching && !isFetchingNextPage && !isFetchingPreviousPage\n    };\n    return result;\n  }\n};\nexport {\n  InfiniteQueryObserver\n};\n//# sourceMappingURL=infiniteQueryObserver.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","\"use client\";\n\n// src/useInfiniteQuery.ts\nimport { InfiniteQueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useInfiniteQuery(options, queryClient) {\n  return useBaseQuery(\n    options,\n    InfiniteQueryObserver,\n    queryClient\n  );\n}\nexport {\n  useInfiniteQuery\n};\n//# sourceMappingURL=useInfiniteQuery.js.map","export const SettingsIcon = ({ className = \"w-5 h-5\", strokeWidth = 2 }) => (\r\n  <svg\r\n    className={className}\r\n    fill=\"currentColor\" // Changed to fill the circles\r\n    stroke=\"none\" // No need for a stroke if we're just drawing filled dots\r\n    viewBox=\"0 0 24 24\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    {/* Top Dot */}\r\n    <circle cx=\"12\" cy=\"5\" r=\"2\" />\r\n    {/* Middle Dot */}\r\n    <circle cx=\"12\" cy=\"12\" r=\"2\" />\r\n    {/* Bottom Dot */}\r\n    <circle cx=\"12\" cy=\"19\" r=\"2\" />\r\n  </svg>\r\n);\r\n","export const MinusIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n    <path\r\n      d=\"M5 12h14\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"1.5\"\r\n      strokeLinecap=\"round\"\r\n    />\r\n  </svg>\r\n);","export const UploadIcon = () => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    fill=\"none\"\r\n    viewBox=\"0 0 24 24\"\r\n    strokeWidth={1.5}\r\n    stroke=\"currentColor\"\r\n    className=\"w-8 h-8 mb-2\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5\"\r\n    />\r\n  </svg>\r\n);","export const RemoveIcon = ({ className = \"w-4 h-4\" }) => (\r\n  <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\">\r\n    <path\r\n      d=\"M6 6l12 12M6 18L18 6\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"1.5\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n    />\r\n  </svg>\r\n);\r\n","import React, { useRef, useEffect } from \"react\"; // â¬…ï¸ IMPORT useRef and useEffect\r\nimport { PlusIcon } from \"../../icons/index\";\r\n\r\nexport default function HeaderControls({\r\n  // ayon andito na tayo here makikita nanam natin itong variable na ito\r\n  searchInput, // saan ito ginamit track natin\r\n  setState, // bumalik siya dito kasi nabago yung value - balik tayo sa parent component\r\n  dropdownOpen,\r\n  setDropdownOpen,\r\n}) {\r\n  // 1. Create a ref for the dropdown container\r\n  const dropdownRef = useRef(null);\r\n\r\n  // 2. Add the click-outside logic\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      // If the click is outside the dropdown container AND the dropdown is open\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target) && dropdownOpen) {\r\n        setDropdownOpen(false);\r\n      }\r\n    }\r\n\r\n    // Attach the event listener when the component mounts\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    // Clean up the event listener when the component unmounts\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [dropdownOpen, setDropdownOpen]); // Rerun effect if dropdownOpen state changes\r\n\r\n  return (\r\n    <div className=\"flex items-center p-4 shrink-0 relative\">\r\n      {/* Search */}\r\n      <div className=\"flex-1 relative\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search products\"\r\n          value={searchInput} // \r\n          onChange={(e) => setState(\"searchInput\", e.target.value)} // here dito siya ginamit - sa onchange saan papunta itong onchange or setState\r\n          className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-pink-500\"\r\n        />\r\n      </div>\r\n\r\n      {/* Manage Inventory Dropdown */}\r\n      {/* 3. Attach the ref to the main dropdown container */}\r\n      <div className=\"ml-4 relative\" ref={dropdownRef}>\r\n        <button\r\n          onClick={() => setDropdownOpen(!dropdownOpen)}\r\n          className=\"bg-blue-800 text-white px-4 py-2 rounded-lg hover:bg-blue-950 flex items-center gap-1\"\r\n        >\r\n          Manage Inventory\r\n          <PlusIcon className=\"w-4 h-4\" />\r\n        </button>\r\n\r\n        {dropdownOpen && (\r\n          <div className=\"absolute right-0 mt-2 w-44 bg-white border rounded shadow-lg z-10\">\r\n            {[\r\n              { label: \"+ Products\", action: \"showCreateProduct\" },\r\n              { label: \"+ Category\", action: \"showCreateCategory\" },\r\n              { label: \"- Category\", action: \"showRemoveCategory\" },\r\n              { label: \"- Products\", action: \"showRemoveProducts\" },\r\n            ].map(({ label, action }) => (\r\n              <button\r\n                key={label}\r\n                className=\"w-full text-left px-4 py-2 hover:bg-gray-100\"\r\n                onClick={() => {\r\n                  setState(action, true);\r\n                  setDropdownOpen(false); // â¬…ï¸ OPTIONAL: Close dropdown on menu item click\r\n                }}\r\n              >\r\n                {label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","export default function TableHeader({ selectedCategory, statusFilter, setState, categories }) {\r\n  return (\r\n    <div className=\"border-y border-gray-200 bg-gray-100 py-3 select-none\">\r\n      <div className=\"grid grid-cols-[80px_2fr_120px_1fr_1.5fr_1fr_80px] items-center text-gray-600 font-medium text-sm px-8\">\r\n        <div>Image</div>\r\n        <div>Product Name</div>\r\n        <div>Price</div>\r\n        <div>Quantity</div>\r\n\r\n        {/* Category Dropdown */}\r\n        <select\r\n          value={selectedCategory}\r\n          onChange={(e) => setState(\"selectedCategory\", e.target.value)}\r\n          className=\"border rounded px-2 py-1 text-sm bg-white mr-2\"\r\n        >\r\n          {categories.map((c) => (\r\n            <option key={c.id} value={c.category_name}>\r\n              {c.category_name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        {/* Status Dropdown */}\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => {\r\n            // ðŸ’¡ Convert to lowercase to match backend exactly\r\n            const value = e.target.value.toLowerCase();\r\n            console.log(\"Status selected:\", value); // Debug\r\n            setState(\"statusFilter\", value);\r\n          }}\r\n          className=\"border rounded px-2 py-1 text-sm bg-white\"\r\n        >\r\n          <option value=\"\">Status</option>\r\n          {/* ðŸ’¡ These must match backend status strings exactly */}\r\n          {[\"stock\", \"low stock\", \"out of stock\"].map((s) => (\r\n            <option key={s} value={s.toLowerCase()}>\r\n              {s}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n\r\n        <div className=\"text-right\">Actions</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export default function Modal({ isOpen, onClose, title, children, maxWidth = \"2xl\" }) {\r\n  if (!isOpen) return null;\r\n\r\n  const maxWidthClasses = {\r\n    sm: \"max-w-sm\",\r\n    md: \"max-w-md\",\r\n    lg: \"max-w-lg\",\r\n    xl: \"max-w-xl\",\r\n    \"2xl\": \"max-w-2xl\",\r\n    \"4xl\": \"max-w-4xl\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center px-4\">\r\n      {/* Overlay: LOWER z-index */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/50 z-40\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Modal Content: HIGHER z-index */}\r\n      <div\r\n        className={`relative z-50 w-[112vh]  h-[58vh] ${maxWidthClasses[maxWidth]} bg-white shadow-xl border-2 border-purple-500 rounded-lg max-h-[90vh] overflow-y-auto`}\r\n      >\r\n        {/* Header */}\r\n        {title && (\r\n          <div className=\"border-b border-gray-200 p-4\">\r\n            <h2 className=\"text-xl font-bold text-gray-900\">{title}</h2>\r\n          </div>\r\n        )}\r\n\r\n        {/* Body */}\r\n        <div className=\"\">{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Modal from \"../../common/Modal\";\r\n\r\nexport function EditProduct({ product, categories, isOpen, onClose, onSuccess }) {\r\n  const [formData, setFormData] = useState({\r\n    name: product?.name || \"\",\r\n    category_ids: product?.categories?.map(c => c.id) || [],\r\n    price: product?.price || \"\",\r\n    low_stock_threshold: product?.low_stock_threshold || 10,\r\n    image: null,\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [previewUrl, setPreviewUrl] = useState(product?.image_url || \"\");\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && product) {\r\n      setFormData({\r\n        name: product.name,\r\n        category_ids: product.categories?.map(c => c.id) || [],\r\n        price: product.price,\r\n        low_stock_threshold: product.low_stock_threshold || 10,\r\n        image: null,\r\n      });\r\n      setPreviewUrl(product.image_url || \"\");\r\n    }\r\n  }, [isOpen, product]);\r\n\r\n  // Close dropdown if clicked outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\r\n        setDropdownOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setFormData(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setFormData(prev => ({ ...prev, image: file }));\r\n      setPreviewUrl(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleCategorySelect = (id) => {\r\n    if (!formData.category_ids.includes(id)) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        category_ids: [...prev.category_ids, id],\r\n      }));\r\n    }\r\n    setDropdownOpen(false);\r\n  };\r\n\r\n  const handleRemoveCategory = (id) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      category_ids: prev.category_ids.filter(cid => cid !== id),\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const data = new FormData();\r\n      data.append(\"name\", formData.name);\r\n      data.append(\"price\", formData.price ?? \"0\");\r\n      data.append(\"low_stock_threshold\", formData.low_stock_threshold ?? \"10\");\r\n      formData.category_ids.forEach((id) => data.append(\"category_ids[]\", id));\r\n      if (formData.image) data.append(\"image_path\", formData.image);\r\n\r\n      await onSuccess(data, product.id);\r\n      onClose(); // close modal after update\r\n    } catch (error) {\r\n      console.error(\"Failed to update product:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedCategories = categories.filter(c => formData.category_ids.includes(c.id));\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Edit Product\" maxWidth=\"2xl\">\r\n      <form onSubmit={handleSubmit}>\r\n        {/* Image */}\r\n        <div className=\"px-4 pt-4\">\r\n          <div className=\"relative cursor-pointer\">\r\n            <img\r\n              src={previewUrl || \"https://via.placeholder.com/400x200\"}\r\n              alt=\"Product Preview\"\r\n              className=\"w-full h-36 object-cover rounded-lg border border-purple-500\"\r\n            />\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleImageChange}\r\n              className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Name */}\r\n        <div className=\"px-4 pt-4\">\r\n          <label className=\"block text-sm font-semibold mb-1\">Item name</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.name}\r\n            onChange={(e) => handleInputChange(\"name\", e.target.value)}\r\n            className=\"w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-600\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        {/* Category Pills + Dropdown */}\r\n        <div className=\"px-4 pt-4 relative\" ref={dropdownRef}>\r\n          <label className=\"block text-sm font-semibold mb-1\">Categories</label>\r\n\r\n          <div\r\n            onClick={() => setDropdownOpen(!dropdownOpen)}\r\n            className=\"border rounded-md px-3 py-2 cursor-pointer flex justify-between items-center bg-white hover:border-purple-500\"\r\n          >\r\n            <span className=\"text-gray-600 text-sm\">\r\n              {dropdownOpen ? \"Select a category...\" : \"Click to add category\"}\r\n            </span>\r\n            <svg\r\n              className={`w-4 h-4 transform transition-transform ${dropdownOpen ? \"rotate-180\" : \"\"}`}\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path d=\"M19 9l-7 7-7-7\" />\r\n            </svg>\r\n          </div>\r\n\r\n{dropdownOpen && (\r\n  <div className=\"absolute z-10 mt-1 w-[95%] bg-white border rounded-md shadow-lg max-h-48 overflow-y-auto\">\r\n    {categories\r\n      ?.filter(\r\n        (c) =>\r\n          c.category_name !== \"All\" &&\r\n          c.category_name !== \"Uncategorized\" &&\r\n          !formData.category_ids.includes(c.id) // ðŸ”¥ exclude already selected\r\n      )\r\n      .map((c) => (\r\n        <div\r\n          key={c.id}\r\n          onClick={() => handleCategorySelect(c.id)}\r\n          className=\"px-3 py-2 hover:bg-purple-100 cursor-pointer text-sm text-gray-700\"\r\n        >\r\n          {c.category_name}\r\n        </div>\r\n      ))}\r\n\r\n    {/* If no more categories left */}\r\n    {categories?.filter(\r\n      (c) =>\r\n        c.category_name !== \"All\" &&\r\n        c.category_name !== \"Uncategorized\" &&\r\n        !formData.category_ids.includes(c.id)\r\n    ).length === 0 && (\r\n      <div className=\"px-3 py-2 text-sm text-gray-400 text-center\">\r\n        All categories selected\r\n      </div>\r\n    )}\r\n  </div>\r\n)}\r\n\r\n\r\n          {/* Selected category pills */}\r\n          {selectedCategories.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mt-3\">\r\n              {selectedCategories.map((c) => (\r\n                <div\r\n                  key={c.id}\r\n                  className=\"flex items-center gap-1 bg-purple-100 text-purple-700  rounded-full text-xs border border-purple-300\"\r\n                >\r\n                  <span>{c.category_name}</span>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleRemoveCategory(c.id)}\r\n                    className=\"text-purple-500 hover:text-purple-700\"\r\n                  >\r\n                    âœ•\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Price & Threshold */}\r\n        <div className=\"grid grid-cols-2 gap-4 px-4 pt-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold mb-1\">Price</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              value={formData.price}\r\n              onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n              className=\"w-full border rounded-md px-3 py-2\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold mb-1\">Low stock threshold</label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.low_stock_threshold}\r\n              onChange={(e) => handleInputChange(\"low_stock_threshold\", e.target.value)}\r\n              className=\"w-full border rounded-md px-3 py-2\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex justify-between gap-2 border-t border-gray-200 mt-4 p-4\">\r\n          <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-200 rounded-md\">\r\n            Cancel\r\n          </button>\r\n          <button type=\"submit\" disabled={loading} className=\"px-5 py-2 bg-purple-600 text-white rounded-md\">\r\n            {loading ? \"Updating...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n","import { useState, useRef, useEffect } from \"react\";\r\nimport { SettingsIcon } from \"../../icons\";\r\nimport { EditProduct } from \"../ProductOperation/EditProduct\";\r\n\r\nexport default function ProductTable({\r\n  productsPages = [],\r\n  categories = [],\r\n  getStatus,\r\n  onRestockProduct,\r\n  onDeductProduct,\r\n  onRemoveProduct,\r\n  onEditProduct, // centralized handler\r\n  loaderRef,\r\n  isFetchingNextPage = false,\r\n}) {\r\n  const [openDropdownId, setOpenDropdownId] = useState(null);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  const products = productsPages.flatMap((page) => page.data || []);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(e) {\r\n      if (\r\n        dropdownRef.current &&\r\n        !dropdownRef.current.contains(e.target) &&\r\n        !e.target.closest(\"#edit-product-modal\")\r\n      ) {\r\n        setOpenDropdownId(null);\r\n      }\r\n    }\r\n\r\n    if (openDropdownId !== null) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, [openDropdownId]);\r\n\r\n  const handleEditProductClick = (product) => {\r\n    setSelectedProduct(product);\r\n    setIsModalOpen(true);\r\n    setOpenDropdownId(null);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setSelectedProduct(null);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  if (!products.length) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-48 text-gray-500\">\r\n        No products available.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex-1 overflow-y-auto divide-y divide-gray-200 text-sm text-gray-700\">\r\n        {products.map((p) => {\r\n          const categoriesList =\r\n            Array.isArray(p.categories) && p.categories.length\r\n              ? p.categories.map((c) => c?.name).filter(Boolean)\r\n              : [\"Uncategorized\"];\r\n\r\n          const visibleCats = categoriesList.slice(0, 2);\r\n          const extraCats = categoriesList.length - visibleCats.length;\r\n\r\n          return (\r\n            <div\r\n              key={p.id}\r\n              className=\"relative grid grid-cols-[80px_2fr_120px_1fr_1.5fr_1fr_80px] items-center px-8 py-2 gap-6 hover:bg-gray-50 transition\"\r\n            >\r\n              {/* Image */}\r\n              <div>\r\n                <img\r\n                  src={p.image || \"/placeholder.png\"}\r\n                  alt={p.name}\r\n                  className=\"w-16 h-16 object-cover rounded\"\r\n                />\r\n              </div>\r\n\r\n              {/* Product Name */}\r\n              <div className=\"font-medium truncate\">{p.name}</div>\r\n\r\n              {/* Price */}\r\n              <div className=\"overflow-hidden\">\r\n                <span className=\"truncate block\">\r\n                  â‚±{Number(p.price ?? 0).toFixed(2)}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Quantity */}\r\n              <div className=\"text-left overflow-hidden\">\r\n                <span className=\"truncate block\">{p.stock_quantity ?? 0}</span>\r\n              </div>\r\n\r\n              {/* Categories */}\r\n              <div className=\"flex flex-wrap gap-1 text-xs\">\r\n                {visibleCats.map((cat, i) => (\r\n                  <span\r\n                    key={i}\r\n                    className={`px-2 py-0.5 rounded-full border ${\r\n                      cat === \"Uncategorized\"\r\n                        ? \"border-gray-300 text-gray-500\"\r\n                        : \"border-blue-300 bg-blue-50 text-blue-600\"\r\n                    }`}\r\n                  >\r\n                    {cat}\r\n                  </span>\r\n                ))}\r\n                {extraCats > 0 && <span className=\"text-gray-400\">+{extraCats} more</span>}\r\n              </div>\r\n\r\n              {/* Status */}\r\n              <div\r\n                className={`capitalize font-medium ml-4 ${\r\n                  getStatus(p) === \"out of stock\"\r\n                    ? \"text-red-500\"\r\n                    : getStatus(p) === \"low stock\"\r\n                    ? \"text-yellow-500\"\r\n                    : \"text-green-600\"\r\n                }`}\r\n              >\r\n                {getStatus(p)}\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"text-right relative\">\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setOpenDropdownId((prev) => (prev === p.id ? null : p.id));\r\n                  }}\r\n                  className=\"p-2 rounded hover:bg-gray-100 transition\"\r\n                >\r\n                  <SettingsIcon />\r\n                </button>\r\n\r\n                {openDropdownId === p.id && (\r\n                  <div\r\n                    ref={dropdownRef}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    className=\"absolute top-0 right-6 mr-2 w-36 bg-white border border-gray-300 rounded-lg shadow-lg z-40\"\r\n                  >\r\n                    <button\r\n                      onClick={() => handleEditProductClick(p)}\r\n                      className=\"block w-full text-left px-4 py-2 hover:bg-gray-100\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setOpenDropdownId(null);\r\n                        onRestockProduct(p);\r\n                      }}\r\n                      className=\"block w-full text-left px-4 py-2 hover:bg-gray-100\"\r\n                    >\r\n                      Restock\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setOpenDropdownId(null);\r\n                        onDeductProduct(p);\r\n                      }}\r\n                      className=\"block w-full text-left px-4 py-2 hover:bg-gray-100\"\r\n                    >\r\n                      Deduct\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setOpenDropdownId(null);\r\n                        onRemoveProduct(p);\r\n                      }}\r\n                      className=\"block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* Infinite scroll trigger */}\r\n        <div ref={loaderRef} className=\"h-8 flex justify-center items-center\">\r\n          {isFetchingNextPage && (\r\n            <div className=\"text-gray-500 text-sm animate-pulse\">\r\n              Loading more products...\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Edit Product Modal */}\r\n      {selectedProduct && (\r\n        <EditProduct\r\n          product={selectedProduct} // âœ… use local selectedProduct\r\n          categories={categories}\r\n          isOpen={isModalOpen} // âœ… modal visibility\r\n          onClose={handleCloseModal}\r\n          onSuccess={(formData, productId) => onEditProduct(selectedProduct, formData)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","// src/hooks/useProductsData.js\r\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\r\nimport { getProductsData } from \"../services/productServices\";\r\n\r\n/**\r\n * Hook for fetching products with infinite scroll, search, category, and status filter\r\n */\r\nexport function useProductsData({ \r\n  search = \"\", \r\n  category = \"All\", \r\n  status = \"\", // âœ… Add status parameter\r\n  perPage = 10 \r\n} = {}) {\r\n  return useInfiniteQuery({\r\n    queryKey: [\"products\", search, category, status], // âœ… Include status in query key\r\n    queryFn: async ({ pageParam = 1 }) => {\r\n      const response = await getProductsData(\r\n        pageParam, \r\n        perPage, \r\n        search, \r\n        category,\r\n        status // âœ… Pass status to API call\r\n      );\r\n      // Return exactly the shape needed\r\n      return {  \r\n        data: response.data ?? [],\r\n        current_page: response.current_page,\r\n        last_page: response.last_page,\r\n        hasMore: response.hasMore,\r\n      };\r\n    },\r\n    getNextPageParam: (lastPage) => lastPage.hasMore ? lastPage.current_page + 1 : undefined,\r\n    keepPreviousData: true,\r\n    staleTime: 1000 * 60,\r\n  });\r\n}","// src/services/categoryServices.js\r\nimport api from \"../api/axios\";\r\n\r\n/** ðŸŸ£ Fetch all categories */\r\nexport async function getCategories() {\r\n  const response = await api.get(\"/categories\");\r\n  return response.data;\r\n}\r\n\r\n/** ðŸŸ£ Create a new category with assigned products */\r\nexport async function createCategory(data) {\r\n  console.log(\"ðŸ“¤ Sending to backend:\", data);\r\n  const response = await api.post(\"/categories\", data);\r\n  return response.data;\r\n}\r\n\r\n/** ðŸŸ£ Remove multiple categories by name */\r\nexport async function removeCategories(categoryNames) {\r\n  const uniqueCategories = [...new Set(categoryNames)]; // Prevent duplicates\r\n  const response = await api.delete(\"/categories/multiple\", {\r\n    data: { categories: uniqueCategories },\r\n  });\r\n  return response.data;\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { getCategories } from \"../services/categoryServices\"; // Adjust path as needed\r\n\r\nexport function useCategoryData() {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchCategories() {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const data = await getCategories();\r\n        setCategories(data.data ?? []); // API returns { data: [...] }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch categories:\", err);\r\n        setError(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  // âœ… Add refetch function\r\n  const refetch = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await getCategories();\r\n      setCategories(data.data ?? []);\r\n    } catch (err) {\r\n      console.error(\"Failed to refetch categories:\", err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    data: categories, // now matches your hook usage\r\n    loading,\r\n    error,\r\n    refetch,\r\n  };\r\n}\r\n","// components/hooks/useClickOutside.js\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function useClickOutside(ref, callback) {\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (ref?.current && !ref.current.contains(e.target)) {\r\n        callback?.(e);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, [ref, callback]);\r\n}\r\n","// components/InventoryContent/useInventoryHandlers.js\r\nimport { useState, useRef, useMemo } from \"react\";\r\nimport { useProductsData } from \"../../../hooks/useProductsData\";\r\nimport { useCategoryData } from \"../../../hooks/useCategoryData\";\r\nimport useDebounce from \"../../../hooks/useDebounce\";\r\nimport useInfiniteScroll from \"../../../hooks/useInfiniteScroll\";\r\nimport useClickOutside from \"../../../hooks/useClickOutside\";\r\n\r\nexport function useInventoryHandler() {\r\n  // =========================\r\n  // Filters and state\r\n  // =========================\r\n  const [searchInput, setSearchInput] = useState(\"\");          // Search input\r\n  const debouncedSearch = useDebounce(searchInput, 400);       // Debounced search\r\n  const [statusFilter, setStatusFilter] = useState(\"\");        // Status filter: \"stock\", \"low stock\", \"out of stock\"\r\n  const [selectedCategory, setSelectedCategory] = useState(0); // 0 = All categories\r\n\r\n  // =========================\r\n  // Dropdowns and modals\r\n  // =========================\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n  const [showCreateCategory, setShowCreateCategory] = useState(false);\r\n  const [showCreateProduct, setShowCreateProduct] = useState(false);\r\n  const [showRemoveCategory, setShowRemoveCategory] = useState(false);\r\n  const [showRemoveProducts, setShowRemoveProducts] = useState(false);\r\n  const [editProduct, setEditProduct] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const [restockProduct, setRestockProduct] = useState(null);\r\n  const [deductProduct, setDeductProduct] = useState(null);\r\n  const [removeProduct, setRemoveProduct] = useState(null);\r\n\r\n  // =========================\r\n  // Refs for dropdowns/modals\r\n  // =========================\r\n  const dropdownRef = useRef(null);\r\n  const createCategoryRef = useRef(null);\r\n  const createProductRef = useRef(null);\r\n  const removeCategoryRef = useRef(null);\r\n  const removeProductsRef = useRef(null);\r\n  const loaderRef = useRef(null);\r\n\r\n  // =========================\r\n  // Click outside for modals/dropdowns\r\n  // =========================\r\n  useClickOutside(createCategoryRef, () => showCreateCategory && setShowCreateCategory(false));\r\n  useClickOutside(createProductRef, () => showCreateProduct && setShowCreateProduct(false));\r\n  useClickOutside(removeCategoryRef, () => showRemoveCategory && setShowRemoveCategory(false));\r\n  useClickOutside(removeProductsRef, () => showRemoveProducts && setShowRemoveProducts(false));\r\n\r\n  // =========================\r\n  // Categories\r\n  // =========================\r\n  const { data: categoriesData = [], refetch: refetchCategories } = useCategoryData();\r\n\r\n  const categories = useMemo(() => {\r\n    const hasAll = categoriesData.some(c => c.category_name?.toLowerCase() === \"all\");\r\n    const hasUncategorized = categoriesData.some(c => c.category_name?.toLowerCase() === \"uncategorized\");\r\n\r\n    let result = categoriesData;\r\n\r\n    // Always include \"All\" category\r\n    if (!hasAll) result = [{ id: 0, category_name: \"All\" }, ...result];\r\n\r\n    // Always include \"Uncategorized\" category\r\n    if (!hasUncategorized) result = [...result, { id: -1, category_name: \"Uncategorized\" }];\r\n\r\n    return result;\r\n  }, [categoriesData]);\r\n\r\n  // =========================\r\n  // Normalize selectedCategory for backend\r\n  // =========================\r\n  const categoryValue = useMemo(() => {\r\n    if (selectedCategory === 0) return \"\";          // All categories\r\n    if (selectedCategory === -1) return \"uncategorized\"; // Uncategorized\r\n    return selectedCategory;                        // Category ID\r\n  }, [selectedCategory]);\r\n\r\n  // =========================\r\n  // Products API\r\n  // =========================\r\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, refetch } = useProductsData({\r\n    search: debouncedSearch,\r\n    category: categoryValue,\r\n    status: statusFilter.toLowerCase(), // ðŸ’¡ ensure lowercase for backend matching\r\n    perPage: 10,\r\n  });\r\n\r\n  const filteredPages = data?.pages ?? [];\r\n\r\n  // =========================\r\n  // Infinite scroll\r\n  // =========================\r\n  useInfiniteScroll(loaderRef, fetchNextPage, hasNextPage, isFetchingNextPage);\r\n\r\n  // =========================\r\n  // Status calculation for frontend display\r\n  // =========================\r\n  const getStatus = (p) => {\r\n    const stock = p.stock_quantity ?? 0;\r\n    const threshold = p.low_stock_threshold ?? 10;\r\n    // Return correct status string\r\n    return stock === 0 ? \"out of stock\" : stock <= threshold ? \"low stock\" : \"stock\";\r\n  };\r\n\r\n  // =========================\r\n  // Universal setter\r\n  // =========================\r\n  const set = (key, value) => {\r\n    const setters = {\r\n      searchInput: setSearchInput,\r\n      statusFilter: setStatusFilter,\r\n      selectedCategory: setSelectedCategory,\r\n      dropdownOpen: setDropdownOpen,\r\n      showCreateCategory: setShowCreateCategory,\r\n      showCreateProduct: setShowCreateProduct,\r\n      showRemoveCategory: setShowRemoveCategory,\r\n      showRemoveProducts: setShowRemoveProducts,\r\n      editProduct: setEditProduct,\r\n      message: setMessage,\r\n    };\r\n    if (setters[key]) setters[key](value);\r\n    else console.warn(`âš ï¸ Unknown state key: \"${key}\"`);\r\n  };\r\n\r\n  return {\r\n    state: {\r\n      searchInput,\r\n      statusFilter,\r\n      selectedCategory,\r\n      dropdownOpen,\r\n      showCreateCategory,\r\n      showCreateProduct,\r\n      showRemoveCategory,\r\n      showRemoveProducts,\r\n      editProduct,\r\n      restockProduct,\r\n      deductProduct,\r\n      removeProduct,\r\n    },\r\n    setState: {\r\n      setSearchInput,\r\n      setStatusFilter,\r\n      setSelectedCategory,\r\n      setDropdownOpen,\r\n      setShowCreateCategory,\r\n      setShowCreateProduct,\r\n      setShowRemoveCategory,\r\n      setShowRemoveProducts,\r\n      setEditProduct,\r\n      setMessage,\r\n      setRestockProduct,\r\n      setDeductProduct,\r\n      setRemoveProduct,\r\n      set,\r\n    },\r\n    handlers: { getStatus, isFetchingNextPage, setEditProduct },\r\n    filteredPages,\r\n    categories,\r\n    loaderRef,\r\n    message,\r\n    refetch,\r\n    refetchCategories,\r\n    refs: {\r\n      dropdownRef,\r\n      createCategoryRef,\r\n      createProductRef,\r\n      removeCategoryRef,\r\n      removeProductsRef,\r\n    },\r\n  };\r\n}\r\n","import { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { \r\n  updateProduct, \r\n  deleteProduct, \r\n  restockProduct, \r\n  deductProduct \r\n} from \"../services/productServices\";\r\n\r\n/**\r\n * Hook for updating a product\r\n */\r\nexport function useUpdateProduct() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, formData }) => updateProduct(id, formData),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"products\"]);\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for deleting a product\r\n */\r\nexport function useDeleteProduct() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (id) => deleteProduct(id),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"products\"]);\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for restocking a product\r\n */\r\nexport function useRestockProduct() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, quantity }) => restockProduct(id, { quantity }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"products\"]);\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for deducting stock from a product\r\n */\r\nexport function useDeductProduct() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, quantity, reason }) => deductProduct(id, { quantity, reason }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"products\"]);\r\n    },\r\n  });\r\n}","import { \r\n  useUpdateProduct, \r\n  useDeleteProduct, \r\n  useRestockProduct, \r\n  useDeductProduct \r\n} from \"../../../hooks/useProductOperations\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\n\r\n/**\r\n * Centralized handler for all product operations\r\n * Ensures products list refetches correctly after each action\r\n */\r\nexport function useProductOperationHandler({ setState, setMessage }) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const updateProductMutation = useUpdateProduct();\r\n  const deleteProductMutation = useDeleteProduct();\r\n  const restockProductMutation = useRestockProduct();\r\n  const deductProductMutation = useDeductProduct();\r\n\r\n  // ðŸ”„ Force full product list refresh\r\n  const refreshProducts = () => {\r\n    queryClient.removeQueries({ queryKey: [\"products\"], exact: false });\r\n    queryClient.invalidateQueries({ queryKey: [\"products\"], exact: false });\r\n  };\r\n\r\n  /**\r\n   * ðŸ§© Handle Edit Product\r\n   * Supports FormData from EditProduct modal\r\n   */\r\n  const handleEditProduct = async (productId, formData) => {\r\n    try {\r\n      await updateProductMutation.mutateAsync({ id: productId, formData });\r\n      setState?.setEditProduct?.(null);\r\n      setMessage?.({ type: \"success\", text: \"Product updated successfully!\" });\r\n      refreshProducts(); // âœ… force full refetch\r\n    } catch (error) {\r\n      console.error(\"âŒ Edit product error:\", error);\r\n      setMessage?.({ \r\n        type: \"error\", \r\n        text: error.response?.data?.message || \"Failed to update product\" \r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ðŸ“¦ Handle Restock Product\r\n   */\r\n  const handleRestockProduct = async (productId, quantity) => {\r\n    try {\r\n      await restockProductMutation.mutateAsync({ id: productId, quantity });\r\n      setState?.setRestockProduct?.(null);\r\n      setMessage?.({ type: \"success\", text: \"Product restocked successfully!\" });\r\n      refreshProducts();\r\n    } catch (error) {\r\n      console.error(\"âŒ Restock product error:\", error);\r\n      setMessage?.({ \r\n        type: \"error\", \r\n        text: error.response?.data?.message || \"Failed to restock product\" \r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * âž– Handle Deduct Product\r\n   */\r\n  const handleDeductProduct = async (productId, quantity, reason) => {\r\n    try {\r\n      await deductProductMutation.mutateAsync({ id: productId, quantity, reason });\r\n      setState?.setDeductProduct?.(null);\r\n      setMessage?.({ type: \"success\", text: \"Stock deducted successfully!\" });\r\n      refreshProducts();\r\n    } catch (error) {\r\n      console.error(\"âŒ Deduct product error:\", error);\r\n      setMessage?.({ \r\n        type: \"error\", \r\n        text: error.response?.data?.message || \"Failed to deduct stock\" \r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ðŸ—‘ï¸ Handle Remove Product\r\n   */\r\n  const handleRemoveProduct = async (productId) => {\r\n    try {\r\n      await deleteProductMutation.mutateAsync(productId);\r\n      setState?.setRemoveProduct?.(null);\r\n      setMessage?.({ type: \"success\", text: \"Product removed successfully!\" });\r\n      refreshProducts();\r\n    } catch (error) {\r\n      console.error(\"âŒ Remove product error:\", error);\r\n      setMessage?.({ \r\n        type: \"error\", \r\n        text: error.response?.data?.message || \"Failed to remove product\" \r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return {\r\n    handleEditProduct,\r\n    handleRestockProduct,\r\n    handleDeductProduct,\r\n    handleRemoveProduct,\r\n    isLoading: {\r\n      edit: updateProductMutation.isPending,\r\n      restock: restockProductMutation.isPending,\r\n      deduct: deductProductMutation.isPending,\r\n      remove: deleteProductMutation.isPending,\r\n    },\r\n  };\r\n}\r\n","import React, { useEffect } from \"react\";\r\n\r\nexport default function DualPanelModal({ isOpen, onClose, topPanel, leftPanel, rightPanel }) {\r\n  useEffect(() => {\r\n    if (isOpen) document.body.style.overflow = \"hidden\";\r\n    return () => { document.body.style.overflow = \"auto\"; };\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e) => { if (e.key === \"Escape\") onClose?.(); };\r\n    if (isOpen) document.addEventListener(\"keydown\", handleEscape);\r\n    return () => document.removeEventListener(\"keydown\", handleEscape);\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\r\n\r\n      <div\r\n        className=\"relative bg-white w-[112vh]  h-[58vh] shadow-lg flex flex-col overflow-hidden border-2 rounded-xl border-purple-500\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Top Panel */}\r\n        {topPanel && (\r\n          <div className=\"p-4 border-b border-gray-200 min-h-[60px]\">\r\n            {topPanel}\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Content - Two Panels */}\r\n        <div className=\"flex flex-1 overflow-hidden\">\r\n          {/* Left Panel */}\r\n          {leftPanel && (\r\n            <div className=\"w-1/2 flex flex-col border-r border-gray-200 overflow-y-auto\">\r\n              {leftPanel}\r\n            </div>\r\n          )}\r\n\r\n          {/* Right Panel */}\r\n          {rightPanel && (\r\n            <div className=\"w-1/2 flex flex-col overflow-y-auto\">\r\n              {rightPanel}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useRef } from \"react\";\r\nimport useClickOutside from \"../../hooks/useClickOutside\";\r\n\r\nexport default function CategoryConfirmModal({\r\n  title = \"\",\r\n  message = \"\",\r\n  items = [],\r\n  confirmLabel = \"Confirm\",\r\n  cancelLabel = \"Cancel\",\r\n  products = [],\r\n  onConfirm,\r\n  onClose, // use this consistently\r\n  isLoading = false,\r\n}) {\r\n  const modalRef = useRef(null); // always internal ref\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = \"hidden\";\r\n    return () => (document.body.style.overflow = \"auto\");\r\n  }, []);\r\n\r\n  useClickOutside(modalRef, () => {\r\n    if (!isLoading) onClose?.();\r\n  });\r\n\r\n  const stopPropagation = (e) => e.stopPropagation();\r\n\r\n  const displayList = items.length > 0 ? items : products.map((p) => p.name || p.category_name);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-60 flex items-center justify-center\" role=\"dialog\" aria-modal=\"true\">\r\n      <div className=\"fixed inset-0 bg-black/60\" aria-hidden=\"true\" />\r\n      <div\r\n        ref={modalRef}\r\n        onClick={stopPropagation}\r\n        className=\"relative h-[58vh] bg-white border-2 border-purple-500 rounded-lg shadow-xl z-10 w-full max-w-md mx-4 flex flex-col\"\r\n      >\r\n        <div className=\"p-4 border-b border-gray-200 shrink-0\">\r\n          <h2 className=\"text-lg font-semibold text-black\">{title}</h2>\r\n        </div>\r\n        <p className=\"pt-4 px-4 text-red-500\">{message}</p>\r\n\r\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\r\n          {displayList.length > 0 ? (\r\n            displayList.map((name, index) => (\r\n              <div key={index} className=\"border-2 border-purple-500 rounded-lg p-4 bg-white flex items-center\">\r\n                <span className=\"text-gray-800 text-sm truncate\">{name}</span>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p className=\"text-gray-500 text-center text-sm py-4\">No items selected</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-between gap-3 p-4 border-t border-gray-200 shrink-0\">\r\n          <button\r\n            onClick={() => onClose?.()}\r\n            disabled={isLoading}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg bg-gray-200 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {cancelLabel}\r\n          </button>\r\n          <button\r\n            onClick={onConfirm}\r\n            disabled={isLoading}\r\n            className={`px-4 py-2 rounded-lg text-white font-medium ${\r\n              isLoading ? \"bg-gray-400 cursor-not-allowed\" : \"bg-purple-500 hover:bg-purple-600\"\r\n            }`}\r\n          >\r\n            {isLoading ? \"Processing...\" : confirmLabel}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import MessageToast from \"../../MessageToast\";\r\nimport { useState, useEffect } from 'react'; // Import useState\r\n\r\nexport default function CategoryNameInput({ value, onChange, isDuplicate }) {\r\n  // Add state to manage the toast visibility and content\r\n  // In a real app, this might be managed higher up, but this fixes the immediate issue.\r\n  const [toastMessage, setToastMessage] = useState(null);\r\n\r\n  // Use useEffect to show the toast when a duplicate is detected\r\n  useEffect(() => {\r\n    if (isDuplicate) {\r\n      setToastMessage({\r\n        type: 'error',\r\n        text: 'This category name already exists.',\r\n      });\r\n    } else if (toastMessage) {\r\n      // Hide the toast if the duplicate condition is no longer true\r\n      setToastMessage(null);\r\n    }\r\n  }, [isDuplicate]);\r\n\r\n  // Function to close the toast (passed to MessageToast)\r\n  const handleCloseToast = () => {\r\n    setToastMessage(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex w-full\">\r\n      {/* Title */}\r\n      <h2 className=\"text-2xl font-medium w-1/4\">Add new category</h2>\r\n      {/* Input Category */}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Enter category name\"\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        className={` border rounded-xl w-full border-gray-200 w-fu px-3 py-2 focus:outline-none focus:ring ${\r\n          isDuplicate\r\n            ? \"border-red-300 focus:border-red-500\"\r\n            : \"focus:border-blue-300\"\r\n        }`}\r\n      />\r\n\r\n      {/* Renders the toast if toastMessage is not null */}\r\n      {toastMessage && (\r\n        <MessageToast \r\n          message={toastMessage} \r\n          onClose={handleCloseToast} \r\n          duration={3000} // Optional: Explicitly set duration if needed\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}","import { useMemo } from \"react\";\r\n\r\nexport default function ProductSearchFilters({\r\n  search,\r\n  categoryFilter,\r\n  existingCategories,\r\n  onSearchChange,\r\n  onCategoryFilterChange,\r\n}) {\r\n  // Filter duplicates and normalize capitalization\r\n  const categoriesOptions = useMemo(() => {\r\n    const normalized = Array.from(\r\n      new Set(\r\n        existingCategories.map((c) => (c ? c.trim() : \"\"))\r\n      )\r\n    );\r\n\r\n    return normalized.filter((c) => c.toLowerCase() !== \"all\");\r\n  }, [existingCategories]);\r\n\r\n  return (\r\n    <div className=\"mb-4 flex gap-2 p-4\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search product\"\r\n        value={search}\r\n        onChange={(e) => onSearchChange(e.target.value)}\r\n        className=\"w-1/2 flex-1 border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:border-blue-300\"\r\n      />\r\n\r\n      <select\r\n        value={categoryFilter}\r\n        onChange={(e) => onCategoryFilterChange(e.target.value)}\r\n        className=\"w-1/2 border border-gray-200 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:border-blue-300\"\r\n      >\r\n        <option value=\"\">All Categories</option>\r\n        <option value=\"Uncategorized\">Uncategorized</option>\r\n        {categoriesOptions\r\n          .filter((c) => c.toLowerCase() !== \"uncategorized\")\r\n          .map((c, i) => (\r\n            <option key={i} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n","export default function AvailableProductsList({\r\n  products,\r\n  isFetchingNextPage,\r\n  loaderRef,\r\n  onProductAdd,\r\n}) {\r\n  return (\r\n    <div className=\"flex-1 overflow-auto space-y-2 p-4\">\r\n      {products.length === 0 ? (\r\n        <div className=\"text-gray-400 text-sm text-center py-8\">\r\n          No products available\r\n        </div>\r\n      ) : (\r\n        products.map((p) => (\r\n          <div\r\n            key={p.id}\r\n            className=\"flex justify-between items-center border border-gray-200 rounded-lg px-2 py-6 hover:bg-gray-50 cursor-pointer\"\r\n            onClick={() => onProductAdd(p)}\r\n          >\r\n            <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n\r\n              <span className=\"truncate\">{p.name}</span>\r\n            </div>\r\n            <div className=\"text-sm text-gray-500 flex-shrink-0 ml-2\">\r\n              {Array.isArray(p.categories) && p.categories.length > 0\r\n                ? p.categories\r\n                  .map((c) => c?.category_name)\r\n                  .filter(Boolean)\r\n                  .join(\", \")\r\n                : \"Uncategorized\"}\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n\r\n      {/* <pre className=\"text-xs text-gray-500 p-2 bg-gray-50 rounded\">\r\n        {JSON.stringify(\r\n          {\r\n            categoryFilter,\r\n            search,\r\n            totalProducts: products.length,\r\n            filtered: availableProducts.length,\r\n          },\r\n          null,\r\n          2\r\n        )}\r\n      </pre> */}\r\n\r\n\r\n      <div ref={loaderRef} className=\"h-10\" />\r\n      {isFetchingNextPage && (\r\n        <div className=\"text-center py-2 text-gray-500\">Loading more...</div>\r\n      )}\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport ProductSearchFilters from \"./ProductSearchFilter\";\r\nimport AvailableProductsList from \"./AvailableProductList\";\r\n\r\nexport default function ProductSearchPanel({\r\n  search,\r\n  categoryFilter,\r\n  availableProducts,\r\n  existingCategories,\r\n  isFetchingNextPage,\r\n  loaderRef,\r\n  onSearchChange,\r\n  onCategoryFilterChange,\r\n  onProductAdd,\r\n  onCancel,\r\n  onReset,\r\n}) {\r\n  return (\r\n    <>\r\n      <ProductSearchFilters\r\n        search={search}\r\n        categoryFilter={categoryFilter}\r\n        existingCategories={existingCategories}\r\n        onSearchChange={onSearchChange}\r\n        onCategoryFilterChange={onCategoryFilterChange}\r\n      />\r\n\r\n      <AvailableProductsList\r\n        products={availableProducts}\r\n        isFetchingNextPage={isFetchingNextPage}\r\n        loaderRef={loaderRef}\r\n        onProductAdd={onProductAdd}\r\n      />\r\n\r\n      <div className=\"flex justify-end p-4 border-t border-gray-200\">\r\n        <div className=\"w-full flex justify-between gap-3\">\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={onReset}\r\n            className=\"px-4 py-2 bg-pink-800 text-white rounded-lg hover:bg-pink-900 transition-colors\"\r\n          >\r\n            Reset\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n","import { RemoveIcon } from \"../../icons\";\r\n\r\nexport default function SelectedProductsList({ \r\n  products, \r\n  onRemove,\r\n  onCreateClick,\r\n  isCreateDisabled,\r\n  createButtonText,\r\n}) {\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Header */}\r\n      <h3 className=\"font-semibold p-4 border-b border-gray-200\">\r\n        Selected Items\r\n      </h3>\r\n\r\n      {/* Scrollable Product List */}\r\n      <div className=\"flex-1 overflow-auto p-4 space-y-2\">\r\n        {products.length === 0 ? (\r\n          <div className=\"text-gray-400 text-sm text-center py-8\">\r\n            No products selected yet\r\n          </div>\r\n        ) : (\r\n          products.map((p) => (\r\n            <div\r\n              key={p.id}\r\n              className=\"flex justify-between items-center border border-gray-200 rounded-lg px-2 py-4 hover:bg-gray-50\"\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                <img\r\n                  src={p.image}\r\n                  alt={p.name}\r\n                  className=\"w-8 h-8 rounded object-cover\"\r\n                />\r\n                <span className=\"truncate\">{p.name}</span>\r\n              </div>\r\n              <button\r\n                onClick={() => onRemove(p.id)}\r\n                className=\"hover:bg-red-50 rounded p-1\"\r\n              >\r\n                <RemoveIcon className=\"w-4 h-4 text-red-500\" />\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Sticky Create Button */}\r\n      <div className=\"p-4 border-t border-gray-200 flex justify-end\">\r\n        <button\r\n          onClick={onCreateClick}\r\n          disabled={isCreateDisabled}\r\n          className={` px-4 py-2 rounded text-white ${\r\n            isCreateDisabled\r\n              ? \"bg-gray-400 cursor-not-allowed\"\r\n              : \"bg-blue-600 hover:bg-blue-700\"\r\n          }`}\r\n        >\r\n          {createButtonText}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useMemo, useRef } from \"react\";\r\nimport { createCategory } from \"../../../services/categoryServices\";\r\nimport { useProductsData } from \"../../../hooks/useProductsData\";\r\nimport useInfiniteScroll from \"../../../hooks/useInfiniteScroll\";\r\nimport DualPanelModal from \"../../common/DualPanelModal\";\r\nimport CategoryConfirmModal from \"../../common/CategoryConfirmModal\";\r\nimport CategoryNameInput from \"./CategoryNameInput\";\r\nimport ProductSearchPanel from \"./ProductSearchPanel\";\r\nimport SelectedProductsList from \"./SelectedProductsList\";\r\n\r\nexport default function CreateCategoryModal({ categories = [], onClose, onSuccess, setMessage }) {\r\n  // --- Form state ---\r\n  const [categoryName, setCategoryName] = useState(\"\");\r\n  const [selectedProducts, setSelectedProducts] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const loaderRef = useRef(null);\r\n  const confirmModalRef = useRef(null);\r\n\r\n  // --- Fetch products ---\r\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage } = useProductsData({\r\n    search,\r\n    category: categoryFilter || \"\",\r\n    perPage: 10,\r\n  });\r\n\r\n  const products = data?.pages?.flatMap((page) => page.data) ?? [];\r\n  useInfiniteScroll(loaderRef, fetchNextPage, hasNextPage, isFetchingNextPage);\r\n\r\n  // --- Existing categories ---\r\n  const existingCategories = useMemo(() => {\r\n    const allNames = [\r\n      ...categories.map((c) => c.category_name?.trim()).filter(Boolean),\r\n      ...products.flatMap((p) =>\r\n        Array.isArray(p.categories)\r\n          ? p.categories.map((c) => c?.category_name?.trim()).filter(Boolean)\r\n          : []\r\n      ),\r\n    ];\r\n\r\n    const unique = Array.from(new Set(allNames.map((n) => n.toLowerCase()))).map(\r\n      (n) => n.charAt(0).toUpperCase() + n.slice(1)\r\n    );\r\n\r\n    return [\"Uncategorized\", ...unique];\r\n  }, [categories, products]);\r\n\r\n  // --- Filtered products ---\r\n  const availableProducts = useMemo(() => {\r\n    return (products ?? []).filter(\r\n      (p) => !selectedProducts.some((sp) => sp.id === p.id)\r\n    );\r\n  }, [products, selectedProducts]);\r\n\r\n  // --- Handlers ---\r\n  const handleAddProduct = (product) => setSelectedProducts((prev) => [...prev, product]);\r\n  const handleRemoveProduct = (id) => setSelectedProducts((prev) => prev.filter((p) => p.id !== id));\r\n  const handleReset = () => setSelectedProducts([]);\r\n\r\n  const handleCancel = () => {\r\n    setCategoryName(\"\");\r\n    setSearch(\"\");\r\n    setCategoryFilter(\"\");\r\n    setSelectedProducts([]);\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const trimmedName = categoryName.trim();\r\n  const isDuplicate = existingCategories.some(\r\n    (c) => c.toLowerCase() === trimmedName.toLowerCase()\r\n  );\r\n\r\n  const handleCreateClick = () => {\r\n    if (!trimmedName) {\r\n      setMessage({ type: \"warning\", text: \"âš ï¸ Please enter a category name\" });\r\n      return;\r\n    }\r\n    if (isDuplicate) {\r\n      setMessage({ type: \"warning\", text: `âš ï¸ Category \"${trimmedName}\" already exists` });\r\n      return;\r\n    }\r\n    setShowConfirmation(true);\r\n  };\r\n\r\n  const handleConfirmCreate = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const payload = {\r\n        category_name: trimmedName,\r\n        products: selectedProducts.map((p) => p.id),\r\n      };\r\n\r\n      await createCategory(payload);\r\n      setShowConfirmation(false);\r\n\r\n      // Reset form\r\n      setCategoryName(\"\");\r\n      setSelectedProducts([]);\r\n      setSearch(\"\");\r\n      setCategoryFilter(\"\");\r\n\r\n      if (onSuccess) await onSuccess();\r\n    } catch (err) {\r\n      const res = err?.response?.data;\r\n      const errorText = res?.errors\r\n        ? Object.values(res.errors).flat().join(\" â€¢ \")\r\n        : res?.message || \"Failed to create category\";\r\n\r\n      setMessage({ type: \"error\", text: `âŒ ${errorText}` });\r\n      setShowConfirmation(false);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const createButtonText = isDuplicate ? \"Category exists\" : isLoading ? \"Creating...\" : \"Create\";\r\n\r\n  return (\r\n    <>\r\n      <DualPanelModal\r\n        isOpen\r\n        onClose={handleCancel}\r\n        topPanel={\r\n          <CategoryNameInput\r\n            value={categoryName}\r\n            onChange={setCategoryName}\r\n            isDuplicate={isDuplicate}\r\n          />\r\n        }\r\n        leftPanel={\r\n          <ProductSearchPanel\r\n            search={search}\r\n            categoryFilter={categoryFilter}\r\n            availableProducts={availableProducts}\r\n            existingCategories={existingCategories}\r\n            isFetchingNextPage={isFetchingNextPage}\r\n            loaderRef={loaderRef}\r\n            onSearchChange={setSearch}\r\n            onCategoryFilterChange={setCategoryFilter}\r\n            onProductAdd={handleAddProduct}\r\n            onReset={handleReset}\r\n            onCancel={handleCancel}\r\n          />\r\n        }\r\n        rightPanel={\r\n          <SelectedProductsList\r\n            products={selectedProducts}\r\n            onRemove={handleRemoveProduct}\r\n            onCreateClick={handleCreateClick}\r\n            isCreateDisabled={isDuplicate || !trimmedName || isLoading}\r\n            createButtonText={createButtonText}\r\n          />\r\n        }\r\n      />\r\n\r\n      {showConfirmation && (\r\n        <CategoryConfirmModal\r\n          title=\"Category confirmation summary\"\r\n          confirmLabel=\"Create\"\r\n          categoryName={categoryName}\r\n          products={selectedProducts}\r\n          onClose={() => setShowConfirmation(false)}\r\n          onConfirm={handleConfirmCreate}\r\n          isLoading={isLoading}\r\n          modalRef={confirmModalRef}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { createProduct } from \"../../../services/productServices\";\r\n\r\nexport function useCreateProductForm({ onClose, onSuccess, setMessage, categories }) {\r\n  const [productName, setProductName] = useState(\"\");\r\n  const [price, setPrice] = useState(1);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [stockThreshold, setStockThreshold] = useState(\"\");\r\n  const [selectedCategories, setSelectedCategories] = useState([]);\r\n  const [file, setFile] = useState(null);\r\n  const [productImage, setProductImage] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Filter out invalid categories on mount\r\n  useEffect(() => {\r\n    const validCategoryIds = categories\r\n      .filter((c) => c.id > 0)\r\n      .map((c) => c.id);\r\n    \r\n    setSelectedCategories((prev) => \r\n      prev.filter((id) => validCategoryIds.includes(id))\r\n    );\r\n  }, [categories]);\r\n\r\n  // Handle category toggle\r\n  const handleCategoryChange = (categoryId, isChecked) => {\r\n    if (categoryId <= 0) return;\r\n    \r\n    setSelectedCategories((prev) =>\r\n      isChecked ? [...prev, categoryId] : prev.filter((c) => c !== categoryId)\r\n    );\r\n  };\r\n\r\n  // Handle image upload preview\r\n  const handleImageChange = (selectedFile) => {\r\n    if (selectedFile) {\r\n      setFile(selectedFile);\r\n      setProductImage(URL.createObjectURL(selectedFile));\r\n    }\r\n  };\r\n\r\n  // Form validation\r\n  const validateForm = () => {\r\n    if (!productName.trim()) {\r\n      setMessage?.({ type: \"error\", text: \"Product name is required.\" });\r\n      return false;\r\n    }\r\n\r\n    if (price <= 0) {\r\n      setMessage?.({ type: \"error\", text: \"Price must be greater than 0.\" });\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // Form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const validCategoryIds = selectedCategories.filter((id) => id > 0);\r\n      \r\n      const formData = new FormData();\r\n      formData.append(\"name\", productName);\r\n      formData.append(\"price\", price);\r\n      formData.append(\"stock_quantity\", quantity);\r\n      formData.append(\"low_stock_threshold\", stockThreshold || 0);\r\n      \r\n      validCategoryIds.forEach((id) => formData.append(\"category_ids[]\", id));\r\n      \r\n      if (file) formData.append(\"image_path\", file);\r\n\r\n      const response = await createProduct(formData);\r\n      const product = response?.data?.product || response?.product || response?.data;\r\n\r\n      if (product?.id) {\r\n        setMessage?.({ type: \"success\", text: \"Product created successfully!\" });\r\n        onSuccess?.();\r\n        onClose?.();\r\n      } else {\r\n        setMessage?.({ type: \"error\", text: \"Unexpected response from server.\" });\r\n      }\r\n    } catch (err) {\r\n      const errorData = err?.response?.data;\r\n      let message = \"Something went wrong.\";\r\n\r\n      if (typeof errorData === \"string\") {\r\n        message = errorData;\r\n      } else if (errorData?.errors) {\r\n        const validationErrors = Object.entries(errorData.errors)\r\n          .map(([field, msgs]) => `${field}: ${msgs.join(\", \")}`)\r\n          .join(\" | \");\r\n        message = validationErrors;\r\n      } else if (errorData?.message) {\r\n        message = errorData.message;\r\n      }\r\n\r\n      setMessage?.({ type: \"error\", text: message });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    formState: {\r\n      productName,\r\n      price,\r\n      quantity,\r\n      stockThreshold,\r\n      selectedCategories,\r\n      productImage,\r\n    },\r\n    handlers: {\r\n      setProductName,\r\n      setPrice,\r\n      setQuantity,\r\n      setStockThreshold,\r\n      handleCategoryChange,\r\n      handleImageChange,\r\n    },\r\n    loading,\r\n    handleSubmit,\r\n  };\r\n}","import { useCreateProductForm } from \"./useCreateProductForm\";\r\nimport Modal from \"../../common/Modal\";\r\n\r\nimport {\r\n    ImageUpload,\r\n    ProductNameInput,\r\n    PriceInput,\r\n    CategorySelector,\r\n    QuantityInput,\r\n    ThresholdInput,\r\n} from './index'\r\n\r\nexport default function CreateProductModal({ onClose, onSuccess, setMessage, categories = [] }) {\r\n  const {\r\n    formState,\r\n    handlers,\r\n    loading,\r\n    handleSubmit,\r\n  } = useCreateProductForm({ onClose, onSuccess, setMessage, categories });\r\n\r\n  return (\r\n    <Modal\r\n      isOpen\r\n      onClose={onClose}\r\n      title=\"Add new item\"\r\n      maxWidth=\"2xl\"\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        <ImageUpload\r\n          image={formState.productImage}\r\n          onChange={handlers.handleImageChange}\r\n        />\r\n\r\n        <ProductNameInput\r\n          value={formState.productName}\r\n          onChange={handlers.setProductName}\r\n        />\r\n\r\n        <PriceInput\r\n          value={formState.price}\r\n          onChange={handlers.setPrice}\r\n        />\r\n\r\n        <CategorySelector\r\n          categories={categories}\r\n          selectedCategories={formState.selectedCategories}\r\n          onCategoryChange={handlers.handleCategoryChange}\r\n        />\r\n\r\n        <div className=\"grid grid-cols-2 gap-6 px-6\">\r\n          <QuantityInput\r\n            value={formState.quantity}\r\n            onChange={handlers.setQuantity}\r\n          />\r\n          <ThresholdInput\r\n            value={formState.stockThreshold}\r\n            onChange={handlers.setStockThreshold}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"pt-4 border-t-2 border-gray-200 flex justify-between gap-4 p-4\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\"\r\n          >\r\n            {loading ? \"Saving...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { UploadIcon } from \"../../icons/index\";\r\n\r\nexport default function ImageUpload({ image, onChange }) {\r\n  const handleChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) onChange(file);\r\n  };\r\n\r\n  return (\r\n    <div className=\"px-6 pt-6\">\r\n      <label\r\n        htmlFor=\"product-image-upload\"\r\n        className=\"block w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 relative overflow-hidden\"\r\n      >\r\n        {image ? (\r\n          <img src={image} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\r\n            <UploadIcon />\r\n            <span className=\"text-sm font-medium\">+ Add product image</span>\r\n          </div>\r\n        )}\r\n        <input\r\n          id=\"product-image-upload\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={handleChange}\r\n          className=\"hidden\"\r\n        />\r\n      </label>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\n\r\nexport default function ProductNameInput({ value, onChange }) {\r\n  return (\r\n    <div className=\"px-6\">\r\n      <label className=\"text-sm font-medium text-gray-700  block\">\r\n        Product Name\r\n      </label>\r\n      <input\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder=\"Enter product name\"\r\n        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n      />\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\n\r\nexport default function PriceInput({ value, onChange }) {\r\n  return (\r\n    <div className=\"px-6\">\r\n      <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Price</label>\r\n      <div className=\"relative\">\r\n        <div className=\"absolute left-3 top-3 text-gray-500\">â‚±</div>\r\n\r\n        <input\r\n          type=\"number\"\r\n          value={value}\r\n          onChange={(e) => onChange(Number(e.target.value))}\r\n          min=\"1\"\r\n          className=\"w-full pl-7 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function CategorySelector({\r\n  categories,\r\n  selectedCategories,\r\n  onCategoryChange,\r\n}) {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      // Check if a click occurred AND if the click target is NOT inside the element referenced by dropdownRef\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setOpen(false); // Close the dropdown\r\n      }\r\n    };\r\n\r\n    // Attach the event listener to the entire document\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    // Cleanup function to remove the listener when the component is removed\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []); // Empty dependency array means this runs once on mount\r\n\r\n  // Handler for category selection\r\n  const handleCategoryToggle = (catId, isChecked) => {\r\n    onCategoryChange(catId, isChecked);\r\n    // ðŸ’¡ ENHANCEMENT: Keep the dropdown open to allow for quick multi-selection, \r\n    // but clear the search term if they successfully select a category.\r\n    setSearchTerm(\"\");\r\n  };\r\n\r\n  const filteredCategories = categories\r\n    .filter((c) => c.id > 0)\r\n    .filter((c) => c.category_name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n  // ðŸ’¡ FIX: Extract the logic for displaying selected names for reusability\r\n  const selectedCategoryNames = selectedCategories.map((catId) => {\r\n    const found = categories.find((c) => c.id === catId);\r\n    return found?.category_name || \"Unknown\";\r\n  });\r\n\r\n\r\n  return (\r\n    // ðŸ’¡ STYLING FIX: Remove unnecessary 'px-6' from the relative container\r\n    // so the dropdown's absolute positioning aligns with the input below it.\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <label className=\"text-sm font-medium text-gray-700 mb-2 block px-6\">Category</label>\r\n\r\n      {/* Input container allows for display of selected items inside the \"box\" if desired */}\r\n      <div className=\"px-6\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder={\"Search or select category...\"}\r\n          value={searchTerm}\r\n          onChange={(e) => {\r\n            setSearchTerm(e.target.value);\r\n            setOpen(true); // Open when typing\r\n          }}\r\n          onFocus={() => setOpen(true)} // Open when focused\r\n          className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n        />\r\n      </div>\r\n\r\n      {open && (\r\n        // ðŸ’¡ STYLING FIX: Use 'inset-x-6' to account for the padding of the parent\r\n        // or just ensure the wrapper of the input and dropdown has consistent padding.\r\n        // We'll use absolute with left/right to span the full width of the input wrapper.\r\n        <div className=\"absolute left-6 right-6 mt-2 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto z-10\">\r\n          {filteredCategories.length > 0 ? (\r\n            filteredCategories.map((cat) => (\r\n              <label\r\n                key={cat.id}\r\n                className=\"flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm\"\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedCategories.includes(cat.id)}\r\n                  onChange={(e) => handleCategoryToggle(cat.id, e.target.checked)}\r\n                  className=\"mr-2 h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\r\n                />\r\n                {cat.category_name}\r\n              </label>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-gray-500 text-center py-2 text-sm\">\r\n              No categories found for \"{searchTerm}\"\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Selected Categories - Displayed Below the Input */}\r\n      {selectedCategoryNames.length > 0 && (\r\n        <div className=\"flex flex-wrap gap-2 mt-3 px-6\">\r\n          {selectedCategoryNames.map((name) => (\r\n            <span\r\n              key={name}\r\n              className=\"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium flex items-center\"\r\n            >\r\n              {name}\r\n              {/* Optional: Add a button to remove the category */}\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => onCategoryChange(categories.find(c => c.category_name === name)?.id, false)}\r\n                className=\"ml-2 text-indigo-800 hover:text-indigo-900\"\r\n              >\r\n                &times;\r\n              </button>\r\n            </span>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport { MinusIcon, PlusIcon } from \"../../icons\";\r\n\r\nexport default function QuantityInput({ value, onChange }) {\r\n  // Ensure the value is treated as a number, defaulting to 1 if invalid\r\n  const numericValue = Number(value) || 1; \r\n\r\n  // Function to handle input field changes\r\n  const handleInputChange = (e) => {\r\n    const newValue = Number(e.target.value);\r\n    onChange(Math.max(1, newValue)); // Min value is 1\r\n  };\r\n\r\n  // Function to handle decrement button click\r\n  const handleDecrement = () => {\r\n    onChange(Math.max(1, numericValue - 1)); \r\n  };\r\n\r\n  // Function to handle increment button click\r\n  const handleIncrement = () => {\r\n    onChange(numericValue + 1);\r\n  };\r\n\r\n  return (\r\n    <div> {/* Removed max-w-xs to allow it to take full container width */}\r\n      \r\n      {/* Label: Matched ThresholdInput's styling */}\r\n      <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Quantity</label>\r\n      \r\n      {/* Unified Input Control Container (Stepper Design) */}\r\n      <div className=\"flex items-center w-full border border-gray-300 rounded-lg overflow-hidden\">\r\n        \r\n        {/* Decrement Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleDecrement}\r\n          // p-3 padding retained for consistent height\r\n          className=\"p-3 border-r border-gray-300 text-gray-700 hover:bg-gray-50 transition duration-150 ease-in-out flex-shrink-0\"\r\n        >\r\n          <MinusIcon className=\"w-5 h-5\" /> \r\n        </button>\r\n        \r\n        {/* Quantity Input Field */}\r\n        <input\r\n          type=\"number\"\r\n          min=\"1\" // Set minimum to 1 for quantity\r\n          value={numericValue}\r\n          onChange={handleInputChange}\r\n          // Input styling: uses py-3 and px-3 to match the p-3 height/padding of the reference input\r\n          // Removed large font size classes to match the small, standard text size\r\n          className=\"w-full text-center py-3 px-3 border-none focus:ring-0 focus:outline-none text-gray-800\"\r\n          // Hide default number arrows (optional)\r\n          style={{ appearance: 'textfield' }} \r\n        />\r\n        \r\n        {/* Increment Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleIncrement}\r\n          // p-3 padding retained for consistent height\r\n          className=\"p-3 border-l border-gray-300 text-gray-700 hover:bg-gray-50 transition duration-150 ease-in-out flex-shrink-0\"\r\n        >\r\n          <PlusIcon className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\n\r\nexport default function ThresholdInput({ value, onChange }) {\r\n  return (\r\n    <div>\r\n      <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n        Low Stock Threshold\r\n      </label>\r\n      <input\r\n        type=\"number\"\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        min=\"0\"\r\n        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n      />\r\n    </div>\r\n  );\r\n}","import { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { removeMultipleProducts } from \"../services/productServices\";\r\n\r\nexport function useRemoveProducts() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: removeMultipleProducts, // Uses service function\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"products\"]);\r\n    },\r\n  });\r\n}\r\n","import { useState, useMemo, useRef } from \"react\";\r\nimport { useProductsData } from \"../../../hooks/useProductsData\";\r\nimport { useRemoveProducts } from \"../../../hooks/useRemoveProduct\";\r\nimport useInfiniteScroll from \"../../../hooks/useInfiniteScroll\";\r\n\r\nexport function useRemoveMultipleProductsForm({ onClose, onSuccess, setMessage }) {\r\n  const [selectedProducts, setSelectedProducts] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const loaderRef = useRef(null);\r\n  const confirmModalRef = useRef(null);\r\n\r\n  // --- Fetch products ---\r\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, isLoading } = useProductsData({\r\n    search,\r\n    category: \"All\",\r\n    perPage: 20,\r\n  });\r\n\r\n  // --- Flatten paginated data ---\r\n  const products = useMemo(() => data?.pages?.flatMap((page) => page.data) ?? [], [data]);\r\n\r\n  // --- Infinite scroll ---\r\n  useInfiniteScroll(loaderRef, fetchNextPage, hasNextPage, isFetchingNextPage);\r\n\r\n  // --- Mutation hook ---\r\n  const { mutate, isLoading: isRemoving } = useRemoveProducts();\r\n\r\n  // --- Selected products for display ---\r\n  const productsToDelete = useMemo(\r\n    () => products.filter((p) => selectedProducts.includes(p.id)),\r\n    [products, selectedProducts]\r\n  );\r\n\r\n  // --- Handlers ---\r\n  const toggleProduct = (id) => {\r\n    setSelectedProducts((prev) =>\r\n      prev.includes(id) ? prev.filter((pid) => pid !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const handleReset = () => setSelectedProducts([]);\r\n\r\n  const handleCancel = () => {\r\n    setSelectedProducts([]);\r\n    setSearch(\"\");\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const handleRemoveClick = () => {\r\n    if (selectedProducts.length === 0) {\r\n      if (setMessage) {\r\n        setMessage({ type: \"warning\", text: \"âš ï¸ Please select at least one product to remove\" });\r\n      }\r\n      return;\r\n    }\r\n    setShowConfirmation(true);\r\n  };\r\n\r\nconst handleConfirmRemove = () => {\r\n  mutate(\r\n    { products: selectedProducts }, // object with key 'products'\r\n    {\r\n      onSuccess: () => {\r\n        // Close confirmation modal\r\n        setShowConfirmation(false);\r\n\r\n        // Reset selection and search\r\n        setSelectedProducts([]);\r\n        setSearch(\"\");\r\n\r\n        // Show toast via onSuccess\r\n        if (onSuccess) onSuccess();\r\n\r\n        // Close main Remove Multiple Products modal\r\n        if (onClose) onClose();\r\n      },\r\n      onError: (err) => {\r\n        console.error(\"Remove products error:\", err);\r\n        const errorText = err?.response?.data?.message || \"Failed to remove products\";\r\n\r\n        if (setMessage) setMessage({ type: \"error\", text: `âŒ ${errorText}` });\r\n\r\n        // Close confirmation modal only\r\n        setShowConfirmation(false);\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\n\r\n\r\n  // --- Button state ---\r\n  const removeButtonText = isRemoving\r\n    ? \"Removing...\"\r\n    : selectedProducts.length > 0\r\n    ? `Remove Selected`\r\n    : \"Remove\";\r\n\r\n  const isRemoveDisabled = isRemoving || selectedProducts.length === 0;\r\n\r\n  return {\r\n    formState: {\r\n      selectedProducts,\r\n      search,\r\n      showConfirmation,\r\n      removeButtonText,\r\n      isRemoveDisabled,\r\n      isLoading,\r\n    },\r\n    handlers: {\r\n      toggleProduct,\r\n      handleReset,\r\n      handleCancel,\r\n      handleRemoveClick,\r\n      handleConfirmRemove,\r\n      setSearch,\r\n      setShowConfirmation,\r\n    },\r\n    productsData: {\r\n      products,\r\n      productsToDelete,\r\n      loaderRef,\r\n      confirmModalRef,\r\n      isFetchingNextPage,\r\n    },\r\n    isRemoving,\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { useRemoveMultipleProductsForm } from \"./useRemoveMultipleProductsForm\";\r\nimport DualPanelModal from \"../../common/DualPanelModal\";\r\nimport CategoryConfirmModal from \"../../common/CategoryConfirmModal\";\r\n\r\nexport default function RemoveMultipleProductsModal({ onClose, onSuccess, setMessage }) {\r\n  const {\r\n    formState: {\r\n      selectedProducts,\r\n      search,\r\n      showConfirmation,\r\n      removeButtonText,\r\n      isRemoveDisabled,\r\n      isLoading,\r\n    },\r\n    handlers: {\r\n      toggleProduct,\r\n      handleReset,\r\n      handleCancel,\r\n      handleRemoveClick,\r\n      handleConfirmRemove,\r\n      setSearch,\r\n      setShowConfirmation,\r\n    },\r\n    productsData: {\r\n      products,\r\n      loaderRef,\r\n      confirmModalRef,\r\n      isFetchingNextPage,\r\n    },\r\n    isRemoving,\r\n  } = useRemoveMultipleProductsForm({ onClose, onSuccess, setMessage });\r\n\r\n  // --- Top Panel ---\r\n  const topPanel = (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900\">Remove Products</h2>\r\n    </div>\r\n  );\r\n\r\n  // --- Left Panel ---\r\n  const leftPanel = (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"p-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search products...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"w-full px-3 py-2 border border-purple-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {isLoading ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"text-sm\">Loading products...</p>\r\n          </div>\r\n        ) : products.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"text-sm\">No products found</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {products\r\n              .filter((p) => !selectedProducts.includes(p.id))\r\n              .map((product) => (\r\n                <div\r\n                  key={product.id}\r\n                  onClick={() => toggleProduct(product.id)}\r\n                  className=\"flex items-center justify-between border rounded-lg px-3 py-2 cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300\"\r\n                >\r\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                    <img\r\n                      src={product.image || `https://via.placeholder.com/40?text=${product.name?.[0] || \"P\"}`}\r\n                      alt={product.name}\r\n                      className=\"w-10 h-10 object-cover rounded shrink-0\"\r\n                      onError={(e) => {\r\n                        e.target.src = `https://via.placeholder.com/40?text=${product.name?.[0] || \"P\"}`;\r\n                      }}\r\n                    />\r\n                    <span className=\"truncate font-medium text-gray-900\">{product.name}</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            <div ref={loaderRef} className=\"py-4 text-center\">\r\n              {isFetchingNextPage && <span className=\"text-sm text-gray-500\">Loading more...</span>}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t border-gray-200 flex justify-between gap-3\">\r\n        <button\r\n          onClick={handleCancel}\r\n          className=\"px-4 py-2 rounded-lg bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleReset}\r\n          disabled={selectedProducts.length === 0}\r\n          className={`px-4 py-2 rounded-lg transition-colors ${\r\n            selectedProducts.length === 0\r\n              ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n              : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n          }`}\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // --- Right Panel ---\r\n  const rightPanel = (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"p-4 border-b border-gray-200\">\r\n        <h3 className=\"font-semibold text-gray-900\">\r\n          Selected Products ({selectedProducts.length})\r\n        </h3>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {selectedProducts.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"text-sm\">No products selected</p>\r\n            <p className=\"text-xs mt-1\">Click products to select them</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {products\r\n              .filter((p) => selectedProducts.includes(p.id))\r\n              .map((product) => (\r\n                <div\r\n                  key={product.id}\r\n                  onClick={() => toggleProduct(product.id)}\r\n                  className=\"flex items-center justify-between border-2 border-purple-500 rounded-lg px-3 py-2 hover:bg-pink-50 transition-colors cursor-pointer\"\r\n                >\r\n                  <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                    <img\r\n                      src={product.image || `https://via.placeholder.com/32?text=${product.name?.[0] || \"P\"}`}\r\n                      alt={product.name}\r\n                      className=\"w-8 h-8 object-cover rounded shrink-0\"\r\n                      onError={(e) => {\r\n                        e.target.src = `https://via.placeholder.com/32?text=${product.name?.[0] || \"P\"}`;\r\n                      }}\r\n                    />\r\n                    <span className=\"truncate text-sm text-gray-900\">{product.name}</span>\r\n                  </div>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      toggleProduct(product.id);\r\n                    }}\r\n                    className=\"text-red-600 hover:text-red-700 text-xl font-bold leading-none ml-2\"\r\n                    title=\"Remove from selection\"\r\n                  >\r\n                    Ã—\r\n                  </button>\r\n                </div>\r\n              ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex justify-end p-4 border-t border-gray-200\">\r\n        <button\r\n          onClick={handleRemoveClick}\r\n          disabled={isRemoveDisabled}\r\n          className={`px-4 py-2 rounded-lg text-white font-medium transition-colors ${\r\n            isRemoveDisabled\r\n              ? \"bg-gray-300 cursor-not-allowed\"\r\n              : \"bg-purple-500 hover:bg-purple-700\"\r\n          }`}\r\n        >\r\n          {removeButtonText}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <DualPanelModal\r\n        isOpen\r\n        onClose={handleCancel}\r\n        topPanel={topPanel}\r\n        leftPanel={leftPanel}\r\n        rightPanel={rightPanel}\r\n      />\r\n\r\n      {showConfirmation && (\r\n        <CategoryConfirmModal\r\n          title=\"Confirm deletion\"\r\n          message=\"The following items will be deleted permanently\"\r\n          items={products.filter((p) => selectedProducts.includes(p.id)).map((p) => p.name)}\r\n          confirmLabel=\"Confirm Remove\"\r\n          cancelLabel=\"Cancel\"\r\n          onConfirm={handleConfirmRemove}\r\n          onClose={() => setShowConfirmation(false)}\r\n          isLoading={isRemoving}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","// src/hooks/useCategories.js\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport {\r\n  getCategories,\r\n  createCategory,\r\n  removeCategories,\r\n} from \"../services/categoryServices\";\r\n\r\n/** ðŸ”¹ Fetch all categories */\r\nexport function useCategories() {\r\n  return useQuery({\r\n    queryKey: [\"categories\"],\r\n    queryFn: getCategories,\r\n  });\r\n}\r\n\r\n/** ðŸ”¹ Create new category */\r\nexport function useCreateCategory() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: createCategory,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"categories\"]);\r\n    },\r\n  });\r\n}\r\n\r\n/** ðŸ”¹ Remove multiple categories */\r\nexport function useRemoveCategories() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: removeCategories,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries([\"categories\"]);\r\n    },\r\n    onError: (error) => {\r\n      console.error(\"âŒ Category deletion failed:\", {\r\n        status: error.response?.status,\r\n        message: error.response?.data?.message,\r\n        details: error.response?.data?.errors,\r\n      });\r\n    },\r\n  });\r\n}\r\n","import { useState, useMemo, useRef } from \"react\";\r\nimport { useCategoryData } from \"../../../hooks/useCategoryData\";\r\nimport { useRemoveCategories } from \"../../../hooks/useRemoveCategories\";\r\n\r\nexport function useRemoveMultipleCategoriesForm({ onClose, onSuccess, setMessage }) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [selectedCategories, setSelectedCategories] = useState([]);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const confirmModalRef = useRef(null);\r\n\r\n  // --- Fetch all categories ---\r\n  const { data: categories = [], isFetching } = useCategoryData();\r\n\r\n  // --- Filter out selected ones ---\r\n  const availableCategories = useMemo(() => {\r\n    return categories\r\n      .filter((c) => !selectedCategories.some((s) => s.id === c.id))\r\n      .filter((c) =>\r\n        search ? c.category_name.toLowerCase().includes(search.toLowerCase()) : true\r\n      )\r\n      .filter((c) => {\r\n        // Filter out special categories that shouldn't be deleted\r\n        const name = c.category_name?.toLowerCase();\r\n        return name !== \"all\" && name !== \"uncategorized\" && c.id !== 0 && c.id !== -1;\r\n      });\r\n  }, [categories, selectedCategories, search]);\r\n\r\n  // --- Mutation hook ---\r\n  const { mutateAsync: removeCategories, isLoading } = useRemoveCategories();\r\n\r\n  // --- Toggle category selection ---\r\n  const handleToggleCategory = (category) => {\r\n    setSelectedCategories((prev) =>\r\n      prev.some((c) => c.id === category.id)\r\n        ? prev.filter((c) => c.id !== category.id)\r\n        : [...prev, category]\r\n    );\r\n  };\r\n\r\n  const handleReset = () => setSelectedCategories([]);\r\n\r\n  const handleCancel = () => {\r\n    setSelectedCategories([]);\r\n    setSearch(\"\");\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const handleRemoveClick = () => {\r\n    if (selectedCategories.length === 0) {\r\n      if (setMessage) {\r\n        setMessage({ type: \"warning\", text: \"âš ï¸ Please select at least one category\" });\r\n      }\r\n      return;\r\n    }\r\n    setShowConfirmation(true);\r\n  };\r\n\r\n  const handleConfirmRemove = async () => {\r\n    try {\r\n      // âœ… Send category_name strings, not IDs\r\n      const categoryNames = selectedCategories.map((c) => c.category_name);\r\n      \r\n      await removeCategories(categoryNames);\r\n\r\n      // Close confirmation modal\r\n      setShowConfirmation(false);\r\n\r\n      // Reset form\r\n      setSelectedCategories([]);\r\n      setSearch(\"\");\r\n\r\n      // Call success callback - parent will handle toast and refetch\r\n      if (onSuccess) await onSuccess();\r\n\r\n    } catch (err) {\r\n      console.error(\"Remove categories error:\", err);\r\n      \r\n      const res = err?.response?.data;\r\n      const errorText = res?.errors\r\n        ? Object.values(res.errors).flat().join(\" â€¢ \")\r\n        : res?.message || \"Failed to remove categories\";\r\n\r\n      if (setMessage) {\r\n        setMessage({ type: \"error\", text: `âŒ ${errorText}` });\r\n      }\r\n      \r\n      // Close confirmation modal on error\r\n      setShowConfirmation(false);\r\n    }\r\n  };\r\n\r\n  const removeButtonText = isLoading\r\n    ? \"Removing...\"\r\n    : selectedCategories.length > 0\r\n    ? `Remove ${selectedCategories.length} ${selectedCategories.length > 1 ? \"Categories\" : \"Category\"}`\r\n    : \"Remove\";\r\n\r\n  const isRemoveDisabled = isLoading || selectedCategories.length === 0;\r\n\r\n  return {\r\n    formState: {\r\n      selectedCategories,\r\n      search,\r\n      showConfirmation,\r\n      removeButtonText,\r\n      isRemoveDisabled,\r\n    },\r\n    handlers: {\r\n      setSearch,\r\n      handleToggleCategory,\r\n      handleReset,\r\n      handleCancel,\r\n      handleRemoveClick,\r\n      handleConfirmRemove,\r\n      setShowConfirmation,\r\n    },\r\n    categoriesData: {\r\n      availableCategories,\r\n      loaderRef: useRef(null),\r\n      isFetchingNextPage: isFetching,\r\n    },\r\n    isLoading,\r\n    confirmModalRef,\r\n  };\r\n}","import React from \"react\";\r\nimport { useRemoveMultipleCategoriesForm } from \"./useRemoveMultipleCategoriesForm\";\r\nimport DualPanelModal from \"../../common/DualPanelModal\";\r\nimport CategoryConfirmModal from \"../../common/CategoryConfirmModal\";\r\n\r\nexport default function RemoveMultipleCategoriesModal({ onClose, onSuccess, setMessage }) {\r\n  const {\r\n    formState: {\r\n      selectedCategories,\r\n      search,\r\n      showConfirmation,\r\n      removeButtonText,\r\n      isRemoveDisabled,\r\n    },\r\n    handlers: {\r\n      setSearch,\r\n      handleToggleCategory,\r\n      handleReset,\r\n      handleCancel,\r\n      handleRemoveClick,\r\n      handleConfirmRemove,\r\n      setShowConfirmation,\r\n    },\r\n    categoriesData: { availableCategories, isFetchingNextPage },\r\n    isLoading,\r\n  } = useRemoveMultipleCategoriesForm({ onClose, onSuccess, setMessage });\r\n\r\n  // --- Top Panel ---\r\n  const topPanel = (\r\n    <div>\r\n      <h2 className=\"text-xl font-semibold text-gray-900\">Remove Categories</h2>\r\n    </div>\r\n  );\r\n\r\n  // --- Left Panel ---\r\n  const leftPanel = (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"p-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search categories...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"w-full px-3 py-2 border border-purple-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {availableCategories.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"text-sm\">No categories found</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {availableCategories.map((category) => {\r\n              const isSelected = selectedCategories.some((c) => c.id === category.id);\r\n              return (\r\n                <div\r\n                  key={category.id}\r\n                  onClick={() => handleToggleCategory(category)}\r\n                  className={`flex items-center justify-between border rounded-lg p-4 cursor-pointer transition-all ${\r\n                    isSelected\r\n                      ? \"bg-pink-50 border-purple-500 shadow-sm\"\r\n                      : \"border-gray-200 hover:bg-gray-50 hover:border-gray-300\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                    <span className=\"truncate text-sm font-medium text-gray-900\">\r\n                      {category.category_name}\r\n                    </span>\r\n                  </div>\r\n                  {category.products_count !== undefined && (\r\n                    <span className=\"text-xs text-gray-500 ml-2 shrink-0\">\r\n                      {category.products_count} products\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n            {isFetchingNextPage && (\r\n              <div className=\"text-center py-2 text-sm text-gray-500\">Loading more...</div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t border-gray-200 flex justify-between gap-3\">\r\n        <button\r\n          onClick={handleCancel}\r\n          className=\"px-4 py-2 rounded-lg bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleReset}\r\n          disabled={selectedCategories.length === 0}\r\n          className={`px-4 py-2 rounded-lg transition-colors ${\r\n            selectedCategories.length === 0\r\n              ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n              : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n          }`}\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // --- Right Panel ---\r\n  const rightPanel = (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"p-4 border-b border-gray-200\">\r\n        <h3 className=\"font-semibold text-gray-900\">\r\n          Selected Categories ({selectedCategories.length})\r\n        </h3>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-y-auto p-4\">\r\n        {selectedCategories.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            <p className=\"text-sm\">No categories selected</p>\r\n            <p className=\"text-xs mt-1\">Select categories from the left</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {selectedCategories.map((category) => (\r\n              <div\r\n                key={category.id}\r\n                onClick={() => handleToggleCategory(category)}\r\n                className=\"flex items-center justify-between border-2 border-purple-500 rounded-lg p-4 hover:bg-pink-50 transition-colors cursor-pointer\"\r\n              >\r\n                <span className=\"truncate text-sm font-medium text-gray-900\">\r\n                  {category.category_name}\r\n                </span>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleToggleCategory(category);\r\n                  }}\r\n                  className=\"text-red-600 hover:text-red-700 text-xl font-bold leading-none ml-2\"\r\n                  title=\"Remove from selection\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex justify-end p-4 border-t border-gray-200\">\r\n        <button\r\n          onClick={handleRemoveClick}\r\n          disabled={isRemoveDisabled}\r\n          className={`px-4 py-2 rounded-lg text-white font-medium transition-colors ${\r\n            isRemoveDisabled\r\n              ? \"bg-gray-300 cursor-not-allowed\"\r\n              : \"bg-purple-500 hover:bg-purple-700\"\r\n          }`}\r\n        >\r\n          {removeButtonText}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <DualPanelModal\r\n        isOpen\r\n        onClose={handleCancel}\r\n        topPanel={topPanel}\r\n        leftPanel={leftPanel}\r\n        rightPanel={rightPanel}\r\n      />\r\n\r\n      {showConfirmation && (\r\n        <CategoryConfirmModal\r\n          title=\"Confirm Deletion\"\r\n          message=\"The following categories will be deleted permanently\"\r\n          items={selectedCategories.map((c) => c.category_name)}\r\n          confirmLabel=\"Delete\"\r\n          cancelLabel=\"Cancel\"\r\n          onConfirm={handleConfirmRemove}\r\n          onClose={() => setShowConfirmation(false)} // updated\r\n          isLoading={isLoading}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\n// RestockProduct.jsx\r\nexport function RestockProduct({ product, onClose, onSuccess }) {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleIncrement = () => setQuantity(prev => prev + 1);\r\n  const handleDecrement = () => setQuantity(prev => Math.max(1, prev - 1));\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onSuccess(quantity);\r\n    } catch (error) {\r\n      console.error(\"Failed to restock product:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\">\r\n      <div className=\"bg-white w-[320px] rounded-2xl border-2 border-pink-800 shadow-lg text-center\">\r\n        <h2 className=\"text-xl text-left font-bold p-4 border-b-2 border-gray-200\">Restock</h2>\r\n\r\n        <div className=\"p-6\">\r\n          <label className=\"block text-left text-sm font-semibold text-gray-800 mb-1\">\r\n            Restock quantity\r\n          </label>\r\n          <div className=\"flex items-center border border-gray-300 rounded-md overflow-hidden\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleDecrement}\r\n              className=\"w-10 h-10 text-xl text-gray-700 border-r border-gray-300 hover:bg-gray-100 transition\"\r\n              disabled={loading}\r\n            >\r\n              â€“\r\n            </button>\r\n            <span className=\"flex-1 text-center text-gray-900 font-medium select-none\">\r\n              {quantity}\r\n            </span>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleIncrement}\r\n              className=\"w-10 h-10 text-xl text-gray-700 border-l border-gray-300 hover:bg-gray-100 transition\"\r\n              disabled={loading}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between p-6 border-t-2 border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"bg-gray-300 text-gray-600 px-5 py-2 rounded-md font-medium hover:bg-gray-400 transition\"\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            className=\"bg-purple-600 text-white px-5 py-2 rounded-md font-medium hover:bg-purple-700 transition disabled:opacity-50\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Processing...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\n\r\n// DeductProduct.jsx\r\nexport function DeductProduct({ product, onClose, onSuccess }) {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [reason, setReason] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleIncrement = () => setQuantity(prev => prev + 1);\r\n  const handleDecrement = () => setQuantity(prev => Math.max(1, prev - 1));\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onSuccess(quantity, reason);\r\n    } catch (error) {\r\n      console.error(\"Failed to deduct product:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\">\r\n      <div className=\"w-[320px] bg-white border-2 border-pink-800 rounded-lg shadow-lg\">\r\n        <h2 className=\"text-lg font-bold text-gray-900 border-b-2 border-gray-200 p-4\">Deduct</h2>\r\n\r\n        <div className=\"p-6\">\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-semibold text-gray-800 mb-1\">\r\n              Deduct quantity\r\n            </label>\r\n            <div className=\"flex items-center border border-gray-300 rounded-md overflow-hidden\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleDecrement}\r\n                className=\"w-10 h-10 text-xl text-gray-700 border-r border-gray-300 hover:bg-gray-100 transition\"\r\n                disabled={loading}\r\n              >\r\n                â€“\r\n              </button>\r\n              <span className=\"flex-1 text-center text-gray-900 font-medium select-none\">\r\n                {quantity}\r\n              </span>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleIncrement}\r\n                className=\"w-10 h-10 text-xl text-gray-700 border-l border-gray-300 hover:bg-gray-100 transition\"\r\n                disabled={loading}\r\n              >\r\n                +\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-800 mb-1\">\r\n              Reason\r\n            </label>\r\n            <textarea\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              placeholder=\"example: Damaged, Lost\"\r\n              className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none\"\r\n              rows=\"3\"\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between border-t-2 border-gray-200 p-6\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 rounded-md bg-gray-200 text-gray-600 font-medium hover:bg-gray-300 transition\"\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            className=\"px-5 py-2 rounded-md bg-purple-500 text-white font-medium hover:bg-purple-700 transition disabled:opacity-50\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Processing...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\n\r\n// RemoveProduct.jsx\r\nexport function RemoveProduct({ product, onClose, onSuccess }) {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await onSuccess();\r\n    } catch (error) {\r\n      console.error(\"Failed to remove product:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\">\r\n      <div className=\"w-[320px] bg-white border-2 border-purple-500 rounded-lg shadow-lg\">\r\n        <h2 className=\"text-lg font-bold text-gray-900 p-4 border-b-2 border-gray-200\">Remove</h2>\r\n\r\n        <p className=\"text-gray-800 p-6\">\r\n          Do you really want to delete <strong>{product?.name}</strong> from the list?\r\n        </p>\r\n\r\n        <div className=\"flex justify-between border-t-2 p-6 border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 rounded-md bg-gray-200 text-gray-600 font-medium hover:bg-gray-300 transition\"\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            className=\"px-5 py-2 rounded-md bg-purple-500 text-white font-medium hover:bg-purple-700 transition disabled:opacity-50\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Removing...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport HeaderControls from \"./InventoryContent/HeaderControl\";\r\nimport TableHeader from \"./InventoryContent/TableHeader\";\r\nimport ProductTable from \"./InventoryContent/ProductTable\";\r\nimport MessageToast from \"../MessageToast\";\r\n\r\nimport { useInventoryHandler } from \"./InventoryContent/useInventoryHandler\";\r\nimport { useProductOperationHandler } from \"./ProductOperation/useProductOperationHandler\";\r\n\r\n// âœ… Import modals\r\nimport CreateCategoryModal from \"../modals/CreateCategoryModal\";\r\nimport CreateProductModal from \"../modals/CreateProductModal\";\r\nimport RemoveMultipleProductsModal from \"../modals/RemoveMultipleProductModal/RemoveMultipleProductsModal\";\r\nimport RemoveMultipleCategoriesModal from \"../modals/RemoveMultipleCategoriesModal/RemoveMultipleCategoriesModal\";\r\n\r\n// âœ… Import other product operation components\r\nimport { RestockProduct } from \"./ProductOperation/RestockProduct\";\r\nimport { DeductProduct } from \"./ProductOperation/DeductProduct\";\r\nimport { RemoveProduct } from \"./ProductOperation/RemoveProduct\";\r\n\r\nexport default function InventoryContent() {\r\n  const {\r\n    state,\r\n    setState,\r\n    handlers,\r\n    categories,\r\n    filteredPages,\r\n    loaderRef,\r\n    message,\r\n    refetch,\r\n    refetchCategories,\r\n  } = useInventoryHandler();\r\n\r\n  // âœ… Centralized product operation handlers\r\n  const productOperations = useProductOperationHandler({\r\n    setState,\r\n    setMessage: setState.setMessage,\r\n  });\r\n\r\n  const { getStatus, isFetchingNextPage } = handlers;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-[88vh] bg-white rounded-xl shadow m-4 border border-gray-200\">\r\n      {/* Header */}\r\n      <HeaderControls\r\n        searchInput={state.searchInput}\r\n        setState={setState.set}\r\n        dropdownOpen={state.dropdownOpen}\r\n        setDropdownOpen={setState.setDropdownOpen}\r\n      />\r\n\r\n      {/* Table Header */}\r\n      <TableHeader\r\n        selectedCategory={state.selectedCategory}\r\n        statusFilter={state.statusFilter}\r\n        setState={setState.set}\r\n        categories={categories}\r\n      />\r\n\r\n      {/* Product Table */}\r\n      <ProductTable\r\n        productsPages={filteredPages}\r\n        categories={categories}\r\n        getStatus={getStatus}\r\n        // âœ… Open operation modals instead of instant actions\r\n        onRestockProduct={(product) => setState.setRestockProduct(product)}\r\n        onDeductProduct={(product) => setState.setDeductProduct(product)}\r\n        onRemoveProduct={(product) => setState.setRemoveProduct(product)}\r\n        loaderRef={loaderRef}\r\n        isFetchingNextPage={isFetchingNextPage}\r\n        onEditProduct={(product, formData) =>\r\n          productOperations.handleEditProduct(product.id, formData)\r\n        }\r\n      />\r\n\r\n      {/* âœ… Category & Product Management Modals */}\r\n      {state.showCreateCategory && (\r\n        <CreateCategoryModal\r\n          categories={categories}\r\n          setMessage={setState.setMessage}\r\n          onClose={() => setState.set(\"showCreateCategory\", false)}\r\n          onSuccess={() => {\r\n            setState.set(\"showCreateCategory\", false);\r\n            setState.setMessage({\r\n              type: \"success\",\r\n              text: \"Category created successfully!\",\r\n            });\r\n            refetch();\r\n            refetchCategories();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {state.showCreateProduct && (\r\n        <CreateProductModal\r\n          categories={categories}\r\n          setMessage={setState.setMessage}\r\n          onClose={() => setState.set(\"showCreateProduct\", false)}\r\n          onSuccess={() => {\r\n            setState.set(\"showCreateProduct\", false);\r\n            setState.setMessage({\r\n              type: \"success\",\r\n              text: \"Product created successfully!\",\r\n            });\r\n            refetch();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {state.showRemoveCategory && (\r\n        <RemoveMultipleCategoriesModal\r\n          categories={categories.filter(\r\n            (c) => c.category_name !== \"All\" && c.category_name !== \"Uncategorized\"\r\n          )}\r\n          onClose={() => setState.set(\"showRemoveCategory\", false)}\r\n          onSuccess={() => {\r\n            setState.set(\"showRemoveCategory\", false);\r\n            setState.setMessage({\r\n              type: \"success\",\r\n              text: \"Categories removed successfully!\",\r\n            });\r\n            refetchCategories();\r\n            refetch();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {state.showRemoveProducts && (\r\n        <RemoveMultipleProductsModal\r\n          products={filteredPages.flatMap((page) => page.data || [])}\r\n          onClose={() => setState.set(\"showRemoveProducts\", false)}\r\n          onSuccess={() => {\r\n            setState.set(\"showRemoveProducts\", false);\r\n            setState.setMessage({\r\n              type: \"success\",\r\n              text: \"Products removed successfully!\",\r\n            });\r\n            refetch();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* âœ… Restock Modal */}\r\n      {state.restockProduct && (\r\n        <RestockProduct\r\n          product={state.restockProduct}\r\n          onClose={() => setState.setRestockProduct(null)}\r\n          onSuccess={async (quantity) => {\r\n            try {\r\n              await productOperations.handleRestockProduct(\r\n                state.restockProduct.id,\r\n                quantity\r\n              );\r\n              setState.setRestockProduct(null);\r\n              setState.setMessage({\r\n                type: \"success\",\r\n                text: \"Product restocked successfully!\",\r\n              });\r\n              refetch();\r\n            } catch (error) {\r\n              console.error(error);\r\n              setState.setMessage({\r\n                type: \"error\",\r\n                text: \"Failed to restock product.\",\r\n              });\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* âœ… Deduct Modal */}\r\n      {state.deductProduct && (\r\n        <DeductProduct\r\n          product={state.deductProduct}\r\n          onClose={() => setState.setDeductProduct(null)}\r\n          onSuccess={async (quantity, reason) => {\r\n            try {\r\n              await productOperations.handleDeductProduct(\r\n                state.deductProduct.id,\r\n                quantity,\r\n                reason\r\n              );\r\n              setState.setDeductProduct(null);\r\n              setState.setMessage({\r\n                type: \"success\",\r\n                text: \"Product deducted successfully!\",\r\n              });\r\n              refetch();\r\n            } catch (error) {\r\n              console.error(error);\r\n              setState.setMessage({\r\n                type: \"error\",\r\n                text: \"Failed to deduct product.\",\r\n              });\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* âœ… Remove Modal */}\r\n      {state.removeProduct && (\r\n        <RemoveProduct\r\n          product={state.removeProduct}\r\n          isOpen={true}\r\n          onClose={() => setState.setRemoveProduct(null)}\r\n          onSuccess={async () => {\r\n            try {\r\n              await productOperations.handleRemoveProduct(state.removeProduct.id);\r\n              setState.setRemoveProduct(null);\r\n              setState.setMessage({\r\n                type: \"success\",\r\n                text: \"Product removed successfully!\",\r\n              });\r\n              refetch();\r\n            } catch (error) {\r\n              console.error(error);\r\n              setState.setMessage({\r\n                type: \"error\",\r\n                text: \"Failed to remove product.\",\r\n              });\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* âœ… Toast Messages */}\r\n      <MessageToast message={message} onClose={() => setState.setMessage(null)} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["QueryObserver","Subscribable","client","options","#client","#selectError","#currentThenable","pendingThenable","#currentQuery","#currentQueryInitialState","#currentResult","#currentResultState","#currentResultOptions","#selectFn","#selectResult","#lastQueryWithDefinedData","#staleTimeoutId","#refetchIntervalId","#currentRefetchInterval","#trackedProps","shouldFetchOnMount","#executeFetch","#updateTimers","shouldFetchOn","#clearStaleTimeout","#clearRefetchInterval","prevOptions","prevQuery","resolveEnabled","#updateQuery","shallowEqualObjects","mounted","shouldFetchOptionally","resolveStaleTime","#updateStaleTimeout","nextRefetchInterval","#computeRefetchInterval","#updateRefetchInterval","query","result","shouldAssignObserverCurrentProperties","onPropTracked","target","key","defaultedOptions","fetchOptions","promise","noop","staleTime","isServer","isValidTimeout","timeout","timeUntilStale","timeoutManager","nextInterval","focusManager","prevResult","prevResultState","prevResultOptions","queryInitialState","state","newState","isPlaceholderData","data","fetchOnMount","fetchOptionally","fetchState","error","errorUpdatedAt","status","skipSelect","placeholderData","replaceData","selectError","isFetching","isPending","isError","isLoading","hasData","nextResult","isStale","finalizeThenableIfPossible","thenable","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","#notify","notifyOptions","notifyManager","listener","shouldLoadOnMount","field","value","observer","optimisticResult","InfiniteQueryObserver","infiniteQueryBehavior","parentResult","isRefetching","isRefetchError","fetchDirection","isFetchNextPageError","isFetchingNextPage","isFetchPreviousPageError","isFetchingPreviousPage","hasNextPage","hasPreviousPage","MutationObserver","#currentMutation","#mutateOptions","#updateResult","hashKey","action","variables","getDefaultState","onMutateResult","context","IsRestoringContext","React.createContext","useIsRestoring","React.useContext","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","React.useEffect","getHasError","throwOnError","suspense","shouldThrowError","ensureSuspenseTimers","clamp","originalStaleTime","args","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","queryClient","useQueryClient","isNewCacheEntry","React.useState","shouldSubscribe","React.useSyncExternalStore","React.useCallback","onStoreChange","unsubscribe","useMutation","mutate","mutateOptions","useInfiniteQuery","SettingsIcon","className","strokeWidth","jsxs","jsx","MinusIcon","UploadIcon","RemoveIcon","HeaderControls","searchInput","setState","dropdownOpen","setDropdownOpen","dropdownRef","useRef","useEffect","handleClickOutside","event","e","PlusIcon","label","TableHeader","selectedCategory","statusFilter","categories","c","s","Modal","isOpen","onClose","title","children","maxWidth","maxWidthClasses","EditProduct","product","onSuccess","formData","setFormData","useState","loading","setLoading","previewUrl","setPreviewUrl","handleInputChange","prev","handleImageChange","file","handleCategorySelect","id","handleRemoveCategory","cid","handleSubmit","selectedCategories","ProductTable","productsPages","getStatus","onRestockProduct","onDeductProduct","onRemoveProduct","onEditProduct","loaderRef","openDropdownId","setOpenDropdownId","selectedProduct","setSelectedProduct","isModalOpen","setIsModalOpen","products","page","handleEditProductClick","handleCloseModal","Fragment","p","categoriesList","visibleCats","extraCats","cat","i","productId","useProductsData","search","category","perPage","pageParam","response","getProductsData","lastPage","getCategories","api","createCategory","removeCategories","categoryNames","uniqueCategories","useCategoryData","setCategories","setError","fetchCategories","err","useClickOutside","ref","callback","useInventoryHandler","setSearchInput","debouncedSearch","useDebounce","setStatusFilter","setSelectedCategory","showCreateCategory","setShowCreateCategory","showCreateProduct","setShowCreateProduct","showRemoveCategory","setShowRemoveCategory","showRemoveProducts","setShowRemoveProducts","editProduct","setEditProduct","message","setMessage","restockProduct","setRestockProduct","deductProduct","setDeductProduct","removeProduct","setRemoveProduct","createCategoryRef","createProductRef","removeCategoryRef","removeProductsRef","categoriesData","refetchCategories","useMemo","hasAll","hasUncategorized","categoryValue","fetchNextPage","refetch","filteredPages","useInfiniteScroll","setters","stock","threshold","useUpdateProduct","updateProduct","useDeleteProduct","deleteProduct","useRestockProduct","quantity","useDeductProduct","reason","useProductOperationHandler","updateProductMutation","deleteProductMutation","restockProductMutation","deductProductMutation","refreshProducts","DualPanelModal","topPanel","leftPanel","rightPanel","handleEscape","CategoryConfirmModal","items","confirmLabel","cancelLabel","onConfirm","modalRef","stopPropagation","displayList","name","index","CategoryNameInput","onChange","isDuplicate","toastMessage","setToastMessage","handleCloseToast","MessageToast","ProductSearchFilters","categoryFilter","existingCategories","onSearchChange","onCategoryFilterChange","categoriesOptions","AvailableProductsList","onProductAdd","ProductSearchPanel","availableProducts","onCancel","onReset","SelectedProductsList","onRemove","onCreateClick","isCreateDisabled","createButtonText","CreateCategoryModal","categoryName","setCategoryName","selectedProducts","setSelectedProducts","setSearch","setCategoryFilter","showConfirmation","setShowConfirmation","setIsLoading","confirmModalRef","allNames","n","sp","handleAddProduct","handleRemoveProduct","handleReset","handleCancel","trimmedName","handleCreateClick","handleConfirmCreate","payload","res","errorText","useCreateProductForm","productName","setProductName","price","setPrice","setQuantity","stockThreshold","setStockThreshold","setSelectedCategories","setFile","productImage","setProductImage","validCategoryIds","handleCategoryChange","categoryId","isChecked","selectedFile","validateForm","createProduct","errorData","msgs","CreateProductModal","formState","handlers","ImageUpload","ProductNameInput","PriceInput","CategorySelector","QuantityInput","ThresholdInput","image","handleChange","onCategoryChange","searchTerm","setSearchTerm","open","setOpen","handleCategoryToggle","catId","filteredCategories","selectedCategoryNames","numericValue","newValue","handleDecrement","handleIncrement","useRemoveProducts","removeMultipleProducts","useRemoveMultipleProductsForm","isRemoving","productsToDelete","toggleProduct","pid","handleRemoveClick","handleConfirmRemove","removeButtonText","isRemoveDisabled","RemoveMultipleProductsModal","useRemoveCategories","useRemoveMultipleCategoriesForm","availableCategories","handleToggleCategory","RemoveMultipleCategoriesModal","isSelected","RestockProduct","DeductProduct","setReason","RemoveProduct","InventoryContent","productOperations"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}