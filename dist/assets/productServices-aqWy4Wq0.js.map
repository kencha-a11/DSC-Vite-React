{"version":3,"file":"productServices-aqWy4Wq0.js","sources":["../../src/utils/apiHelpers.js","../../src/services/productServices.js"],"sourcesContent":["/**\r\n * Extract normalized data from a paginated API response.\r\n * Ensures consistent keys and defaults.\r\n *\r\n * @param {object} response - Axios response object\r\n * @returns {{\r\n *   data: Array,\r\n *   current_page: number,\r\n *   last_page: number,\r\n *   per_page: number,\r\n *   total: number,\r\n *   hasMore: boolean\r\n * }}\r\n */\r\nexport function extractDataFromResponse(response) {\r\n  const raw = response?.data ?? {};\r\n\r\n  const data = Array.isArray(raw.data) ? raw.data : [];\r\n  const perPage = Number(raw.per_page ?? 10);\r\n  const currentPage = Number(raw.current_page ?? 1);\r\n  const lastPage = Number(raw.last_page ?? 1);\r\n  const total = Number(raw.total ?? data.length);\r\n  const hasMore = typeof raw.hasMore === \"boolean\" ? raw.hasMore : currentPage < lastPage;\r\n\r\n  return { data, current_page: currentPage, last_page: lastPage, per_page: perPage, total, hasMore };\r\n}\r\n","// src/services/productServices.js\r\nimport api from \"../api/axios\";\r\nimport { extractDataFromResponse } from \"../utils/apiHelpers\";\r\n\r\n/**\r\n * Fetch paginated products with filters\r\n * @param {number} page - Current page number\r\n * @param {number} perPage - Items per page\r\n * @param {string} search - Search term\r\n * @param {string} category - Category filter (category name)\r\n * @param {string} status - Status filter (\"stock\", \"low stock\", \"out of stock\")\r\n */\r\nexport async function getProductsData(\r\n  page = 1,\r\n  perPage = 10,\r\n  search = \"\",\r\n  category = null,\r\n  status = \"\" // ✅ Add status parameter\r\n) {\r\n  try {\r\n    const params = new URLSearchParams({ page, perPage, search });\r\n\r\n    // Add category filter (must be name)\r\n    if (category && category !== \"All\") params.append(\"category\", category);\r\n\r\n    // ✅ Add status filter\r\n    if (status) params.append(\"status\", status);\r\n\r\n    const response = await api.get(`/products?${params.toString()}`);\r\n\r\n    return extractDataFromResponse(response);\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch products:\", error.response?.data ?? error);\r\n    return {\r\n      data: [],\r\n      current_page: 1,\r\n      last_page: 1,\r\n      per_page: perPage,\r\n      total: 0,\r\n      hasMore: false,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch products data from backend with optional filters.\r\n *\r\n * @param {number} page - Current page number (default: 1)\r\n * @param {number} perPage - Number of items per page (default: 10)\r\n * @param {string} search - Search keyword (default: \"\")\r\n * @param {string|null} category - Category name filter (default: null)\r\n * @param {string} status - Stock status filter: \"stock\", \"low stock\", \"out of stock\" (default: \"\")\r\n * @returns {Promise<Object>} Paginated product data\r\n */\r\nexport async function getSellProductsData(\r\n  page = 1,\r\n  perPage = 10,\r\n  search = \"\",\r\n  category = null,\r\n  status = \"\" // ✅ Stock status filter\r\n) {\r\n  try {\r\n    const params = new URLSearchParams({\r\n      page,\r\n      perPage,\r\n      search,\r\n    });\r\n\r\n    // Add category filter if provided\r\n    if (category && category !== \"All\") {\r\n      params.append(\"category\", category);\r\n    }\r\n\r\n    // Add status filter if provided\r\n    if (status) {\r\n      params.append(\"status\", status);\r\n    }\r\n\r\n    const response = await api.get(`/sell/products?${params.toString()}`);\r\n    return extractDataFromResponse(response);\r\n  } catch (error) {\r\n    console.error(\"Failed to fetch products:\", error.response?.data ?? error);\r\n    return {\r\n      data: [],\r\n      current_page: 1,\r\n      last_page: 1,\r\n      per_page: perPage,\r\n      total: 0,\r\n      hasMore: false,\r\n    };\r\n  }\r\n}\r\n\r\n// /**\r\n//  * Fetch categories\r\n//  */\r\n// export async function getCategoriesData() {\r\n//   const response = await api.get(\"/categories\");\r\n//   return response?.data ?? [];\r\n// }\r\n\r\n/**\r\n * Create a new product\r\n * @param {FormData} formData\r\n */\r\nexport async function createProduct(formData) {\r\n  try {\r\n    const response = await api.post(\"/products\", formData, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error creating product:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing product\r\n * @param {number} id - Product ID\r\n * @param {FormData} formData - Updated product data\r\n */\r\nexport async function updateProduct(id, formData) {\r\n  try {\r\n    const response = await api.post(`/products/${id}?_method=PUT`, formData, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error updating product:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a product\r\n * @param {number} id - Product ID\r\n */\r\nexport async function deleteProduct(id) {\r\n  try {\r\n    const response = await api.delete(`/products/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error deleting product:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete multiple products\r\n * @param {Array<number>} data - Array of product IDs\r\n */\r\nexport async function removeMultipleProducts(data) {\r\n  try {\r\n    // data must be an object: { products: [...] }\r\n    const response = await api.delete(\"/products/multiple\", { data });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error deleting multiple products:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Restock a product\r\n * @param {number} id - Product ID\r\n * @param {Object} data - { quantity: number }\r\n */\r\nexport async function restockProduct(id, data) {\r\n  try {\r\n    const response = await api.post(`/products/${id}/restock`, data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error restocking product:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Deduct stock from a product\r\n * @param {number} id - Product ID\r\n * @param {Object} data - { quantity: number, reason: string }\r\n */\r\nexport async function deductProduct(id, data) {\r\n  try {\r\n    const response = await api.post(`/products/${id}/deduct`, data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error deducting product:\", error);\r\n    throw error;\r\n  }\r\n}"],"names":["extractDataFromResponse","response","raw","data","perPage","currentPage","lastPage","total","hasMore","getProductsData","page","search","category","status","params","api","error","getSellProductsData","createProduct","formData","updateProduct","id","deleteProduct","removeMultipleProducts","restockProduct","deductProduct"],"mappings":"wCAcO,SAASA,EAAwBC,EAAU,CAChD,MAAMC,EAAMD,GAAU,MAAQ,GAExBE,EAAO,MAAM,QAAQD,EAAI,IAAI,EAAIA,EAAI,KAAO,GAC5CE,EAAU,OAAOF,EAAI,UAAY,EAAE,EACnCG,EAAc,OAAOH,EAAI,cAAgB,CAAC,EAC1CI,EAAW,OAAOJ,EAAI,WAAa,CAAC,EACpCK,EAAQ,OAAOL,EAAI,OAASC,EAAK,MAAM,EACvCK,EAAU,OAAON,EAAI,SAAY,UAAYA,EAAI,QAAUG,EAAcC,EAE/E,MAAO,CAAE,KAAAH,EAAM,aAAcE,EAAa,UAAWC,EAAU,SAAUF,EAAS,MAAAG,EAAO,QAAAC,EAC3F,CCbO,eAAeC,EACpBC,EAAO,EACPN,EAAU,GACVO,EAAS,GACTC,EAAW,KACXC,EAAS,GACT,CACA,GAAI,CACF,MAAMC,EAAS,IAAI,gBAAgB,CAAE,KAAAJ,EAAM,QAAAN,EAAS,OAAAO,CAAM,CAAE,EAGxDC,GAAYA,IAAa,OAAOE,EAAO,OAAO,WAAYF,CAAQ,EAGlEC,GAAQC,EAAO,OAAO,SAAUD,CAAM,EAE1C,MAAMZ,EAAW,MAAMc,EAAI,IAAI,aAAaD,EAAO,UAAU,EAAE,EAE/D,OAAOd,EAAwBC,CAAQ,CACzC,OAASe,EAAO,CACd,eAAQ,MAAM,4BAA6BA,EAAM,UAAU,MAAQA,CAAK,EACjE,CACL,KAAM,CAAA,EACN,aAAc,EACd,UAAW,EACX,SAAUZ,EACV,MAAO,EACP,QAAS,EACf,CACE,CACF,CAYO,eAAea,EACpBP,EAAO,EACPN,EAAU,GACVO,EAAS,GACTC,EAAW,KACXC,EAAS,GACT,CACA,GAAI,CACF,MAAMC,EAAS,IAAI,gBAAgB,CACjC,KAAAJ,EACA,QAAAN,EACA,OAAAO,CACN,CAAK,EAGGC,GAAYA,IAAa,OAC3BE,EAAO,OAAO,WAAYF,CAAQ,EAIhCC,GACFC,EAAO,OAAO,SAAUD,CAAM,EAGhC,MAAMZ,EAAW,MAAMc,EAAI,IAAI,kBAAkBD,EAAO,UAAU,EAAE,EACpE,OAAOd,EAAwBC,CAAQ,CACzC,OAASe,EAAO,CACd,eAAQ,MAAM,4BAA6BA,EAAM,UAAU,MAAQA,CAAK,EACjE,CACL,KAAM,CAAA,EACN,aAAc,EACd,UAAW,EACX,SAAUZ,EACV,MAAO,EACP,QAAS,EACf,CACE,CACF,CAcO,eAAec,EAAcC,EAAU,CAC5C,GAAI,CAIF,OAHiB,MAAMJ,EAAI,KAAK,YAAaI,EAAU,CACrD,QAAS,CAAE,eAAgB,qBAAqB,CACtD,CAAK,GACe,IAClB,OAASH,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAOO,eAAeI,EAAcC,EAAIF,EAAU,CAChD,GAAI,CAIF,OAHiB,MAAMJ,EAAI,KAAK,aAAaM,CAAE,eAAgBF,EAAU,CACvE,QAAS,CAAE,eAAgB,qBAAqB,CACtD,CAAK,GACe,IAClB,OAASH,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAMO,eAAeM,EAAcD,EAAI,CACtC,GAAI,CAEF,OADiB,MAAMN,EAAI,OAAO,aAAaM,CAAE,EAAE,GACnC,IAClB,OAASL,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAMO,eAAeO,EAAuBpB,EAAM,CACjD,GAAI,CAGF,OADiB,MAAMY,EAAI,OAAO,qBAAsB,CAAE,KAAAZ,CAAI,CAAE,GAChD,IAClB,OAASa,EAAO,CACd,cAAQ,MAAM,oCAAqCA,CAAK,EAClDA,CACR,CACF,CAQO,eAAeQ,EAAeH,EAAIlB,EAAM,CAC7C,GAAI,CAEF,OADiB,MAAMY,EAAI,KAAK,aAAaM,CAAE,WAAYlB,CAAI,GAC/C,IAClB,OAASa,EAAO,CACd,cAAQ,MAAM,4BAA6BA,CAAK,EAC1CA,CACR,CACF,CAOO,eAAeS,EAAcJ,EAAIlB,EAAM,CAC5C,GAAI,CAEF,OADiB,MAAMY,EAAI,KAAK,aAAaM,CAAE,UAAWlB,CAAI,GAC9C,IAClB,OAASa,EAAO,CACd,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACR,CACF"}